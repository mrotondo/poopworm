<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.44">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Courier}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #000000}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000; min-height: 12.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; min-height: 16.0px}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Courier; min-height: 14.0px}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #000000; min-height: 14.0px}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #000000; min-height: 14.0px}
p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; min-height: 14.0px}
p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Helvetica; min-height: 22.0px}
span.s1 {color: #002bfe}
span.s2 {color: #000000}
span.s3 {color: #0000bf}
span.s4 {color: #bf0000}
span.s5 {font: 12.0px Monaco}
span.s6 {color: #606060}
span.s7 {color: #007300}
span.s8 {font: 9.0px Monaco}
span.s9 {font: 9.0px Monaco; color: #0000bf}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>Control Structures</b></p>
<p class="p2"><br></p>
<p class="p3">Control structures in SuperCollider are implemented via message sends. Here are a few of those available.<span class="Apple-converted-space"> </span></p>
<p class="p3">See <a href="Syntax-Shortcuts.html"><span class="s1">Syntax-Shortcuts</span></a> for the various ways expressions can be written.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><b>If</b></p>
<p class="p2"><br></p>
<p class="p3">Conditional execution is implemented via the <b>if</b> message. The <b>if</b> message is sent to an expression which must return a Boolean value. In addition it takes two arguments: a function to execute if the expression is true and another optional function to execute if the expression is false. The <b>if</b> message returns the value of the function which is executed. If the falseFunc is not present and the expression is false then the result of the <b>if</b> message is nil.</p>
<p class="p2"><br></p>
<p class="p3">syntax:</p>
<p class="p2"><br></p>
<p class="p4">if (expr, trueFunc, falseFunc);</p>
<p class="p4">..or..</p>
<p class="p4">expr.if (trueFunc, falseFunc);</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p5">see also: the<b> </b><a href="../Core/if.html">if</a><b> helpfile</b></p>
<p class="p2"><br></p>
<p class="p3">examples:</p>
<p class="p2"><br></p>
<p class="p6"><span class="s2">if ( [</span><span class="s3">false</span><span class="s2">, </span><span class="s3">true</span><span class="s2">].choose,<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Boolean expression (chooses one at random)</p>
<p class="p7"><span class="s2"><span class="Apple-tab-span">	</span>{ </span>"expression was true"<span class="s2">.postln },<span class="Apple-tab-span">	</span></span><span class="s4">// true function</span></p>
<p class="p7"><span class="s2"><span class="Apple-tab-span">	</span>{ </span>"expression was false"<span class="s2">.postln }<span class="Apple-tab-span">	</span></span><span class="s4">// false function</span></p>
<p class="p8">)</p>
<p class="p9"><br></p>
<p class="p8">(</p>
<p class="p8"><span class="s3">var</span> a = 1, z;</p>
<p class="p8">z = if (a &lt; 5, { 100 },{ 200 });</p>
<p class="p8">z.postln;</p>
<p class="p8">)</p>
<p class="p9"><br></p>
<p class="p8">(</p>
<p class="p8"><span class="s3">var</span> x;</p>
<p class="p8">if (x.isNil, { x = 99 });</p>
<p class="p8">x.postln;</p>
<p class="p8">)</p>
<p class="p10"><br></p>
<p class="p3"><span class="s5">'</span>If' expressions are optimized (i.e. inlined) by the compiler if they do not contain variable declarations in the trueFunc and the falseFunc.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><b>While</b></p>
<p class="p2"><br></p>
<p class="p3">The <b>while</b> message implements conditional execution of a loop. If the testFunc answers true when evaluated, then the bodyFunc is evaluated and the process is repeated. Once the testFunc returns false, the loop terminates.</p>
<p class="p2"><br></p>
<p class="p3">syntax:</p>
<p class="p2"><br></p>
<p class="p4">while ( testFunc, bodyFunc );</p>
<p class="p4">..or..</p>
<p class="p4">testFunc.while( bodyFunc );</p>
<p class="p2"><br></p>
<p class="p3">example:</p>
<p class="p2"><br></p>
<p class="p8">(</p>
<p class="p8">i = 0;</p>
<p class="p8">while ( { i &lt; 5 }, { i = i + 1; <span class="s6">"boing"</span>.postln });</p>
<p class="p8">)</p>
<p class="p10"><br></p>
<p class="p3"><span class="s5">'</span>While' expressions are optimized by the compiler if they do not contain variable declarations in the testFunc and the bodyFunc.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><b>For</b></p>
<p class="p2"><br></p>
<p class="p3">The <b>for</b> message implements iteration over an integer series from a starting value to an end value stepping by one each time. A function is evaluated each iteration and is passed the iterated numeric value as an argument.</p>
<p class="p2"><br></p>
<p class="p3">syntax:</p>
<p class="p2"><br></p>
<p class="p4">for ( startValue, endValue, function )</p>
<p class="p4">..or..</p>
<p class="p4">startValue.for ( endValue, function )</p>
<p class="p2"><br></p>
<p class="p3">example:</p>
<p class="p2"><br></p>
<p class="p8">for (3, 7, { <span class="s3">arg</span> i; i.postln }); <span class="s4">// prints values 3 through 7</span></p>
<p class="p10"><br></p>
<p class="p10"><br></p>
<p class="p10"><br></p>
<p class="p1"><b>ForBy</b></p>
<p class="p2"><br></p>
<p class="p3">The <b>forBy</b> selector implements iteration over an integer series with a variable step size. A function is evaluated each iteration and is passed the iterated numeric value as an argument.</p>
<p class="p2"><br></p>
<p class="p3">syntax:</p>
<p class="p2"><br></p>
<p class="p4">forBy ( startValue, endValue, stepValue, function );</p>
<p class="p4">..or..</p>
<p class="p4">startValue.forBy ( endValue, stepValue, function );</p>
<p class="p11"><br></p>
<p class="p2"><br></p>
<p class="p3">example:</p>
<p class="p2"><br></p>
<p class="p8">forBy (0, 8, 2, { <span class="s3">arg</span> i; i.postln }); <span class="s4">// prints values 0 through 8 by 2's</span></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><b>Do</b></p>
<p class="p2"><br></p>
<p class="p3"><b>Do</b> is used to iterate over a collection. Positive Integers also respond to 'do' by iterating from zero up to their value. Collections iterate, calling the function for each object they contain. Other kinds of Objects respond to do by passing themselves to the function one time. The function is called with two arguments, the item, and an iteration counter.</p>
<p class="p2"><br></p>
<p class="p3">syntax:</p>
<p class="p2"><br></p>
<p class="p4">do ( collection, function )</p>
<p class="p4">..or..</p>
<p class="p4">collection.do(function)</p>
<p class="p11"><br></p>
<p class="p3">example:</p>
<p class="p2"><br></p>
<p class="p8">[ 1, 2, <span class="s6">"abc"</span>, (3@4) ].do({ <span class="s3">arg</span> item, i; [i, item].postln; });</p>
<p class="p9"><br></p>
<p class="p8">5.do({ <span class="s3">arg</span> item; item.postln }); <span class="s4">// iterates from zero to four</span></p>
<p class="p9"><br></p>
<p class="p6"><span class="s6">"you"</span><span class="s2">.do({ </span><span class="s3">arg</span><span class="s2"> item; item.postln }); </span>// a String is a collection of characters</p>
<p class="p9"><br></p>
<p class="p6"><span class="s7">'they'</span><span class="s2">.do({ </span><span class="s3">arg</span><span class="s2"> item; item.postln }); </span>// a Symbol is a singular item</p>
<p class="p9"><br></p>
<p class="p8">(8..20).do({ <span class="s3">arg</span> item; item.postln }); <span class="s4">// iterates from eight to twenty<span class="Apple-converted-space"> </span></span></p>
<p class="p9"><br></p>
<p class="p6"><span class="s2">(8,10..20).do({ </span><span class="s3">arg</span><span class="s2"> item; item.postln }); </span>// iterates from eight to twenty, with stepsize two</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">Routine</span>({ <span class="s3">var</span> i=10; while { i &gt; 0 } { i.yield; i = i - 5.0.rand } }).do({ <span class="s3">arg</span> item; item.postln });</p>
<p class="p12"><br></p>
<p class="p5"><b>Note:</b> The syntax (8..20).do uses an optimization to avoid generating an array that is used only for iteration (but which would be discarded thereafter). The return value of <span class="s8">(8..20).do({ </span><span class="s9">|item|</span><span class="s8"> item.postln })</span> is 8, the starting value.</p>
<p class="p12"><br></p>
<p class="p5"><span class="s8">(8..20) do: { </span><span class="s9">|item|</span><span class="s8"> item.postln }</span> is not optimized, and returns the array.</p>
<p class="p12"><br></p>
<p class="p12"><br></p>
<p class="p1"><b>Switch</b></p>
<p class="p2"><br></p>
<p class="p3">Object implements a <b>switch </b>method which allows for conditional evaluation with multiple cases. These are implemented as pairs of test objects (tested using if this == test.value) and corresponding functions to be evaluated if true. The switch statement will be inlined if the test objects are all Floats, Integers, Symbols, Chars, nil, false, true and if the functions have no variable or argument declarations. The inlined switch uses a hash lookup (which is faster than nested if statements), so it should be very fast and scale to any number of clauses.</p>
<p class="p2"><br></p>
<p class="p13"><br></p>
<p class="p8">(</p>
<p class="p6"><span class="s3">var</span><span class="s2"> x=0; </span>//also try 1</p>
<p class="p8">switch(x,0,{<span class="s6">"hello"</span>}, 1, {<span class="s6">"goodbye"</span>})</p>
<p class="p8">)</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p8">(</p>
<p class="p8"><span class="s3">var</span> x, z;</p>
<p class="p8">z = [0, 1, 1.1, 1.3, 1.5, 2];</p>
<p class="p8">switch (z.choose.postln,</p>
<p class="p8"><span class="Apple-tab-span">	</span>1, <span class="Apple-converted-space">  </span>{ <span class="s7">\no</span> },</p>
<p class="p8"><span class="Apple-tab-span">	</span>1.1, { <span class="s7">\wrong</span> },</p>
<p class="p8"><span class="Apple-tab-span">	</span>1.3, { <span class="s7">\wrong</span> },</p>
<p class="p8"><span class="Apple-tab-span">	</span>1.5, { <span class="s7">\wrong</span> },</p>
<p class="p8"><span class="Apple-tab-span">	</span>2, <span class="Apple-converted-space">  </span>{ <span class="s7">\wrong</span> },</p>
<p class="p8"><span class="Apple-tab-span">	</span>0, <span class="Apple-converted-space">  </span>{ <span class="s7">\true</span> }</p>
<p class="p8">).postln;</p>
<p class="p8">)</p>
<p class="p14"><br></p>
<p class="p5">or:</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8">(</p>
<p class="p8"><span class="s3">var</span> x, z;</p>
<p class="p8">z = [0, 1, 1.1, 1.3, 1.5, 2];</p>
<p class="p8">x = switch (z.choose)</p>
<p class="p8"><span class="Apple-tab-span">	</span>{1} <span class="Apple-converted-space">  </span>{ <span class="s7">\no</span> }</p>
<p class="p8"><span class="Apple-tab-span">	</span>{1.1} { <span class="s7">\wrong</span> }</p>
<p class="p8"><span class="Apple-tab-span">	</span>{1.3} { <span class="s7">\wrong</span> }</p>
<p class="p8"><span class="Apple-tab-span">	</span>{1.5} { <span class="s7">\wrong</span> }</p>
<p class="p8"><span class="Apple-tab-span">	</span>{2} <span class="Apple-converted-space">  </span>{ <span class="s7">\wrong</span> }</p>
<p class="p8"><span class="Apple-tab-span">	</span>{0} <span class="Apple-converted-space">  </span>{ <span class="s7">\true</span> };</p>
<p class="p8">x.postln;</p>
<p class="p8">)</p>
<p class="p15"><br></p>
<p class="p1"><b>Case</b></p>
<p class="p15"><br></p>
<p class="p3">Function implements a <b>case </b>method which allows for conditional evaluation with multiple cases. Since the receiver represents the first case this can be simply written as pairs of test functions and corresponding functions to be evaluated if true. Case is inlined and is therefore just as efficient as nested if statements.</p>
<p class="p15"><br></p>
<p class="p8">(</p>
<p class="p8"><span class="s3">var</span> i, x, z;</p>
<p class="p8">z = [0, 1, 1.1, 1.3, 1.5, 2];</p>
<p class="p8">i = z.choose;</p>
<p class="p8">x = case</p>
<p class="p8"><span class="Apple-tab-span">	</span>{ i == 1 } <span class="Apple-converted-space">  </span>{ <span class="s7">\no</span> }</p>
<p class="p8"><span class="Apple-tab-span">	</span>{ i == 1.1 } { <span class="s7">\wrong</span> }</p>
<p class="p8"><span class="Apple-tab-span">	</span>{ i == 1.3 } { <span class="s7">\wrong</span> }</p>
<p class="p8"><span class="Apple-tab-span">	</span>{ i == 1.5 } { <span class="s7">\wrong</span> }</p>
<p class="p8"><span class="Apple-tab-span">	</span>{ i == 2 } <span class="Apple-converted-space">  </span>{ <span class="s7">\wrong</span> }</p>
<p class="p8"><span class="Apple-tab-span">	</span>{ i == 0 } <span class="Apple-converted-space">  </span>{ <span class="s7">\true</span> };</p>
<p class="p8">x.postln;</p>
<p class="p8">)</p>
<p class="p16"><br></p>
<p class="p16"><br></p>
<p class="p1"><b>Other Control Structures</b></p>
<p class="p2"><br></p>
<p class="p3">Using Functions, many control structures can be defined like the ones above. In the class <b>Collection</b> there are many more messages defined for iterating over Collections.</p>
<p class="p2"><br></p>
</body>
</html>
