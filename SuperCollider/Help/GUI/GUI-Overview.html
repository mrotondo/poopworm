<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1038.25">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #0000ee}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; min-height: 14.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #bf0000; min-height: 14.0px}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #bf0000}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0000bf}
p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Helvetica; min-height: 11.0px}
p.p16 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco}
p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #0000bf}
span.s1 {color: #000000}
span.s2 {text-decoration: underline}
span.s3 {color: #0000bf}
span.s4 {text-decoration: underline ; color: #001bec}
span.s5 {color: #606060}
span.s6 {font: 10.0px Monaco; color: #bf0000}
span.s7 {color: #bf0000}
span.s8 {text-decoration: underline ; color: #0000ee}
span.s9 {color: #007300}
span.s10 {font: 12.0px Helvetica}
span.s11 {font: 10.0px Monaco; color: #0000bf}
span.s12 {font: 10.0px Monaco}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>GUI Overview and Introduction</b></p>
<p class="p2"><br></p>
<p class="p3"><span class="s1">See also: <a href="GUI-Classes.html"><span class="s2">GUI-Classes</span></a>, <a href="GUI-Tools/GUI.html"><span class="s2">GUI</span></a></span><span class="s3">, <a href="GUI-Tools/ViewRedirect.html"><span class="s4">ViewRedirect</span></a>.</span></p>
<p class="p4"><br></p>
<p class="p5">SuperCollider provides for using different gui kits, and also provides syntax for transparently writing kit and platform independent code. Two main classes control this mechnanism: the gui factory abstraction class, <a href="GUI-Tools/GUI.html"><span class="s3">GUI</span></a>, and the subclasses of <a href="GUI-Tools/ViewRedirect.html"><span class="s3">ViewRedirect</span></a>, which transparently uses the <a href="GUI-Tools/GUI.html"><span class="s3">GUI</span></a> class to redirect to the kit-specific gui class.</p>
<p class="p4"><br></p>
<p class="p5">For a table of all gui classes and their equivalents, see <a href="GUI-Classes.html"><span class="s3">GUI-Classes</span></a><span class="s3">.</span></p>
<p class="p5">For information on switching gui kits, see the documentation for <a href="GUI-Tools/GUI.html"><span class="s3">GUI</span></a>.</p>
<p class="p4"><br></p>
<p class="p6"><b>Basic usage: Kits and Syntax</b></p>
<p class="p7"><br></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>w=</span><span class="s3">Window</span><span class="s1">(</span><span class="s5">"Test Window"</span><span class="s1">).front; </span>// Window is a subclass of ViewRedirect</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>w.postln </span>// w now contains the class appropriate to the gui kit</p>
<p class="p7"><br></p>
<p class="p5">Kit-dependant gui classes have a prefix. For example, to make a window, the CocoaGUI kit uses <a href="Cocoa-GUI/SCWindow.html"><span class="s3">SCWindow</span></a><span class="s3">,</span> or the swing kit uses <a href="SC://JSCWindow.html"><span class="s3">JSCWindow</span></a>. It is generally discouraged to use the kit-dependant classes directly. Instead, you simply use the subclasses of <a href="GUI-Tools/ViewRedirect.html"><span class="s3">ViewRedirect</span></a><span class="s3">. </span>In most cases this involves simply using the class base name without any prefix, like in the example above. Behind the scenes, the above technique actually automatically redirects to the appropriate GUI class method. For a table of all gui classes and their kit-dependent equivalents, see <a href="GUI-Classes.html"><span class="s3">GUI-Classes</span></a><span class="s3">.</span></p>
<p class="p4"><br></p>
<p class="p5">Depending on the curent GUI.scheme the example above is equivalent to writing, for example:</p>
<p class="p4"><br></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s3">SCWindow</span><span class="s1">(</span><span class="s5">"Test Window"</span><span class="s1">).front; </span>// cocoa version</p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s6"><span class="Apple-tab-span">	</span></span>or</p>
<p class="p10"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s3">JSCWindow</span><span class="s1">(</span><span class="s5">"Test Window"</span><span class="s1">).front; </span>// swing version</p>
<p class="p4"><br></p>
<p class="p6"><b>Basic Usage: Windows, Containers and Decorators</b></p>
<p class="p7"><br></p>
<p class="p12">(</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// Window returns the window class for the current kit</p>
<p class="p12"><span class="Apple-tab-span">	</span>w = <span class="s3">Window</span>( <span class="s5">"my name is..."</span>, <span class="s3">Rect</span>( 128, 64, 340, 360 ));</p>
<p class="p2"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span>w.view.decorator = <span class="s3">FlowLayout</span>( w.view.bounds ); <span class="s7">// comment this out for no decorator</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// w.addFlowLayout // you can use this instead of the above line for brevity.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>w.view.background = <span class="s3">Color</span>( 0.6, 0.8, 0.8 );</p>
<p class="p2"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span>32.do({ <span class="s3">arg</span> i;</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Here Button returns the button class for the current kit</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s3">Button</span>( w, <span class="s3">Rect</span>( rrand( 20, 300 ), rrand( 20, 300 ), 75, 24 ));</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.states = [[ <span class="s5">"Start "</span> ++ i, <span class="s3">Color</span>.black, <span class="s3">Color</span>.rand ],</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[ <span class="s5">"Stop "</span> ++ i, <span class="s3">Color</span>.white, <span class="s3">Color</span>.red ]];</p>
<p class="p12"><span class="Apple-tab-span">	</span>});</p>
<p class="p2"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p12">)</p>
<p class="p2"><br></p>
<p class="p8"><span class="s1">w.postln </span>//prints the window instance for the current gui kit</p>
<p class="p8"><span class="s1">b.postln </span>//prints the button instance for the current gui kit</p>
<p class="p7"><br></p>
<p class="p5">In the above example, first a <a href="Main-GUI/Window.html"><span class="s3">Window</span></a> was created. A <a href="Main-GUI/Window.html"><span class="s3">Window</span></a> automatically has its own top level container, which is a subclass of <a href="Main-GUI/CompositeView.html"><span class="s3">CompositeView</span></a>. A <a href="Main-GUI/CompositeView.html"><span class="s3">CompositeView</span></a> can have a <b>decorator</b>, which automatically places the contents in a predetermined order. In this case it is a <a href="GUI-Tools/FlowLayout.html"><span class="s3">FlowLayout</span></a>, which is the only one that currently exists. This is optional however. Try commenting out the decorator in the example above.</p>
<p class="p4"><br></p>
<p class="p5"><span class="s8"><a href="Main-GUI/Window.html">Window</a></span> and <a href="Main-GUI/CompositeView.html"><span class="s3">CompositeView</span></a> both have addFlowLayout utility methods which assign an instance of FlowLayout to their view decorators and return the decorator.</p>
<p class="p7"><br></p>
<p class="p5">Most gui objects are subclasses of <a href="Main-GUI/View.html"><span class="s3">View</span></a>. All subclasses of View are created with the same beginning arguments, <b>parent </b>and <b>bounds</b>, for example, <a href="Main-GUI/Slider.html"><span class="s3">Slider</span></a>(<b>parent</b>, <b>bounds</b>).</p>
<p class="p4"><br></p>
<p class="p5">The <b>parent</b> is a container view of some kind, and the <b>bounds</b> are an instance of <a href="../Geometry/Rect.html"><span class="s3">Rect</span></a> or a <a href="../Geometry/Point.html"><span class="s3">Point</span></a> (for width and height only). Using a Point is convenient if you are using a decorator for the postioning.</p>
<p class="p7"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span>(</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>w=</span><span class="s3">Window</span><span class="s1">.new.front;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Use Rect for precise placement in a CompositeView</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s3">Slider</span><span class="s1">(w, </span><span class="s3">Rect</span><span class="s1"> (50,50,250,20)); <span class="Apple-tab-span">	</span></span>// Slider is actually placed in w.view, which is a top view.</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s3">Slider</span><span class="s1">(w.view, </span><span class="s3">Rect</span><span class="s1"> (50,100,250,20)) </span>// So this is equivalent when Window is used as a parent</p>
<p class="p12"><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><br></p>
<p class="p5">You can easily nest containers, decorators and views to make complex layouts, and you can use colors to visually separate them:</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>(</p>
<p class="p12"><span class="Apple-tab-span">	</span>w=<span class="s3">Window</span>.new.front;</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>w.view.decorator = </span><span class="s3">FlowLayout</span><span class="s1">(w.view.bounds); </span>// notice that FlowView refers to w.view, not w</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>v=<span class="s3">CompositeView</span>(w, <span class="s3">Rect</span>(5,5,190,390));</p>
<p class="p12"><span class="Apple-tab-span">	</span>v.background = <span class="s3">Color</span>.rand; <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s7">// set the color</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>v.decorator = <span class="s3">FlowLayout</span>(v.bounds);</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>y=<span class="s3">CompositeView</span>(w, <span class="s3">Rect</span>(205,5,190,390));</p>
<p class="p12"><span class="Apple-tab-span">	</span>y.background = <span class="s3">Color</span>.rand;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s7">// set the color</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>y.decorator = <span class="s3">FlowLayout</span>(y.bounds);</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>14.do{ </span><span class="s3">Slider</span><span class="s1">(v, 180@20).background_(v.background) };</span>// Points used, since the layout is handled by a decorator.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>18.do{ <span class="s3">Slider2D</span>(y,58@58).background_(<span class="s3">Color</span>.rand); };</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>)</p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p6"><b>Container Coordinates</b></p>
<p class="p7"><br></p>
<p class="p5">Container and User views use <b>relative</b> bounds coordinates, which are measured from the parent <b>view's</b> top left corner.</p>
<p class="p4"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span>( <span class="Apple-converted-space"> </span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>w=</span><span class="s3">Window</span><span class="s1">.new.front;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Use Rect for precise placement in a CompositeView</p>
<p class="p12"><span class="Apple-tab-span">	</span>v=<span class="s3">CompositeView</span>(w, <span class="s3">Rect</span>(50,50,300,300));</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>v.background_(</span><span class="s3">Color</span><span class="s1">.grey);<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// give the subview a visible color</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s3">Slider</span><span class="s1">(v, </span><span class="s3">Rect</span><span class="s1"> (50,50,220,20)) <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// so this is equivalent when Window is used as a parent</p>
<p class="p12"><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><br></p>
<p class="p4"><br></p>
<p class="p6"><b>Window Coordinates</b></p>
<p class="p4"><br></p>
<p class="p5">For a <a href="Main-GUI/Window.html"><span class="s3">Window</span></a>, the bounds coordinates are measured from the <b>bottom</b> left of the screen.</p>
<p class="p5">The bounds.rect differs from that of views, and is the following: Rect(left, <b>bottom</b>, width,height). Typically, you will call Window.screenBounds to place a window precisely independently of the screen size you are working on.</p>
<p class="p4"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span>(</p>
<p class="p13"><span class="s1"><span class="Apple-tab-span">	</span>w=</span><span class="s3">Window</span><span class="s1">.new(</span>"A Precisely Placed Window"<span class="s1">,</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Rect</span>(100, <span class="s3">Window</span>.screenBounds.height-300, 300, 200 )</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>).front;</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>) </span>//since the window is 200 high and the bottom is at screenBounds.height-300, the top is 100 from the screen top</p>
<p class="p9"><br></p>
<p class="p6"><b>Resizing</b></p>
<p class="p4"><br></p>
<p class="p5">Views can resize or stretch according to nine differents states, according to the instance variable <b>resize</b>. For documentation and examples see <a href="GUI-Tools/resize.html"><span class="s3">resize</span></a>.</p>
<p class="p4"><br></p>
<p class="p9"><br></p>
<p class="p6"><b>Actions: Performing Things with a GUI Widget</b></p>
<p class="p7"><br></p>
<p class="p5">Gui widgets typically have an <b>action</b>, which is a <a href="../Core/Kernel/Function.html"><span class="s3">Function</span></a> or <a href="../Core/Kernel/FunctionList.html"><span class="s3">FunctionList</span></a> to be evaluated when the user interacts with the widget.</p>
<p class="p5">You can set the <b>action</b>, or use <b>addAction</b>, or <b>removeAction</b> to determine how a widget interacts with your code.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>(</p>
<p class="p13"><span class="s1"><span class="Apple-tab-span">	</span>w = </span><span class="s3">Window</span><span class="s1"> (</span>"A Slider"<span class="s1">);</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>a = <span class="s3">Slider</span> (w, <span class="s3">Rect</span>(40, 10, 300, 30));</p>
<p class="p12"><span class="Apple-tab-span">	</span>a.action={ <span class="s3">|sl|</span> sl.value.postln }; <span class="s7">// set the action of the slider</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>w.front</p>
<p class="p12"><span class="Apple-tab-span">	</span>);</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// now incrementally add some more actions to the slider</p>
<p class="p12"><span class="Apple-tab-span">	</span>a.addAction({ <span class="s3">|sl|</span> w.view.background = <span class="s3">Color</span>.green(sl.value) });</p>
<p class="p12"><span class="Apple-tab-span">	</span>a.addAction({ <span class="s3">|sl|</span> sl.background = <span class="s3">Color</span>.red(1 - sl.value) });</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// adding and removing an action:</p>
<p class="p13"><span class="s1"><span class="Apple-tab-span">	</span>f = { </span><span class="s3">|sl|</span><span class="s1"> </span>"--------*******-------"<span class="s1">.postln; };</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>a.addAction(f);</p>
<p class="p12"><span class="Apple-tab-span">	</span>a.removeAction(f);</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// or remove all, of course</p>
<p class="p12"><span class="Apple-tab-span">	</span>a.action = <span class="s3">nil</span>;</p>
<p class="p9"><br></p>
<p class="p6"><b>GUI Timing: System Clock and App Clock</b></p>
<p class="p9"><br></p>
<p class="p3"><span class="s1">See: <a href="../Scheduling/AppClock.html"><span class="s2">AppClock</span></a>, <a href="../Scheduling/TempoClock.html"><span class="s2">TempoClock</span></a>, <a href="../Scheduling/SystemClock.html"><span class="s2">SystemClock</span></a></span></p>
<p class="p4"><br></p>
<p class="p5">Calls to the gui system from from the lang must be made from the AppClock, since the <a href="../Scheduling/SystemClock.html"><span class="s3">SystemClock</span></a> is reserved for high priority sound related tasks. If you want to control a gui with a Routine or Task, then you must either use the <a href="../Scheduling/AppClock.html"><span class="s3">AppClock</span></a> to play them, or use the <b>defer</b> mechanism, which schedules a Function in the <a href="../Scheduling/AppClock.html"><span class="s3">AppClock</span></a>:</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>(</p>
<p class="p12"><span class="Apple-tab-span">	</span>w=<span class="s3">Window</span>.new.front;</p>
<p class="p14"><span class="s1"><span class="Apple-tab-span">	</span></span>Routine<span class="s1">{</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>20.do{</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.bounds=<span class="s3">Rect</span>(200.rand, 200+200.rand, 300,300);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.1.wait;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.close;</p>
<p class="p12"><span class="Apple-tab-span">	</span>}.play(<span class="s3">AppClock</span>)</p>
<p class="p12"><span class="Apple-tab-span">	</span>)</p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p5">The same thing using the <b>defer</b> mechanism and a <a href="../Scheduling/SystemClock.html"><span class="s3">SystemClock</span></a>:</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>(</p>
<p class="p12"><span class="Apple-tab-span">	</span>w=<span class="s3">Window</span>.new.front;</p>
<p class="p14"><span class="s1"><span class="Apple-tab-span">	</span></span>Routine<span class="s1">{</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>20.do{</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{w.bounds=<span class="s3">Rect</span>(200.rand, 200+200.rand, 300,300) }.defer; <span class="s7">// you must defer this</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.1.wait;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{w.close}.defer; </span>// you must defer this</p>
<p class="p14"><span class="s1"><span class="Apple-tab-span">	</span>}.play(</span>SystemClock<span class="s1">)</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>)</p>
<p class="p15"><br></p>
<p class="p5">In reality, <b>defer</b> simply schedules a <a href="../Core/Kernel/Routine.html"><span class="s3">Routine</span></a> in an <a href="../Scheduling/AppClock.html"><span class="s3">AppClock</span></a>.</p>
<p class="p7"><br></p>
<p class="p6"><b>Asynchronous GUI Techniques: Communicating with the Sound Server</b></p>
<p class="p7"><br></p>
<p class="p5">Sending values from a gui object to the sound server is basically the same as sending from the lang. Gui widgets typically have an <b>action</b>, which is a <a href="../Core/Kernel/Function.html"><span class="s3">Function</span></a> or <a href="../Core/Kernel/FunctionList.html"><span class="s3">FunctionList</span></a> to be evaluated when the user interacts with the widget.</p>
<p class="p4"><br></p>
<p class="p8">// use arrow keys to change frequency</p>
<p class="p16"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span>(<span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>s.waitForBoot({</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>n={<span class="s3">arg</span> freq=220;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">var</span> out;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>out=<span class="s3">SinOsc</span>.ar(freq,0,0.2);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>8.do{out = <span class="s3">AllpassN</span>.ar(out, 0.2,0.02+0.20.rand,8)};</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>out;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}.play;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w = </span><span class="s3">Window</span><span class="s1">(</span>"Use arrow keys to change the frequency by steps"<span class="s1">, </span><span class="s3">Rect</span><span class="s1">(100, 500, 500, 120));</span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="Apple-tab-span">	</span><span class="s3">NumberBox</span>(w, <span class="s3">Rect</span>(200, 10, 100, 20));</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.value = 220;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.action = {</span><span class="s3">arg</span><span class="s1"> numb; n.set(</span><span class="s9">\freq</span><span class="s1">, numb.value); }; </span>// set the action here to change the frequency.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.addAction ( {w.view.background = <span class="s3">Color</span>.rand}); <span class="s7">// add another action here.</span></p>
<p class="p2"><br></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.step=55; </span>//make the step a fraction of the freq</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.focus;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">CmdPeriod</span>.doOnce({w.close});</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>});</p>
<p class="p12"><span class="Apple-tab-span">	</span>)</p>
<p class="p4"><br></p>
<p class="p5">Recieving values, however is asynchronous, and requires either using an OSCresponderNode, or polling values.</p>
<p class="p5">In this example a Routine polls values:</p>
<p class="p4"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span>(</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>w = <span class="s3">Window</span>(<span class="s5">"Frequency Monitor"</span>, <span class="s3">Rect</span>(200, <span class="s3">Window</span>.screenBounds.height-200,300,150)).front;</p>
<p class="p12"><span class="Apple-tab-span">	</span>w.view.background_(<span class="s3">Color</span>.grey(0.9));</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>a = <span class="s3">StaticText</span>(w, <span class="s3">Rect</span>(45, 10, 200, 20)).background_(<span class="s3">Color</span>.rand);</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="s1"><span class="Apple-tab-span">	</span>a.string = </span>"Current Frequency"<span class="s1">;</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s3">Button</span>.new(w, <span class="s3">Rect</span>(45, 70, 200, 20)).states_([[<span class="s5">"close"</span>,<span class="s3">Color</span>.black,<span class="s3">Color</span>.rand]]).action_({w.close});</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>s.waitForBoot({</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b=<span class="s3">Bus</span>.new(<span class="s9">\control</span>,0,1);</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>q=<span class="s3">SynthDef</span>(<span class="s9">\Docs_FreqMonitor</span>, {<span class="s3">var</span> freq,snd;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>freq=<span class="s3">LFNoise0</span>.ar(2, 400, 650);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>snd=<span class="s3">SinOsc</span>.ar(freq,0,0.2);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Out</span>.ar(0,snd);</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s3">Out</span><span class="s1">.kr(b.index,freq); </span>// output the frequency to a control bus</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).play;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p14"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>r= </span>Routine<span class="s1">{</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Set the value of the StaticText to the value in the control bus.</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Setting GUI values is asynchronous, so you must use .defer in the system clock.</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Also you must check if the window is still open, since Routine will continue for at least</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// one step after you close the window.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.get( {<span class="s3">arg</span> v; {w.isClosed.not.if{ a.string= <span class="s5">" Current Frequency: "</span>++v.round(0.01)}; }.defer} );</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// b.get sends query to the server, and waits for a response before it sets the StaticText.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.01.wait;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}.loop</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}.play</p>
<p class="p12"><span class="Apple-tab-span">	</span>});</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s3">CmdPeriod</span>.doOnce({w.close});</p>
<p class="p12"><span class="Apple-tab-span">	</span>w.onClose={r.stop; q.free; b.free }; <span class="s7">//clean up if the window closes</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>)</p>
<p class="p2"><br></p>
<p class="p5">Here an OSCreponder changes a gui. See <a href="../Control/OSCresponderNode.html"><span class="s3">OSCresponderNode</span></a> for more examples. It is important here that the action of the responder is defered.</p>
<p class="p4"><br></p>
<p class="p2"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span>(</p>
<p class="p12"><span class="Apple-tab-span">	</span>s.waitForBoot({</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w=<span class="s3">Window</span>.new.front;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.view.background_(<span class="s3">Color</span>.blue(0.3));</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x={<span class="Apple-tab-span">	</span><span class="s3">var</span> d,arr,out;</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>d = </span><span class="s3">Dust</span><span class="s1">.kr(2,0.2);<span class="Apple-tab-span">	</span></span>// generate triggers for SendTrig and for DynKlank</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s3">SendTrig</span><span class="s1">.kr(d, 0, 0.9); </span>// send message to lang</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>arr=<span class="s3">Array</span>.fill(4, {<span class="s3">TRand</span>.kr(50+500.rand,1200+1200.rand,d)});</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>out=<span class="s3">DynKlank</span>.ar(`[arr, <span class="s3">nil</span>, [1, 1, 1, 1]], <span class="s3">K2A</span>.ar(d)*0.1);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Limiter</span>.ar(out,0.5)</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}.play;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// register to receive this message</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a = <span class="s3">OSCresponderNode</span>(s.addr, <span class="s9">'/tr'</span>,</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{ {w.refresh}.defer }).add; <span class="s7">// you must use defer here</span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.drawHook = {<span class="s3">|me|</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.use{</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>90.do{</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.strokeColor=<span class="s3">Color</span>.rand.alpha_(rrand(0.1,0.9));</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.addArc(400.rand@400.rand, rrand(10, 100), 2pi.rand, pi);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.stroke;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s3">CmdPeriod</span><span class="s1">.doOnce({w.close}); </span>//close window when sound is stopped</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.onClose=({a.remove; x.free;});<span class="s7">// clean up</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p12"><span class="s10"><span class="Apple-tab-span">	</span></span>)</p>
<p class="p7"><br></p>
<p class="p6"><b>Custom GUI: designing your own widgets using UserView</b></p>
<p class="p7"><br></p>
<p class="p5">UserView is generally speaking a view in which you can draw, and for which you can define mouse, key, and drag and drop actions. For documentation on all of these, see the <a href="Main-GUI/UserView.html"><span class="s3">UserView</span></a>, <a href="Main-GUI/View.html"><span class="s3">View</span></a>, and <a href="Main-GUI/Pen.html"><span class="s3">Pen</span></a> help files. The example below, however, will demonstrate a basic example of these techniques for designing a widget. The steps you need to take are the following:</p>
<p class="p5">(<b>1) Create a User View (2) define a draw function (3) define an action (4) define mouse actions (5) define key actions (6) define drag and drop actions</b>. You can omit steps which you don't want.</p>
<p class="p4"><br></p>
<p class="p5">Caution, subclassing differs in many points from the example below. For a subclassing template and a quick tutorial on how to write a custom widget as a SCUserView subclass, see <a href="Cocoa-GUI/SCUserViewSubclassing/SCUserView-Subclassing.html"><span class="s3">SCUserView-Subclassing</span></a>.<span class="Apple-tab-span">	</span></p>
<p class="p4"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span>(</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s3">var</span> value = 0.5;</p>
<p class="p12"><span class="Apple-tab-span">	</span>w = <span class="s3">Window</span>.new.front;</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// (1) create a user view</p>
<p class="p12"><span class="Apple-tab-span">	</span>v = <span class="s3">UserView</span>(w,<span class="s3">Rect</span>(50,50,200,20));</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// (2) define a drawing function for Pen</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>v.drawFunc = {</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Draw the fill</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.fillColor = <span class="s3">Color</span>.grey;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.addRect(<span class="s3">Rect</span>(0,0, v.bounds.width*value,v.bounds.height));</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.fill;</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Draw the triangle</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.fillColor = <span class="s3">Color</span>.red;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.moveTo(((v.bounds.width*value)-5) @ v.bounds.height);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.lineTo(((v.bounds.width*value)+5) @ v.bounds.height);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.lineTo(((v.bounds.width*value)) @ (v.bounds.height/2));</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.lineTo(((v.bounds.width*value)-5) @ v.bounds.height);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.fill;</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Draw the frame</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.strokeColor = <span class="s3">Color</span>.black;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.addRect(<span class="s3">Rect</span>(0,0, v.bounds.width,v.bounds.height));</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pen</span>.stroke;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// (3) set an action to the user view<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>v.action = {value.postln; v.refresh};</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// (4) define mouse actions</p>
<p class="p12"><span class="Apple-tab-span">	</span>v.mouseDownAction = {<span class="s3">arg</span> view, x = 0.5,y, m;</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//m.postln;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>([256, 0].includes(m)).if{ <span class="s7">// restrict to no modifier</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>value = (x).linlin(0,v.bounds.width,0,1); v.doAction};</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>v.mouseMoveAction = v.mouseDownAction;</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// (5) (optional) define key actions</p>
<p class="p12"><span class="Apple-tab-span">	</span>v.keyDownAction = { <span class="s3">arg</span> view, char, modifiers, unicode,keycode;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if (unicode == 16rF700, { value = (value+0.1).clip(0,1) });</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if (unicode == 16rF703, { value = (value+0.1).clip(0,1) });</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if (unicode == 16rF701, { value = (value-0.1).clip(0,1) });</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if (unicode == 16rF702, { value = (value-0.1).clip(0,1) });</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.doAction;</p>
<p class="p12"><span class="Apple-tab-span">	</span>};</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// (6) (optional) define drag and drop</p>
<p class="p12"><span class="Apple-tab-span">	</span>v.beginDragAction = {value}; <span class="s7">// what to drag</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>v.canReceiveDragHandler = {<span class="s3">View</span>.currentDrag.isNumber}; <span class="s7">// what to receive</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>v.receiveDragHandler = {value = <span class="s3">View</span>.currentDrag; v.doAction }; <span class="s7">// what to do on receiving</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// just for testing drag and drop</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s3">Slider</span>(w,<span class="s3">Rect</span>(50,100,200,20));</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s3">StaticText</span><span class="s1">(w,</span><span class="s3">Rect</span><span class="s1">(50,150,350,50)).string_(</span>"To Test Drag and Drop,\nHold down Cmd (Ctl) Key"<span class="s1">);</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>)</p>
<p class="p2"><br></p>
<p class="p6"><b>Automatic GUI</b></p>
<p class="p7"><br></p>
<p class="p5">You can get a quick simple automatic interface for a <a href="../ServerArchitecture/Synth.html"><span class="s3">Synth</span></a> with <a href="../ServerArchitecture/SynthDesc.html"><span class="s3">SynthDesc</span></a> : makeWindow.</p>
<p class="p4"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span>(</p>
<p class="p12"><span class="Apple-tab-span">	</span>s.waitForBoot({</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">SynthDef</span>(<span class="s5">"test"</span>, { <span class="s3">arg</span> out, freq=330, amp=0.6;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Out</span>.ar(out, <span class="s3">SinOsc</span>.ar(freq,0,amp))</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).add;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">SynthDescLib</span>.global.at(<span class="s9">\test</span>).makeWindow;</p>
<p class="p12"><span class="Apple-tab-span">	</span>});</p>
<p class="p12"><span class="Apple-tab-span">	</span>)</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p6"><b>Helper Methods in GUI</b></p>
<p class="p7"><br></p>
<p class="p5"><b>*stringBounds( string, font )</b></p>
<p class="p4"><br></p>
<p class="p5">Returns a Rect object describing the bounds occupied by the given string if it was painted using the given font. Note that this method is asynchronous in SwingOSC, hence it is advised to use it inside a Routine.(not necessary on CocoaGUI). Example:</p>
<p class="p4"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span>(</p>
<p class="p12"><span class="Apple-tab-span">	</span>{</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">var</span> text = <span class="s5">"Test"</span>, bounds, font, fonts, rect = <span class="s3">Rect</span>.new, total = <span class="s3">Rect</span>.new;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>fonts = <span class="s3">Font</span>.availableFonts;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w = <span class="s3">Window</span>.new( <span class="s5">"String Bounds"</span>, resizable: <span class="s3">false</span> );</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.view.background = <span class="s3">Color</span>.blue;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>10.do({</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>font<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>= <span class="s3">Font</span>( fonts.choose, exprand( 6, 36 ));</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>bounds<span class="Apple-tab-span">	</span>= <span class="s3">GUI</span>.stringBounds( text, font );</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>rect.set( rect.right, rect.bottom, bounds.width + 4, bounds.height + 2 );</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">StaticText</span>.new( w, rect )</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.font_( font ).align_( <span class="s9">\center</span> ).string_( text ).background_( <span class="s3">Color</span>.white );</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>total<span class="Apple-tab-span">	</span>= total.union( rect );</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.bounds = total.moveTo( 200, 200 );</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p12"><span class="Apple-tab-span">	</span>}.fork( <span class="s3">AppClock</span> );</p>
<p class="p12"><span class="Apple-tab-span">	</span>)</p>
<p class="p4"><br></p>
<p class="p6"><b>Browsers and Inspectors</b></p>
<p class="p4"><br></p>
<p class="p5">These classes use the current GUI kit implementation as returned by <span class="s11">GUI</span><span class="s12">.current</span> . You usually do not instantiate them directly, but use one of the "Plus-GUI" methods described in the next paragraph.</p>
<p class="p4"><br></p>
<p class="p5">ObjectInspector</p>
<p class="p5">StringInspector</p>
<p class="p5">ClassInspector</p>
<p class="p5">FunctionDefInspector</p>
<p class="p5">MethodInspector</p>
<p class="p5">SlotInspector</p>
<p class="p5">FrameInspector</p>
<p class="p4"><br></p>
<p class="p5">ClassBrowser</p>
<p class="p4"><br></p>
<p class="p7"><br></p>
<p class="p5">"Plus-GUI" methods are methods added to other classes such as <a href="../Collections/String.html"><span class="s3">String</span></a> or <a href="../ServerArchitecture/Server.html"><span class="s3">Server</span></a> that provide GUI functionality for those classes. These methods use the current GUI kit implementation as returned by <span class="s11">GUI</span><span class="s12">.current</span> .</p>
<p class="p4"><br></p>
<p class="p17">.inspect</p>
<p class="p5"><span class="Apple-tab-span">	</span>Examples for Inspectors:</p>
<p class="p17"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Server</span>.default.inspect;</p>
<p class="p17"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Server</span>.inspect;</p>
<p class="p4"><br></p>
<p class="p18">.browse</p>
<p class="p5"><span class="Apple-tab-span">	</span>Examples for Browsers:</p>
<p class="p11"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s3">UGen</span><span class="s1">.browse;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// ClassBrowser</p>
<p class="p17"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">SynthDescLib</span>( <span class="s7">\myLib</span> ).read.browse;</p>
<p class="p4"><br></p>
<p class="p18">.makeWindow</p>
<p class="p5"><span class="Apple-tab-span">	</span>Examples for Server:</p>
<p class="p17"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( s.window.notNil, {s.window.close});</p>
<p class="p17"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.makeWindow;</p>
<p class="p17"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.scope;</p>
<p class="p4"><br></p>
<p class="p18">.plot</p>
<p class="p5"><span class="Apple-tab-span">	</span>Examples for Plotting:</p>
<p class="p3"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>see <a href="../Collections/ArrayedCollection.html"><span class="s2">ArrayedCollection</span></a>, <a href="../ServerArchitecture/Buffer.html"><span class="s2">Buffer</span></a>, <a href="../Control/Env.html"><span class="s2">Env</span></a>, <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a>, <a href="../Collections/Signal.html"><span class="s2">Signal</span></a>, <a href="../Files/SoundFile.html"><span class="s2">SoundFile</span></a>, <a href="../Collections/Wavetable.html"><span class="s2">Wavetable</span></a></span></p>
<p class="p4"><br></p>
<p class="p18">.scope</p>
<p class="p5"><span class="Apple-tab-span">	</span>Examples for Scoping</p>
<p class="p3"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>see <a href="../ServerArchitecture/Bus.html"><span class="s2">Bus</span></a>, <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a>, <a href="../ServerArchitecture/Server.html"><span class="s2">Server</span></a>, <a href="../UGens/UGen.html"><span class="s2">UGen</span></a></span><span class="s3">, <a href="Main-GUI/ScopeView.html"><span class="s4">ScopeView</span></a>, <a href="Main-GUI/Stethoscope.html"><span class="s4">Stethoscope</span></a></span></p>
<p class="p4"><br></p>
<p class="p7"><br></p>
</body>
</html>
