<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1038.32">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica}
p.p6 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 56.0px; text-indent: -56.0px; font: 12.0px Helvetica}
p.p11 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica}
p.p12 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p13 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #941f1a}
p.p14 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco}
p.p15 {margin: 0.0px 0.0px 0.0px 56.0px; text-indent: -56.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #941f1a}
p.p17 {margin: 0.0px 0.0px 0.0px 56.0px; text-indent: -56.0px; font: 9.0px Monaco}
p.p18 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p19 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 9.0px Monaco; color: #941f1a}
p.p20 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 9.0px Monaco}
p.p21 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 9.0px Monaco; color: #606060}
p.p22 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 9.0px Monaco; color: #426d24}
p.p23 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
span.s1 {font: 18.0px Helvetica}
span.s2 {color: #0b24ae}
span.s3 {color: #001ff0}
span.s4 {font: 12.0px Helvetica}
span.s5 {color: #000000}
span.s6 {color: #941f1a}
span.s7 {font: 9.0px Monaco}
span.s8 {color: #426d24}
span.s9 {color: #606060}
span.s10 {font: 12.0px Helvetica; color: #000000}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>Buffer<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>client-side representation of a buffer on a server</b></p>
<p class="p2"><br></p>
<p class="p1"><b>superclass: Object</b></p>
<p class="p2"><br></p>
<p class="p1">A buffer is most often used to hold sampled audio, such as a soundfile loaded into memory, but can be used to hold other types of data as well. It is a globally available array of floating-point numbers on the server. The Buffer class encapsulates a number of common tasks, OSC messages, and capabilities related to server-side buffers – see the examples lower down this document for many examples of using Buffers for sound playback and recording.</p>
<p class="p2"><br></p>
<p class="p1">Buffers are commonly used with <a href="../UGens/Playback and Recording/PlayBuf.html"><span class="s2">PlayBuf</span></a>, <a href="../UGens/Playback and Recording/RecordBuf.html"><span class="s2">RecordBuf</span></a>, <a href="../UGens/Playback and Recording/DiskIn.html"><span class="s2">DiskIn</span></a>, <a href="../UGens/Playback and Recording/DiskOut.html"><span class="s2">DiskOut</span></a>, <a href="../UGens/Oscillators/BufWr.html"><span class="s2">BufWr</span></a>, <a href="../UGens/Oscillators/BufRd.html"><span class="s2">BufRd</span></a>, and other <a href="../UGens/UGen.html"><span class="s2">UGens</span></a>. (See their individual help files for more examples.) Buffers can be freed or altered even while being accessed. See <a href="Server-Architecture.html"><span class="s2">Server-Architecture</span></a> for some technical details.</p>
<p class="p2"><br></p>
<p class="p1">Buffer objects should not be created or modified within a <a href="SynthDef.html"><span class="s3">SynthDef</span></a>. If this is needed, see <a href="../UGens/InOut/LocalBuf.html"><span class="s3">LocalBuf</span></a>.</p>
<p class="p2"><br></p>
<p class="p3"><b>Buffer Numbers and Allocation</b></p>
<p class="p2"><br></p>
<p class="p1">Although the number of buffers on a server is set at the time it is booted, memory must still be allocated within the server app before they can hold values. (At boot time all buffers have a size of 0.)<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p1">Server-side buffers are identified by number, starting from 0. When using Buffer objects, buffer numbers are automatically allocated from the Server's bufferAllocator, unless you explicitly supply one. When you call <b>.free</b> on a Buffer object it will release the buffer's memory on the server, and free the buffer number for future reallocation. See <a href="ServerOptions.html"><span class="s2">ServerOptions</span></a> for details on setting the number of available buffers.</p>
<p class="p2"><br></p>
<p class="p1">Normally you should not need to supply a buffer number. You should only do so if you are sure you know what you are doing. Similarly, in normal use you should not need to access the buffer number, since instances of Buffer can be used directly as UGen inputs or Synth args.</p>
<p class="p2"><br></p>
<p class="p3"><b>Multichannel Buffers</b></p>
<p class="p2"><br></p>
<p class="p1">Multichannel buffers interleave their data. Thus the actual number of available values when requesting or setting values by index using methods such as set, setn, get, getn, etc., is equal to numFrames * numChannels. Indices start at 0 and go up to (numFrames * numChannels) - 1. In a two channel buffer for instance, index 0 will be the first value of the first channel, index 1 will be the first value of the second channel, index 2 will be the second value of the first channel, and so on.</p>
<p class="p2"><br></p>
<p class="p1">In some cases it is simpler to use multiple single channel buffers instead of a single multichannel one.</p>
<p class="p2"><br></p>
<p class="p3"><b>Completion Messages and Action Functions</b></p>
<p class="p2"><br></p>
<p class="p1">Many buffer operations (such as reading and writing files) are asynchronous, meaning that they will take an arbitrary amount of time to complete. Asynchronous commands are passed to a background thread on the server so as not to steal CPU time from the audio synthesis thread. Since they can last an aribitrary amount of time it is convenient to be able to specify something else that can be done immediately on completion. The ability to do this is implemented in two ways in Buffer's various methods: completion messages and action functions.<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p1">A completion message is a second OSC command which is included in the message which is sent to the server. (See <a href="NodeMessaging.html"><span class="s2">NodeMessaging</span></a> for a discussion of OSC messages.) The server will execute this immediately upon completing the first command. An action function is a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will be evaluated when the client receives the appropriate reply from the server, indicating that the previous command is done. Action functions are therefore inherently more flexible than completion messages, but slightly less efficient due to the small amount of added latency involved in message traffic. Action functions are passed the Buffer object as an argument when they are evaluated.</p>
<p class="p2"><br></p>
<p class="p1">With Buffer methods that take a completion message, it is also possible to pass in a function that returns an OSC message. As in action functions this will be passed the Buffer as an argument. It is important to understand however that this function will be evaluated after the Buffer object has been created (so that its bufnum and other details are accessible), but <i>before</i> the corresponding message is sent to the server.</p>
<p class="p2"><br></p>
<p class="p3"><b>Bundling</b></p>
<p class="p2"><br></p>
<p class="p1">Many of the methods below have two versions: a regular one which sends its corresponding message to the server immediately, and one which returns the message in an <a href="../Collections/Array.html"><span class="s2">Array</span></a> so that it can be added to a bundle. It is also possible to capture the messages generated by the regular methods using Server's automated bundling capabilities. See <a href="Server.html"><span class="s2">Server</span></a> and <a href="bundledCommands.html"><span class="s2">bundledCommands</span></a> for more details.</p>
<p class="p4"><br></p>
<p class="p3"><b>Accessing Instance Variables</b></p>
<p class="p2"><br></p>
<p class="p5">The following variables have getter methods.</p>
<p class="p6"><br></p>
<p class="p5"><span class="Apple-tab-span">	</span><b>server</b> - Returns the Buffer's <a href="Server.html"><span class="s2">Server</span></a> object.</p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><b>bufnum</b> - Returns the buffer number of the corresponding server-side buffer. In normal use you should not need to access this value, since instances of Buffer can be used directly as UGen inputs or Synth args.</p>
<p class="p6"><br></p>
<p class="p5"><span class="Apple-tab-span">	</span><b>numFrames</b> - Returns the number of sample frames in the corresponding server-side buffer. Note that multichannel buffers interleave their samples, so when dealing with indices in methods like get and getn, the actual number of available values is numFrames * numChannels.</p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><b>numChannels</b> - Returns the number of channels in the corresponding server-side buffer.<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><b>sampleRate</b> - Returns the sample rate of the corresponding server-side buffer.</p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><b>path</b> - Returns a string containing the path of a soundfile that has been loaded into the corresponding server-side buffer.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.alloc(s,44100 * 8.0,2);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.bufnum.postln;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>Creation with Immediate Memory Allocation</b></p>
<p class="p8"><span class="Apple-tab-span">	</span></p>
<p class="p8"><br></p>
<p class="p5"><b><span class="Apple-tab-span">	</span>*alloc(server, numFrames, numChannels, completionMessage, bufnum)</b></p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Create and return a Buffer and immediately allocate the required memory on the server. The buffer's values will be initialised to 0.0.</p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>server<span class="Apple-converted-space"> </span></b> - The server on which to allocate the buffer. The default is the default <a href="Server.html"><span class="s2">Server</span></a>.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numFrames </b>- The number of frames to allocate. Actual memory use will correspond to numFrames * numChannels.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numChannels</b> - The number of channels for the Buffer. The default is 1.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>completionMessage </b>- A valid OSC message or a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will return one. A Function will be passed this Buffer as an argument when evaluated.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bufnum</b> - An explicitly specified buffer number. Generally this is not needed.</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Allocate 8 second stereo buffer</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.boot;</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.alloc(s, s.sampleRate * 8.0, 2);</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span>*<b>allocConsecutive(numBufs, server, numFrames, numChannels, completionMessage, bufnum)<span class="Apple-converted-space"> </span></b></p>
<p class="p15"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Allocates a range of consecutively-numbered buffers, for use with UGens like <a href="../UGens/Oscillators/VOsc.html"><span class="s2">VOsc</span></a> and <a href="../UGens/Oscillators/VOsc3.html"><span class="s2">VOsc3</span></a><b> </b>that require a contiguous block of buffers, and returns an array of corresponding Buffer objects.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numBufs</b> - The number of consecutively indexed buffers to allocate.</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>server<span class="Apple-converted-space"> </span></b> - The server on which to allocate the buffers. The default is the default <a href="Server.html"><span class="s2">Server</span></a>.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numFrames </b>- The number of frames to allocate in each buffer. Actual memory use will correspond to numFrames * numChannels.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numChannels</b> - The number of channels for each buffer. The default is 1.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>completionMessage </b>- A valid OSC message or a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will return one. A Function will be passed each Buffer and its index in the array as arguments when evaluated.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bufnum</b> - An explicitly specified buffer number for the initial buffer. Generally this is not needed.</p>
<p class="p15"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>N.B.</b> You must treat the array of Buffers as a group. Freeing them individually or resuing them can result in allocation errors. You should free all Buffers in the array at the same time by iterating over it with <b>do</b>.</p>
<p class="p8"><br></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.boot;</p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// allocate an array of Buffers and fill them with different harmonics</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.allocConsecutive(8, s, 4096, 1, { <span class="s2">|buf, i|</span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>buf.sine1Msg((1..((i+1)*6)).reciprocal) <span class="s6">// completion Messages</span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a = { <span class="s2">VOsc</span>.ar(<span class="s2">SinOsc</span>.kr(0.5, 0).range(b.first.bufnum + 0.1, b.last.bufnum - 0.1),</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[440, 441], 0, 0.2) }.play;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a.free;<span class="Apple-converted-space"> </span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// iterate over the array and free it</p>
<p class="p17"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>b.do(<span class="s2">_</span>.free);</p>
<p class="p15"><br></p>
<p class="p10"><span class="s7"><span class="Apple-tab-span">	</span></span><b>*read(server, path, startFrame, numFrames, action, bufnum)</b></p>
<p class="p6"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Allocate a buffer and immediately read a soundfile into it. This method sends a query message as a completion message so that the Buffer's instance variables will be updated automatically. <b>N.B.</b> You cannot rely on the buffer's instance variables being instantly updated, as there is a small amount of latency involved. <b>action</b> will be evaluated upon receipt of the reply to the query, so use this in cases where access to instance variables is needed.</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>server<span class="Apple-converted-space"> </span></b> - The server on which to allocate the buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>path</b> - A <b>String</b> representing the path of the soundfile to be read.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>startFrame</b> - The first frame of the soundfile to read. The default is 0, which is the beginning of the file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numFrames </b>- The number of frames to read. The default is -1, which will read the whole file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>action</b> - A <b>Function</b> to be evaluated once the file has been read and this Buffer's instance variables have been updated. The function will be passed this Buffer as an argument.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bufnum</b> - An explicitly specified buffer number. Generally this is not needed.</p>
<p class="p18"><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// read a soundfile</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.boot;</p>
<p class="p21"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = </span><span class="s2">Buffer</span><span class="s5">.read(s, </span>"sounds/a11wlk01.wav"<span class="s5">);</span></p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// now play it</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = <span class="s2">SynthDef</span>(<span class="s8">\help_Buffer</span>, { <span class="s2">arg</span> out = 0, bufnum;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">Out</span>.ar( out,</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">PlayBuf</span>.ar(1, bufnum, <span class="s2">BufRateScale</span>.kr(bufnum))</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).play(s,[<span class="s8">\bufnum</span>, b]);</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.free; b.free;</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// with an action function</p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// note that the vars are not immediately up-to-date</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.read(s, <span class="s9">"sounds/a11wlk01.wav"</span>, action: { <span class="s2">arg</span> buffer;<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(<span class="s9">"After update:"</span> + buffer.numFrames).postln;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = { <span class="s2">PlayBuf</span>.ar(1, buffer, <span class="s2">BufRateScale</span>.kr(buffer)) }.play;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(<span class="s9">"Before update:"</span> + b.numFrames).postln;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.free; b.free;</p>
<p class="p18"><br></p>
<p class="p10"><span class="s7"><span class="Apple-tab-span">	</span></span><b>*readChannel(server, path, startFrame, numFrames, channels, action, bufnum)</b></p>
<p class="p6"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>As <b>*read</b> above, but takes an Array of channel indices to read in, allowing one to read only the selected channels.</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>server<span class="Apple-converted-space"> </span></b> - The server on which to allocate the buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>path</b> - A <b>String</b> representing the path of the soundfile to be read.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>startFrame</b> - The first frame of the soundfile to read. The default is 0, which is the beginning of the file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numFrames </b>- The number of frames to read. The default is -1, which will read the whole file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>channels</b> - An <b>Array</b> of channels to be read from the soundfile. Indices start from zero. These will be read in the order provided.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>action</b> - A <b>Function</b> to be evaluated once the file has been read and this Buffer's instance variables have been updated. The function will be passed this Buffer as an argument.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bufnum</b> - An explicitly specified buffer number. Generally this is not needed.</p>
<p class="p18"><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.boot;</p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// first a standard read so we can see what's in the file</p>
<p class="p21"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = </span><span class="s2">Buffer</span><span class="s5">.read(s, </span>"sounds/SinedPink.aiff"<span class="s5">);</span></p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// "sounds/SinedPink.aiff" contains SinOsc on left, PinkNoise on right</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.plot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Now just the sine</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.readChannel(s, <span class="s9">"sounds/SinedPink.aiff"</span>, channels: [0]);</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.plot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Now just the pink noise</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.readChannel(s, <span class="s9">"sounds/SinedPink.aiff"</span>, channels: [1]);</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.plot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Now reverse channel order</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.readChannel(s, <span class="s9">"sounds/SinedPink.aiff"</span>, channels: [1, 0]);</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.plot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p18"><br></p>
<p class="p5"><span class="s7"><span class="Apple-tab-span">	</span></span><b>*readNoUpdate(server, path, startFrame, numFrames, completionMessage, bufnum)</b></p>
<p class="p6"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>As <b>*read</b> above, but without the automatic update of instance variables. Call <b>updateInfo </b>(see below) to update the vars.</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>server<span class="Apple-converted-space"> </span></b> - The server on which to allocate the buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>path</b> - A <b>String</b> representing the path of the soundfile to be read.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>startFrame</b> - The first frame of the soundfile to read. The default is 0, which is the beginning of the file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numFrames </b>- The number of frames to read. The default is -1, which will read the whole file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>completionMessage </b>- A valid OSC message or a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will return one. A Function will be passed this Buffer as an argument when evaluated.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bufnum</b> - An explicitly specified buffer number. Generally this is not needed.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// with a completion message<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.boot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">SynthDef</span>(<span class="s8">\help_Buffer</span>,{ <span class="s2">arg</span> out=0, bufnum;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">Out</span>.ar( out,</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">PlayBuf</span>.ar(1,bufnum,<span class="s2">BufRateScale</span>.kr(bufnum))</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).add;</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>y = <span class="s2">Synth</span>.basicNew(<span class="s8">\help_Buffer</span>); <span class="s6">// not sent yet</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.readNoUpdate(s,<span class="s9">"sounds/a11wlk01.wav"</span>,<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>completionMessage: { <span class="s2">arg</span> buffer;</p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// synth add its s_new msg to follow<span class="Apple-converted-space"> </span></p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// after the buffer read completes</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>y.newMsg(s,[<span class="s8">\bufnum</span>, buffer],<span class="s8">\addToTail</span>)</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// note vars not accurate</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.numFrames; <span class="s6">// nil</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.updateInfo;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.numFrames; <span class="s6">// 188893</span></p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// when done...</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>y.free;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;<span class="Apple-tab-span">	</span></p>
<p class="p18"><span class="Apple-tab-span">	</span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>*cueSoundFile(server, path, startFrame, numChannels, bufferSize, completionMessage)</b></p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Allocate a buffer and preload a soundfile for streaming in using <a href="../UGens/Playback and Recording/DiskIn.html"><span class="s2">DiskIn</span></a>.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>server<span class="Apple-converted-space"> </span></b> - The server on which to allocate the buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>path</b> - A <b>String</b> representing the path of the soundfile to be read.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>startFrame</b> - The frame of the soundfile that <a href="../UGens/Playback and Recording/DiskIn.html"><span class="s2">DiskIn</span></a> will start playing at.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numChannels</b> - The number of channels in the soundfile.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bufferSize</b> - This must be a multiple of<span class="Apple-converted-space">  </span>(2 * the server's block size). 32768 is the default and is suitable for most cases.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>completionMessage </b>- A valid OSC message or a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will return one. A Function will be passed this Buffer as an argument when evaluated.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.boot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">SynthDef</span>(<span class="s8">\help_Buffer_cue</span>,{ <span class="s2">arg</span> out=0,bufnum;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">Out</span>.ar(out,</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">DiskIn</span>.ar( 1, bufnum )</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).add;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.makeBundle(<span class="s2">nil</span>, {</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.cueSoundFile(s,<span class="s9">"sounds/a11wlk01-44_1.aiff"</span>, 0, 1);</p>
<p class="p22"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>y = </span><span class="s2">Synth</span><span class="s5">(</span>\help_Buffer_cue<span class="s5">, [</span>\bufnum<span class="s5">, b], s);</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free; y.free;</p>
<p class="p18"><br></p>
<p class="p5"><span class="s7"><span class="Apple-tab-span">	</span></span><b>*loadCollection(server, collection, numChannels, action)</b></p>
<p class="p6"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Load a large collection into a buffer on the server. Returns a Buffer object. This is accomplished through writing the collection to a <a href="../Files/SoundFile.html"><span class="s2">SoundFile</span></a> and loading it from there. For this reason this method will only work with a server on your local machine. For a remote server use <b>*sendCollection</b>, below. The file is automatically deleted after loading. This allows for larger collections than <b>setn</b>, below, and is in general the safest way to get a large collection into a buffer. The sample rate of the buffer will be the sample rate of the server on which it is created.</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>server<span class="Apple-converted-space"> </span></b> - The server on which to create the buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>collection</b> - A subclass of <a href="../Collections/Collection.html"><span class="s2">Collection</span></a> (i.e. an <a href="../Collections/Array.html"><span class="s2">Array</span></a>) containing <i>only</i> floats and integers. Multi-dimensional arrays will not work.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numChannels </b>- The number of channels that the buffer should have. Note that buffers interleave multichannel data. You are responsible for providing an interleaved collection if needed. Multi-dimensional arrays will not work.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>action</b> - A <b>Function</b> to be evaluated once the file has been read and this Buffer's instance variables have been updated. The function will be passed this Buffer as an argument.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a = <span class="s2">FloatArray</span>.fill(44100 * 5.0, {1.0.rand2}); <span class="s6">// 5 seconds of noise</span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.loadCollection(s, a);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// test it</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.get(20000,{<span class="s2">|msg|</span> (msg == a[20000]).postln});</p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// play it</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = { <span class="s2">PlayBuf</span>.ar(1, b, <span class="s2">BufRateScale</span>.kr(b), loop: 0) * 0.5 }.play;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free; x.free;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// interleave a multi-dimensional array</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>l = <span class="s2">Signal</span>.sineFill(16384, <span class="s2">Array</span>.fill(200, {0}).add(1));</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>r = <span class="s2">Array</span>.fill(16384, {1.0.rand2});</p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>m = [</span><span class="s2">Array</span><span class="s5">.newFrom(l), r]; </span>// a multi-dimensional array</p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>m = m.lace(32768); </span>// interleave the two collections<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.loadCollection(s, m, 2, {<span class="s2">|buf|</span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = { <span class="s2">PlayBuf</span>.ar(2, buf, <span class="s2">BufRateScale</span>.kr(buf), loop: 1) * 0.5 }.play;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.plot;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.free; b.free;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s7"><span class="Apple-tab-span">	</span></span><b>*sendCollection(server, collection, numChannels, wait, action)</b></p>
<p class="p6"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Stream a large collection into a buffer on the server using multiple <b>setn</b> messages. Returns a Buffer object. This allows for larger collections than <b>setn</b>, below. This is not as safe as <b>*loadCollection</b>, above, but will work with servers on remote machines. The sample rate of the buffer will be the sample rate of the server on which it is created.</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>server<span class="Apple-converted-space"> </span></b> - The server on which to create the buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>collection</b> - A subclass of <a href="../Collections/Collection.html"><span class="s2">Collection</span></a> (i.e. an <a href="../Collections/Array.html"><span class="s2">Array</span></a>) containing <i>only</i> floats and integers. Multi-dimensional arrays will not work.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numChannels </b>- The number of channels that the buffer should have. Note that buffers interleave multichannel data. You are responsible for providing an interleaved collection if needed. Multi-dimensional arrays will not work. See the example in <b>*loadCollection</b>, above, to see how to do this.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>wait</b> - An optional wait time between sending <b>setn</b> messages. In a high traffic situation it may be safer to set this to something above zero, which is the default.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>action</b> - A <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> to be evaluated once the file has been read and this Buffer's instance variables have been updated. The function will be passed this Buffer as an argument.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a = <span class="s2">Array</span>.fill(2000000,{ rrand(0.0,1.0) }); <span class="s6">// a LARGE collection</span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.sendCollection(s, a, 1, 0, {<span class="s2">arg</span> buf; <span class="s9">"finished"</span>.postln;});</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.get(1999999, {<span class="s2">|msg|</span> (msg == a[1999999]).postln});</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="s7"><span class="Apple-tab-span">	</span></span><b>*loadDialog(server, startFrame, numFrames, action, bufnum)</b></p>
<p class="p6"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>As <b>*read</b> above, but gives you a load dialog window to browse for a file. Cocoa and SwingOSC compatible.</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>server<span class="Apple-converted-space"> </span></b> - The server on which to allocate the buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>startFrame</b> - The first frame of the soundfile to read. The default is 0, which is the beginning of the file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numFrames </b>- The number of frames to read. The default is -1, which will read the whole file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>action</b> - A <b>Function</b> to be evaluated once the file has been read and this Buffer's instance variables have been updated. The function will be passed this Buffer as an argument.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bufnum</b> - An explicitly specified buffer number. Generally this is not needed.</p>
<p class="p12"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></p>
<p class="p20"><span class="s4"><b><span class="Apple-tab-span">	</span></b></span><span class="Apple-tab-span">	</span>s.boot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.loadDialog(s, action: { <span class="s2">arg</span> buffer;<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = { <span class="s2">PlayBuf</span>.ar(buffer.numChannels, buffer, <span class="s2">BufRateScale</span>.kr(buffer)) }.play;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.free; b.free;</p>
<p class="p12"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></p>
<p class="p3"><b>Creation without Immediate Memory Allocation</b></p>
<p class="p4"><br></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>*new(server, numFrames, numChannels, bufnum)</b></p>
<p class="p18"><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Create and return a new Buffer object, without immediately allocating the corresponding memory on the server. This combined with 'message' methods can be flexible with bundles.</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>server<span class="Apple-converted-space"> </span></b> - The server on which to allocate the buffer. The default is the default <a href="Server.html"><span class="s2">Server</span></a>.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numFrames </b>- The number of frames to allocate. Actual memory use will correspond to numFrames * numChannels.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numChannels</b> - The number of channels for the Buffer. The default is 1.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bufnum</b> - An explicitly specified buffer number. Generally this is not needed.</p>
<p class="p18"><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.boot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.new(s, 44100 * 8.0, 2);</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>c = <span class="s2">Buffer</span>.new(s, 44100 * 4.0, 2);</p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.query; </span>// numFrames = 0</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.sendBundle(<span class="s2">nil</span>, b.allocMsg, c.allocMsg); <span class="s6">// sent both at the same time</span></p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.query; </span>// now it's right</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>c.query;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free; c.free;</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><b>alloc(completionMessage)</b></p>
<p class="p1"><b><span class="Apple-tab-span">	</span>allocMsg(completionMessage)</b></p>
<p class="p18"><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Allocate the necessary memory on the server for a Buffer previously created with <b>*new</b>, above.</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>completionMessage </b>- A valid OSC message or a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will return one. A Function will be passed this Buffer as an argument when evaluated.</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.new(s, 44100 * 8.0, 2);</p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.query; </span>// numFrames = 0</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.alloc;</p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.query; </span>// numFrames = 352800</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p12"><br></p>
<p class="p1"><span class="Apple-tab-span">	</span><b>allocRead(argpath, startFrame, numFrames, completionMessage)</b></p>
<p class="p1"><b><span class="Apple-tab-span">	</span>allocReadMsg(argpath, startFrame, numFrames, completionMessage)</b></p>
<p class="p18"><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Read a soundfile into a buffer on the server for a Buffer previously created with <b>*new</b>, above. Note that this will not autoupdate instance variables. Call <b>updateInfo</b> in order to do this.</p>
<p class="p12"><br></p>
<p class="p11"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>argpath</b> - A <a href="../Collections/String.html"><span class="s2">String</span></a> representing the path of the soundfile to be read.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>startFrame</b> - The first frame of the soundfile to read. The default is 0, which is the beginning of the file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numFrames </b>- The number of frames to read. The default is -1, which will read the whole file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>completionMessage </b>- A valid OSC message or a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will return one. A Function will be passed this Buffer as an argument when evaluated.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.new(s);</p>
<p class="p21"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.allocRead(</span>"sounds/a11wlk01.wav"<span class="s5">);</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = { <span class="s2">PlayBuf</span>.ar(1, b, <span class="s2">BufRateScale</span>.kr(b), loop: 1) * 0.5 }.play;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.free; b.free;</p>
<p class="p12"><br></p>
<p class="p1"><span class="Apple-tab-span">	</span><b>allocReadChannel(argpath, startFrame, numFrames, channels, completionMessage)</b></p>
<p class="p1"><b><span class="Apple-tab-span">	</span>allocReadChannelMsg(argpath, startFrame, numFrames, channels, completionMessage)</b></p>
<p class="p18"><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>As <b>allocRead</b> above, but allows you to specify which channels to read.</p>
<p class="p12"><br></p>
<p class="p11"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>argpath</b> - A <a href="../Collections/String.html"><span class="s2">String</span></a> representing the path of the soundfile to be read.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>startFrame</b> - The first frame of the soundfile to read. The default is 0, which is the beginning of the file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numFrames </b>- The number of frames to read. The default is -1, which will read the whole file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>channels</b> - An <a href="../Collections/Array.html"><span class="s2">Array</span></a> of channels to be read from the soundfile. Indices start from zero. These will be read in the order provided.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>completionMessage </b>- A valid OSC message or a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will return one. A Function will be passed this Buffer as an argument when evaluated.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.new(s);</p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// read only the first channel (a Sine wave) of a stereo file</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.allocReadChannel(<span class="s9">"sounds/SinedPink.aiff"</span>, channels: [0]);</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = { <span class="s2">PlayBuf</span>.ar(1, b, <span class="s2">BufRateScale</span>.kr(b), loop: 1) * 0.5 }.play;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.free; b.free;<span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>Instance Methods</b></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>read(path, fileStartFrame, numFrames, bufStartFrame, leaveOpen, action);</b></p>
<p class="p11"><span class="Apple-tab-span">	</span><b>readMsg(path, fileStartFrame, numFrames, bufStartFrame, leaveOpen, completionMessage);</b></p>
<p class="p12"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Read a soundfile into an already allocated buffer. Note that if the number of frames in the file is greater than the number of frames in the buffer, it will be truncated. Note that <b>readMsg</b> will not auto-update instance variables. Call <b>updateInfo </b>in order to do this.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>path</b> - A <a href="../Collections/String.html"><span class="s2">String</span></a> representing the path of the soundfile to be read.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>fileStartFrame</b> - The first frame of the soundfile to read. The default is 0, which is the beginning of the file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numFrames </b>- The number of frames to read. The default is -1, which will read the whole file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bufStartFrame</b> - The index of the frame in the buffer at which to start reading. The default is 0, which is the beginning of the buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>leaveOpen</b> - A boolean indicating whether or not the Buffer should be left 'open'. For use with <a href="../UGens/Playback and Recording/DiskIn.html"><span class="s2">DiskIn</span></a> you will want this to be true, as the buffer will be used for streaming the soundfile in from disk. (For this the buffer must have been allocated with a multiple of (2 * synth block size).<span class="Apple-converted-space">  </span>A common number is 32768 frames. <b>cueSoundFile</b> below, provides a simpler way of doing this.) The default is false which is the correct value for all other cases.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>action</b> - A <b>Function</b> to be evaluated once the file has been read and this Buffer's instance variables have been updated. The function will be passed this Buffer as an argument.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>completionMessage </b>- A valid OSC message or a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will return one. A Function will be passed this Buffer as an argument when evaluated.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>readChannel(path, fileStartFrame, numFrames, bufStartFrame, leaveOpen, channels, action);</b></p>
<p class="p11"><span class="Apple-tab-span">	</span><b>readChannelMsg(path, fileStartFrame, numFrames, bufStartFrame, leaveOpen, channels, completionMessage);</b></p>
<p class="p12"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>As <b>read</b> above, but allows you to specify which channels to read.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>path</b> - A <a href="../Collections/String.html"><span class="s2">String</span></a> representing the path of the soundfile to be read.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>fileStartFrame</b> - The first frame of the soundfile to read. The default is 0, which is the beginning of the file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numFrames </b>- The number of frames to read. The default is -1, which will read the whole file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bufStartFrame</b> - The index of the frame in the buffer at which to start reading. The default is 0, which is the beginning of the buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>leaveOpen</b> - A boolean indicating whether or not the Buffer should be left 'open'. For use with <a href="../UGens/Playback and Recording/DiskIn.html"><span class="s2">DiskIn</span></a> you will want this to be true, as the buffer will be used for streaming the soundfile in from disk. (For this the buffer must have been allocated with a multiple of (2 * synth block size).<span class="Apple-converted-space">  </span>A common number is 32768 frames. <b>cueSoundFile</b> below, provides a simpler way of doing this.) The default is false which is the correct value for all other cases.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>channels</b> - An <a href="../Collections/Array.html"><span class="s2">Array</span></a> of channels to be read from the soundfile. Indices start from zero. These will be read in the order provided. The number of channels requested must match this Buffer's <b>numChannels</b>.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>action</b> - A <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> to be evaluated once the file has been read and this Buffer's instance variables have been updated. The function will be passed this Buffer as an argument.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>completionMessage </b>- A valid OSC message or a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will return one. A Function will be passed this Buffer as an argument when evaluated.</p>
<p class="p12"><span class="Apple-tab-span">	</span><b><span class="Apple-tab-span">	</span></b></p>
<p class="p12"><br></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>cueSoundFile(path, startFrame, completionMessage)</b></p>
<p class="p11"><span class="Apple-tab-span">	</span><b>cueSoundFileMsg(path, startFrame, completionMessage)</b></p>
<p class="p12"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>A convenience method to cue a soundfile into the buffer for use with a <a href="../UGens/Playback and Recording/DiskIn.html"><span class="s2">DiskIn</span></a>. The buffer must have been allocated with a multiple of (2 * the server's block size) frames.<span class="Apple-converted-space">  </span>A common size is 32768 frames.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>path</b> - A <a href="../Collections/String.html"><span class="s2">String</span></a> representing the path of the soundfile to be read.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>startFrame</b> - The first frame of the soundfile to read. The default is 0, which is the beginning of the file.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>completionMessage </b>- A valid OSC message or a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will return one. A Function will be passed this Buffer as an argument when evaluated.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p19"><span class="s10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//create with cueSoundFile class method</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.cueSoundFile(s, <span class="s9">"sounds/a11wlk01-44_1.aiff"</span>, 0, 1);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = { <span class="s2">DiskIn</span>.ar(1, b) }.play;<span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.close;<span class="Apple-tab-span">	</span></span>// must call close in between cueing</p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// now use like named instance method, but different arguments</p>
<p class="p23"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.cueSoundFile(</span>"sounds/a11wlk01-44_1.aiff"<span class="s5">);<span class="Apple-tab-span">	</span></span></p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// have to do all this to clean up properly!<span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.free; b.close; b.free;<span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>write(path, headerFormat, sampleFormat, numFrames, startFrame, leaveOpen, completionMessage)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>writeMsg(path, headerFormat, sampleFormat, numFrames, startFrame, leaveOpen, completionMessage)</b></p>
<p class="p12"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Write the contents of the buffer to a file. See <a href="../Files/SoundFile.html"><span class="s2">SoundFile</span></a> for information on valid values for <b>headerFormat</b> and <b>sampleFormat</b>.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>path</b> - A <b>String</b> representing the path of the soundfile to be written.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>If no path is given, Buffer writes into the default recording directory with a generic name.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numFrames </b>- The number of frames to write. The default is -1, which will write the whole buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>startFrame</b> - The index of the frame in the buffer from which to start writing. The default is 0, which is the beginning of the buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>leaveOpen</b> - A boolean indicating whether or not the Buffer should be left 'open'. For use with <a href="../UGens/Playback and Recording/DiskOut.html"><span class="s2">DiskOut</span></a> you will want this to be true. The default is false which is the correct value for all other cases.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>completionMessage </b>- A valid OSC message or a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will return one. A Function will be passed this Buffer as an argument when evaluated.</p>
<p class="p12"><br></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>free(completionMessage)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>freeMsg(completionMessage)</b></p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Release the buffer's memory on the server and return the bufferID back to the server's buffer number allocator for future reuse.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>completionMessage </b>- A valid OSC message or a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will return one. A Function will be passed this Buffer as an argument when evaluated.</p>
<p class="p12"><br></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>zero(completionMessage)</b></p>
<p class="p11"><span class="Apple-tab-span">	</span><b>zeroMsg(completionMessage)</b></p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Sets all values in this buffer to 0.0.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>completionMessage </b>- A valid OSC message or a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will return one. A Function will be passed this Buffer as an argument when evaluated.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>set(index,float ... morePairs)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>setMsg(index,float ... morePairs)</b></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Set the value in the buffer at <b>index</b> to be equal to <b>float</b>. Additional pairs of indices and floats may be included in the same message. Note that multichannel buffers interleave their sample data, therefore the actual number of available values is equal to numFrames * numChannels. Indices start at 0.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.boot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.alloc(s, 4, 2);</p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.set(0, 0.2, 1, 0.3, 7, 0.4); </span>// set the values at indices 0, 1, and 7.</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.getn(0, 8, {<span class="s2">|msg|</span> msg.postln});</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;<span class="Apple-tab-span">	</span></p>
<p class="p12"><br></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>setn(startAt,values ... morePairs)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>setnMsg(startAt,values ... morePairs)</b></p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Set a contiguous range of values in the buffer starting at the index <b>startAt</b> to be equal to the <a href="../Collections/Array.html"><span class="s2">Array</span></a> of floats or integers, <b>values</b>. The number of values set corresponds to the size of <b>values</b>. Additional pairs of starting indices and arrays of values may be included in the same message. Note that multichannel buffers interleave their sample data, therefore the actual number of available values is equal to numFrames * numChannels. You are responsible for interleaving the data in <b>values</b> if needed. Multi-dimensional arrays will not work. Indices start at 0.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>N.B.</b> The maximum number of values that you can set with a single setn message is 1633 when the server is using UDP as its communication protocol. Use <b>loadCollection</b> and <b>sendCollection</b> to set larger ranges of values.</p>
<p class="p18"><br></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.boot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.alloc(s,16);</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.setn(0, <span class="s2">Array</span>.fill(16, { rrand(0,1) }));</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.getn(0, b.numFrames, {<span class="s2">|msg|</span> msg.postln});</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.setn(0, [1, 2, 3], 4, [1, 2, 3]);</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.getn(0, b.numFrames, {<span class="s2">|msg|</span> msg.postln});</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p9"><br></p>
<p class="p5"><span class="s7"><span class="Apple-tab-span">	</span></span><b>loadCollection(collection, startFrame, action)</b></p>
<p class="p6"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Load a large collection into this buffer. This is accomplished through writing the collection to a <a href="../Files/SoundFile.html"><span class="s2">SoundFile</span></a> and loading it from there. For this reason this method will only work with a server on your local machine. For a remote server use <b>sendCollection</b>, below. The file is automatically deleted after loading. This allows for larger collections than <b>setn</b>, above, and is in general the safest way to get a large collection into a buffer. The sample rate of the buffer will be the sample rate of the server on which it was created. The number of channels and frames will have been determined when the buffer was allocated. You are responsible for making sure that the size of <b>collection</b> is not greater than <b>numFrames</b>, and for interleaving any data if needed.<span class="Apple-converted-space"> </span></p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>collection</b> - A subclass of <a href="../Collections/Collection.html"><span class="s2">Collection</span></a> (i.e. an <a href="../Collections/Array.html"><span class="s2">Array</span></a>) containing <i>only</i> floats and integers. Multi-dimensional arrays will not work.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>startFrame </b>- The index of the frame at which to start loading the collection. The default is 0, which is the start of the buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>action</b> - A <b>Function</b> to be evaluated once the file has been read and this Buffer's instance variables have been updated. The function will be passed this Buffer as an argument.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v = <span class="s2">Signal</span>.sineFill(128, 1.0/[1,2,3,4,5,6]);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.alloc(s, 128);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.loadCollection(v, action: {<span class="s2">|buf|</span><span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = { <span class="s2">PlayBuf</span>.ar(buf.numChannels, buf, <span class="s2">BufRateScale</span>.kr(buf), loop: 1)<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>* 0.2 }.play;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.free; b.free;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// interleave a multi-dimensional array</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>l = <span class="s2">Signal</span>.sineFill(16384, <span class="s2">Array</span>.fill(200, {0}).add(1));</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>r = <span class="s2">Array</span>.fill(16384, {1.0.rand2});</p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>m = [</span><span class="s2">Array</span><span class="s5">.newFrom(l), r]; </span>// a multi-dimensional array</p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>m = m.lace(32768); </span>// interleave the two collections<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.alloc(s, 16384, 2);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.loadCollection(m, 0, {<span class="s2">|buf|</span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = { <span class="s2">PlayBuf</span>.ar(2, buf, <span class="s2">BufRateScale</span>.kr(buf), loop: 1) * 0.5 }.play;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.plot;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.free; b.free;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s7"><span class="Apple-tab-span">	</span></span><b>sendCollection(collection, startFrame, wait, action)</b></p>
<p class="p6"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Stream a large collection into this buffer using multiple <b>setn</b> messages. This allows for larger collections than <b>setn</b>. This is not as safe as <b>loadCollection</b>, above, but will work with servers on remote machines. The sample rate of the buffer will be the sample rate of the server on which it is created.</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>collection</b> - A subclass of <a href="../Collections/Collection.html"><span class="s2">Collection</span></a> (i.e. an <a href="../Collections/Array.html"><span class="s2">Array</span></a>) containing <i>only</i> floats and integers. Multi-dimensional arrays will not work.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>startFrame </b>- The index of the frame at which to start streaming in the collection. The default is 0, which is the start of the buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>wait</b> - An optional wait time between sending <b>setn</b> messages. In a high traffic situation it may be safer to set this to something above zero, which is the default.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>action</b> - A <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> to be evaluated once the file has been read and this Buffer's instance variables have been updated. The function will be passed this Buffer as an argument.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.boot;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a = <span class="s2">Array</span>.fill(2000000,{ rrand(0.0,1.0) });</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.alloc(s, 2000000);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = b.sendCollection(a, action: {<span class="s2">arg</span> buf; <span class="s9">"finished"</span>.postln;});</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.get(1999999, {<span class="s2">|msg|</span> (msg == a[1999999]).postln});</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>get(index, action)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>getMsg(index)</b></p>
<p class="p12"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Send a message requesting the value in the buffer at <b>index</b>. <b>action</b> is a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will be passed the value as an argument and evaluated when a reply is received.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p17"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.alloc(s,16);</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.setn(0, <span class="s2">Array</span>.fill(16, { rrand(0.0, 1.0) }));</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.get(0, {<span class="s2">|msg|</span> msg.postln});</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p12"><br></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>getn(index, count, action)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>getMsg(index, count)</b></p>
<p class="p12"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Send a message requesting the a contiguous range of values of size <b>count</b> starting from <b>index</b>. <b>action</b> is a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will be passed the values in an <b>Array</b> as an argument and evaluated when a reply is received. See <b>setn</b> above for an example.<span class="Apple-converted-space"> </span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>N.B.</b> The maximum number of values that you can get with a single getn message is 1633 when the server is using UDP as its communication protocol. Use <b>loadToFloatArray</b> and <b>getToFloatArray</b> to get larger ranges of values.</p>
<p class="p15"><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><b>loadToFloatArray(index, count, action)</b></p>
<p class="p12"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Write the buffer to a file and then load it into a <a href="../Collections/FloatArray.html"><span class="s2">FloatArray</span></a>. This is safer than <b>getToFloatArray</b> but only works with a server on your local machine. In general this is the safest way to get a large range of values from a server buffer into the client app.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>index</b> - The index in the buffer to begin writing from. The default is 0.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>count</b> - The number of values to write. The default is -1, which writes from index until the end of the<span class="Apple-converted-space">  </span>buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>action</b> - A <b>Function</b> which will be passed the resulting <a href="../Collections/FloatArray.html"><span class="s2">FloatArray</span></a> as an argument and evaluated when loading is finished.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p23"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = </span><span class="s2">Buffer</span><span class="s5">.read(s,</span>"sounds/a11wlk01.wav"<span class="s5">);</span></p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// same as Buffer.plot</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.loadToFloatArray(action: { <span class="s2">arg</span> array; a = array; {a.plot;}.defer; <span class="s9">"done"</span>.postln;});</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p15"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><b>getToFloatArray(index, count, wait, timeout, action)</b></p>
<p class="p12"><br></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Stream the buffer to the client using a series of <b>getn</b> messages and put the results into a <a href="../Collections/FloatArray.html"><span class="s2">FloatArray</span></a>. This is more risky than <b>loadToFloatArray</b> but does works with servers on remote machines. In high traffic situations it is possible for data to be lost. If this method has not received all its replies by <b>timeout</b> it will post a warning saying that the method has failed. In general use <b>loadToFloatArray</b> instead wherever possible.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>index</b> - The index in the buffer to begin writing from. The default is 0.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>count</b> - The number of values to write. The default is -1, which writes from index until the end of the<span class="Apple-converted-space">  </span>buffer.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>wait</b> - The amount of time in seconds to wait between sending getn messages. Longer times are safer. The default is 0.01 seconds which seems reliable under normal circumstances. A setting of 0 is <i>not</i><b> </b>recommended.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>timeout</b> - The amount of time in seconds after which to post a warning if all replies have not yet been received. the default is 3.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>action</b> - A <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will be passed the resulting <a href="../Collections/FloatArray.html"><span class="s2">FloatArray</span></a> as an argument and evaluated when all replies have been received.</p>
<p class="p12"><br></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p23"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = </span><span class="s2">Buffer</span><span class="s5">.read(s,</span>"sounds/a11wlk01.wav"<span class="s5">);</span></p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// like Buffer.plot</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.getToFloatArray(wait:0.01,action:{<span class="s2">arg</span> array; a = array; {a.plot;}.defer;<span class="s9">"done"</span>.postln;});</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p2"><span class="s7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span><b><span class="Apple-tab-span">	</span></b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>normalize(newmax, asWavetable)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>normalizeMsg(newmax, asWavetable)</b></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Normalizes the buffer so that the peak absolute value is <b>newmax</b> (which defaults to 1). If your buffer is in <a href="../Collections/Wavetable.html"><span class="s2">Wavetable</span></a> format then set the <b>asWavetable</b> argument to true.</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>fill(startAt, numFrames, value ... more)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>fillMsg(startAt, numFrames, value ... more)</b></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Starting at the index <b>startAt</b>, set the next <b>numFrames</b> to value. Additional ranges may be included in the same message.</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>copyData(buf, dstStartAt, srcStartAt, numSamples)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>copyMsg(buf, dstStartAt, srcStartAt, numSamples)</b></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Starting at the index <b>srcSamplePos</b>, copy <b>numSamples</b> samples from this to the destination buffer <b>buf</b> starting at <b>dstSamplePos</b>. If numSamples is negative, the maximum number of samples possible is copied. The default is start from 0 in the source and copy the maximum number possible starting at 0 in the destination.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>Note:</b> This method used to be called <b>copy</b>, but this conflicts with the method for object-copying. Therefore Buffer:copy is now intended to create a copy of the client-side Buffer object. Its use for copying buffer data on the server is deprecated. If you see a deprecation warning, the data will still be copied on the server and your code will still work, but you should update your code for the new method name.</p>
<p class="p12"><br></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">SynthDef</span>(<span class="s8">\help_Buffer_copy</span>, { <span class="s2">arg</span> out=0, buf;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">Line</span>.ar(0, 0, dur: <span class="s2">BufDur</span>.kr(buf), doneAction: 2); <span class="s6">// frees itself</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">Out</span>.ar(out, <span class="s2">PlayBuf</span>.ar(1, buf));</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).add;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p21"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = </span><span class="s2">Buffer</span><span class="s5">.read(s, </span>"sounds/a11wlk01.wav"<span class="s5">);</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>c = <span class="s2">Buffer</span>.alloc(s, 120000);</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p18"><br></p>
<p class="p22"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s2">Synth</span><span class="s5">(</span>\help_Buffer_copy<span class="s5">, [</span>\buf<span class="s5">, b]);<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// copy the whole buffer</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.copyData(c);</p>
<p class="p22"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s2">Synth</span><span class="s5">(</span>\help_Buffer_copy<span class="s5">, [</span>\buf<span class="s5">, c]);</span></p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// copy some samples</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>c.zero;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.copyData(c, numSamples: 4410);</p>
<p class="p22"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s2">Synth</span><span class="s5">(</span>\help_Buffer_copy<span class="s5">, [</span>\buf<span class="s5">, c]);</span></p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// buffer "compositing"</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>c.zero;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.copyData(c, numSamples: 4410);</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.copyData(c, dstStartAt: 4410, numSamples: 15500);</p>
<p class="p22"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s2">Synth</span><span class="s5">(</span>\help_Buffer_copy<span class="s5">, [</span>\buf<span class="s5">, c]);</span></p>
<p class="p12"><br></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>c.free;</p>
<p class="p12"><br></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>close(completionMessage)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>closeMsg(completionMessage)</b></p>
<p class="p12"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>After using a Buffer with a <a href="../UGens/Playback and Recording/DiskOut.html"><span class="s2">DiskOut</span></a> or <a href="../UGens/Playback and Recording/DiskIn.html"><span class="s2">DiskIn</span></a>, it is necessary to close the soundfile. Failure to do so can cause problems.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>completionMessage </b>- A valid OSC message or a <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> which will return one. A Function will be passed this Buffer as an argument when evaluated.</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>plot(name, bounds, minval = -1.0, maxval = 1.0, parent)</b></p>
<p class="p12"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Plot the contents of the Buffer in a GUI window. OSX only.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>name </b>- The name of the resulting window.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bounds</b> - An instance of <a href="../Geometry/Rect.html"><span class="s2">Rect</span></a> determining the size of the resulting view.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>minval</b> - the minimum value in the plot</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>maxval</b> - the maximum value in the plot</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>parent</b> - a window to place the plot in. If nil, one will be created for you</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p23"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = </span><span class="s2">Buffer</span><span class="s5">.read(s,</span>"sounds/a11wlk01.wav"<span class="s5">);</span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.plot;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>play(loop, mul)</b></p>
<p class="p12"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Plays the contents of the buffer on the server and returns a corresponding <a href="Synth.html"><span class="s2">Synth</span></a>.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>loop </b>- A Boolean indicating whether or not to loop playback. If false the synth will automatically be freed when done. The default is false.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>mul</b> - A value by which to scale the output. The default is 1.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p23"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = </span><span class="s2">Buffer</span><span class="s5">.read(s,</span>"sounds/a11wlk01.wav"<span class="s5">);</span></p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.play; </span>// frees itself</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = b.play(<span class="s2">true</span>);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.free; b.free;</p>
<p class="p8"><br></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>query</b></p>
<p class="p12"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Sends a b_query message to the server, asking for a description of this buffer. The results are posted to the post window. Does not update instance vars.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="Apple-tab-span">	</span><b>updateInfo(action)</b></p>
<p class="p12"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Sends a b_query message to the server, asking for a description of this buffer. Upon reply this Buffer's instance variables are automatically updated.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>action</b> - A <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a> to be evaluated once the file has been read and this Buffer's instance variables have been updated. The function will be passed this Buffer as an argument.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.readNoUpdate(s, <span class="s9">"sounds/a11wlk01.wav"</span>);</p>
<p class="p19"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.numFrames; </span>// incorrect, shows nil</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.updateInfo({<span class="s2">|buf|</span> buf.numFrames.postln; }); <span class="s6">// now it's right</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.free;</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>Buffer Fill Commands</b></p>
<p class="p18"><br></p>
<p class="p1">These correspond to the various b_gen OSC Commands, which fill the buffer with values for use. See <a href="Server-Command-Reference.html"><span class="s2">Server-Command-Reference</span></a> for more details.</p>
<p class="p18"><br></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>gen(genCommand, genArgs, normalize, asWavetable, clearFirst)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>genMsg(genCommand, genArgs, normalize, asWavetable, clearFirst)</b></p>
<p class="p12"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>This is a generalized version of the commands below.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>genCommand </b>- A <a href="../Collections/String.html"><span class="s2">String</span></a> indicating the name of the command to use. See <a href="Server-Command-Reference.html"><span class="s2">Server-Command-Reference</span></a> for a list of valid command names.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>genArgs</b> - An <a href="../Collections/Array.html"><span class="s2">Array</span></a> containing the corresponding arguments to the command.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>normalize</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to normalize the buffer to a peak value of 1.0. The default is true.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>asWavetable</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to write to the buffer in wavetable format so that it can be read by interpolating oscillators. The default is true.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>clearFirst</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to clear the buffer before writing. The default is true.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>sine1(amps, normalize, asWavetable, clearFirst)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>sine1Msg(amps, normalize, asWavetable, clearFirst)</b></p>
<p class="p12"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Fill this buffer with a series of sine wave harmonics using specified amplitudes.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>amps</b> - An <a href="../Collections/Array.html"><span class="s2">Array</span></a><b> </b>containing amplitudes for the harmonics. The first float value specifies the amplitude of the first partial, the second float value specifies the amplitude of the second partial, and so on.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>normalize</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to normalize the buffer to a peak value of 1.0. The default is true.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>asWavetable</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to write to the buffer in wavetable format so that it can be read by interpolating oscillators. The default is true.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>clearFirst</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to clear the buffer before writing. The default is true.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.alloc(s, 512, 1);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.sine1(1.0 / [1, 2, 3, 4], <span class="s2">true</span>, <span class="s2">true</span>, <span class="s2">true</span>);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = { <span class="s2">Osc</span>.ar(b, 200, 0, 0.5) }.play;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.free; b.free;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-converted-space"> </span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>sine2(freqs, amps, normalize, asWavetable, clearFirst)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>sine2Msg(freqs, amps, normalize, asWavetable, clearFirst)</b></p>
<p class="p12"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Fill this buffer with a series of sine wave partials using specified frequencies and amplitudes.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>freqs</b> - An <a href="../Collections/Array.html"><span class="s2">Array</span></a><b> </b>containing frequencies (in cycles per buffer) for the partials.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>amps</b> - An <a href="../Collections/Array.html"><span class="s2">Array</span></a><b> </b>containing amplitudes for the partials. This should contain the same number of items as freqs.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>normalize</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to normalize the buffer to a peak value of 1.0. The default is true.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>asWavetable</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to write to the buffer in wavetable format so that it can be read by interpolating oscillators. The default is true.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>clearFirst</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to clear the buffer before writing. The default is true.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>s.boot;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.alloc(s, 512, 1);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.sine2([1.0, 3], [1, 0.5]);</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = { <span class="s2">Osc</span>.ar(b, 200, 0, 0.5) }.play;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.free; b.free;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>sine3(freqs, amps, phases, normalize, asWavetable, clearFirst)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>sine3Msg(freqs, amps, phases, normalize, asWavetable, clearFirst)</b></p>
<p class="p12"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Fill this buffer with a series of sine wave partials using specified frequencies, amplitudes, and initial phases.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>freqs</b> - An <a href="../Collections/Array.html"><span class="s2">Array</span></a><b> </b>containing frequencies (in cycles per buffer) for the partials.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>amps</b> - An <a href="../Collections/Array.html"><span class="s2">Array</span></a><b> </b>containing amplitudes for the partials. This should contain the same number of items as freqs.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>phases</b> - An <a href="../Collections/Array.html"><span class="s2">Array</span></a><b> </b>containing initial phase for the partials (in radians). This should contain the same number of items as freqs.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>normalize</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to normalize the buffer to a peak value of 1.0. The default is true.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>asWavetable</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to write to the buffer in wavetable format so that it can be read by interpolating oscillators. The default is true.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>clearFirst</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to clear the buffer before writing. The default is true.</p>
<p class="p18"><br></p>
<p class="p18"><br></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>cheby(amplitudes, normalize, asWavetable, clearFirst)</b></p>
<p class="p11"><b><span class="Apple-tab-span">	</span>chebyMsg(amplitudes, normalize, asWavetable, clearFirst)</b></p>
<p class="p12"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Fill this buffer with a series of chebyshev polynomials, which can be defined as: cheby(n) = amplitude<span class="Apple-converted-space">  </span>* cos(n * acos(x)). To eliminate a DC offset when used as a waveshaper, the wavetable is offset so that the center value is zero.<span class="Apple-converted-space"> </span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>amplitudes</b> - An <a href="../Collections/Array.html"><span class="s2">Array</span></a><b> </b>containing amplitudes for the harmonics. The first float value specifies the amplitude for n = 1, the second float value specifies the amplitude for n = 2, and so on.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>normalize</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to normalize the buffer to a peak value of 1.0. The default is true.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>asWavetable</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to write to the buffer in wavetable format so that it can be read by interpolating oscillators. The default is true.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>clearFirst</b> - A <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a> indicating whether or not to clear the buffer before writing. The default is true.</p>
<p class="p12"><br></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.boot;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s2">Buffer</span>.alloc(s, 512, 1, {<span class="s2">arg</span> buf; buf.chebyMsg([1,0,1,1,0,1])});</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x = {<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">Shaper</span>.ar(</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b,<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s2">SinOsc</span>.ar(300, 0, <span class="s2">Line</span>.kr(0,1,6)),</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.5</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}.play;</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x.free; b.free;<span class="s4"><span class="Apple-tab-span">	</span></span></p>
<p class="p8"><br></p>
<p class="p3"><b>Cached Buffers</b></p>
<p class="p8"><br></p>
<p class="p1">To assist with automatic updates of buffer information (see <b>updateInfo</b> and <b>*read</b>), buffer objects are cached in a collection associated with the Server object hosting the buffers. Freeing a buffer removes it from the cache; quitting the server clears all the cached buffers. (This also occurs if the server crashes unexpectedly.)</p>
<p class="p2"><br></p>
<p class="p1">You may access cached buffers using the following methods.</p>
<p class="p2"><br></p>
<p class="p1"><b>*cachedBufferAt(server, bufnum)</b></p>
<p class="p2"><br></p>
<p class="p1">Access a buffer by its number.</p>
<p class="p2"><br></p>
<p class="p1"><b>*cachedBuffersDo(server, func)</b></p>
<p class="p2"><br></p>
<p class="p1">Iterate over all cached buffers. The iteration is not in any order, but will touch all buffers.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">It may be simpler to access them through the server object:</p>
<p class="p2"><br></p>
<p class="p1"><b>myServer.cachedBufferAt(bufnum)</b></p>
<p class="p1"><b>myServer.cachedBuffersDo(func)</b></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p7">b = <span class="s2">Buffer</span>.alloc(s, 2048, 1);</p>
<p class="p16"><span class="s2">Buffer</span><span class="s5">.cachedBufferAt(s, 0);<span class="Apple-tab-span">	</span></span>// assuming b has bufnum 0</p>
<p class="p7">s.cachedBufferAt(0);<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s6">// same result</span></p>
<p class="p7">s.cachedBuffersDo({ <span class="s2">|buf|</span> buf.postln });</p>
</body>
</html>
