<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1038.25">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #506929; min-height: 12.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0000bf}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #007300}
span.s1 {font: 18.0px Helvetica}
span.s2 {font: 9.0px Monaco}
span.s3 {color: #000000}
span.s4 {color: #0000bf}
span.s5 {color: #007300}
span.s6 {color: #bf0000}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>LocalBuf</b></span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>allocate a buffer local to the synth</b></p>
<p class="p2"><br></p>
<p class="p1">superclass: UGen</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-tab-span">	</span><b>*new(numFrames, numChannels)</b></p>
<p class="p2"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></p>
<p class="p1"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>return a new buffer – the ugen outputs its buffer number and can thus be used in</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>any other ugen that requires a buffer number input.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numFrames<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>number of frames (default: 1)</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numChannels</b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>number of channels for multiple channel buffers (default: 1)</p>
<p class="p2"><br></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><b>*newFrom(list)</b></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>return a new buffer from a given list of values. The list may be two-dimensional for numChannels &gt; 1.</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>It is then reshaped into the buffer's current format by flattening.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Since newFrom is called by the <b>as</b> message, one may thus convert an array to a LocalBuf:</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[1, 2, 3].as(LocalBuf)</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><b>set(list, offset)</b><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>set the buffer slots with a list of values. If list is smaller than numFrames, it will only set</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>part of the buffer. The list may be two-dimensional for numChannels &gt; 1.</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>offset</b> is the starting index (default: 0)</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><b>clear</b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>set the buffer slot to zero. This is <b>important</b> when randomly acessing buffer slots</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(e.g. with a BufRd) or not overwriting them. Clear is not an efficient real time operation</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>for larger buffers, so it should be only used when really needed - but then it is essential:</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a LocalBuf is "created" in each new synth, and it may reuse old space. So if an older<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth has already ended, this part of memory may be the same as the new synth's.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span>see also SetBuf, ClearBuf<span class="s2"><span class="Apple-tab-span">	</span></span></p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span></span>// example: FFT</p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span>{</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="s4">var</span> in, chain;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>in = <span class="s4">WhiteNoise</span>.ar(0.1.dup);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>chain = <span class="s4">FFT</span>({<span class="s4">LocalBuf</span>(2048, 1)}.dup, in);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>chain = <span class="s4">PV_BrickWall</span>(chain, <span class="s4">SinOsc</span>.kr([0.1, 0.11]));<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s4">IFFT</span><span class="s3">(chain) </span>// inverse FFT</p>
<p class="p6"><span class="Apple-tab-span">	</span>}.play;</p>
<p class="p6"><span class="Apple-tab-span">	</span>)</p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span></span>// spawn some FFT based synths:</p>
<p class="p6"><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="s3"><span class="Apple-tab-span">	</span></span>SynthDef<span class="s3">(</span><span class="s5">\fftgrain</span><span class="s3">, { </span>|out, sustain = 1, rate = 0.2|</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> in, chain;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>in = <span class="s4">WhiteNoise</span>.ar(0.1).dup;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>chain = <span class="s4">FFT</span>({<span class="s4">LocalBuf</span>(128, 1)}.dup, in);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>chain = <span class="s4">PV_BrickWall</span>(chain,<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">SinOsc</span>.kr(rate * <span class="s4">XLine</span>.kr(1, 15 * [1, 1.6], sustain), <span class="s4">Rand</span>(0, pi))</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>);<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Out</span>.ar(out, <span class="s4">IFFT</span>(chain) * <span class="s4">XLine</span>.kr(1, 0.001, sustain, doneAction: 2)) <span class="s6">// inverse FFT</span></p>
<p class="p6"><span class="Apple-tab-span">	</span>}).add;</p>
<p class="p6"><span class="Apple-tab-span">	</span>)</p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="s3"><span class="Apple-tab-span">	</span></span>Pbind<span class="s3">(</span></p>
<p class="p8"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>\instrument<span class="s3">, </span>\fftgrain<span class="s3">,<span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s5">\rate</span>, <span class="s4">Pwhite</span>().linexp(0, 1, 0.01, 300),<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s5">\legato</span>, <span class="s4">Pwhite</span>(1, 3.0, <span class="s4">inf</span>),</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s5">\dur</span>, <span class="s4">Prand</span>([0.2, 1, 1.2], <span class="s4">inf</span>)</p>
<p class="p6"><span class="Apple-tab-span">	</span>).play</p>
<p class="p6"><span class="Apple-tab-span">	</span>)</p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span></span>// IndexL</p>
<p class="p6"><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span>{</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> buf = <span class="s4">LocalBuf</span>.newFrom((0..5).scramble);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> freq = <span class="s4">IndexL</span>.kr(buf, <span class="s4">MouseX</span>.kr(0, <span class="s4">BufFrames</span>.kr(buf))).poll * 100 + 40;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Saw</span>.ar(freq * [1, 1.1]) * 0.1</p>
<p class="p6"><span class="Apple-tab-span">	</span>}.play;</p>
<p class="p6"><span class="Apple-tab-span">	</span>)</p>
<p class="p3"><br></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span></span>// DetectIndex</p>
<p class="p6"><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span>{</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> buf1 = <span class="s4">LocalBuf</span>.newFrom((0..5).scramble);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> buf2 = <span class="s4">LocalBuf</span>.newFrom((0..5).scramble - 1);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> buf3 = <span class="s4">LocalBuf</span>.newFrom((0..5).scramble + 1);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> index = <span class="s4">DetectIndex</span>.kr([buf1, buf2], <span class="s4">SinOsc</span>.kr([0.85, 0.8], 0, 6).trunc).poll;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> freq = <span class="s4">IndexL</span>.kr([buf2, buf3], index).poll * 40 + 40;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Saw</span>.ar(freq) * 0.1</p>
<p class="p6"><span class="Apple-tab-span">	</span>}.play;</p>
<p class="p6"><span class="Apple-tab-span">	</span>)</p>
<p class="p3"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span></span>// DegreeToKey</p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span></span>// modal space</p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span></span>// mouse x controls discrete pitch in dorian mode</p>
<p class="p6"><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span>play({</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> mix;</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>mix =<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// lead tone</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">SinOsc</span>.ar(</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p7"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>DegreeToKey<span class="s3">.kr(</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[0, 2, 3.2, 5, 7, 9, 10].as(<span class="s4">LocalBuf</span>),</p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s4">MouseX</span><span class="s3">.kr(0, 15),<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// mouse indexes into scale</p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>12,<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// 12 notes per octave</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>1,<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s6">// mul = 1</span></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>72<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// offset by 72 notes</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>).poll</p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>+ </span><span class="s4">LFNoise1</span><span class="s3">.kr([3,3], 0.04)<span class="Apple-tab-span">	</span></span>// add some low freq stereo detuning</p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>).midicps,<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// convert midi notes to hertz</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0,</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.1)</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// drone 5ths</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>+ <span class="s4">RLPF</span>.ar(<span class="s4">LFPulse</span>.ar([48,55].midicps, 0.15),</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">SinOsc</span>.kr(0.1, 0, 10, 72).midicps, 0.1, 0.1);</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// add some 70's euro-space-rock echo</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">CombN</span>.ar(mix, 0.31, 0.31, 2, 1, mix)</p>
<p class="p6"><span class="Apple-tab-span">	</span>})</p>
<p class="p6"><span class="Apple-tab-span">	</span>)</p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span></span>// Osc</p>
<p class="p6"><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span>{</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> buf;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> list = <span class="s4">Wavetable</span>.sineFill(512, 1.0 / [1, 10, 3, 10, 5, 6, 10]);</p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// list.plot;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>buf = <span class="s4">LocalBuf</span>.newFrom(list);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Osc</span>.ar(buf,<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">XLine</span>.kr(2000, 200 + {30.0.rand}.dup, 10) + <span class="s4">SinOsc</span>.ar(<span class="s4">Line</span>.kr(2, 300, 10),<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0, 100)</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>) * 0.1;</p>
<p class="p6"><span class="Apple-tab-span">	</span>}.play;</p>
<p class="p6"><span class="Apple-tab-span">	</span>)</p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span></span>// see how not clearing the buffer accesses old data:</p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span></span>// slowly overwrite data with noise</p>
<p class="p6"><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span>{</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> buf = <span class="s4">LocalBuf</span>(2048, 2);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">BufWr</span>.ar(<span class="s4">WhiteNoise</span>.ar(1.dup), buf, <span class="s4">LFNoise0</span>.ar(530).range(0, <span class="s4">BufFrames</span>.kr(buf)));<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">PlayBuf</span>.ar(2, buf, <span class="s4">MouseX</span>.kr(1, 2), loop: 1) * 0.1</p>
<p class="p6"><span class="Apple-tab-span">	</span>}.play</p>
<p class="p6"><span class="Apple-tab-span">	</span>)</p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span></span>// avoid this (unless you like the glitch) by clearing buffer first:</p>
<p class="p6"><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span>{</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> buf = <span class="s4">LocalBuf</span>(2048, 2).clear;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">BufWr</span>.ar(<span class="s4">WhiteNoise</span>.ar(1.dup), buf, <span class="s4">LFNoise0</span>.ar(530).range(0, <span class="s4">BufFrames</span>.kr(buf)));<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">PlayBuf</span>.ar(2, buf, <span class="s4">MouseX</span>.kr(1, 2), loop: 1) * 0.1</p>
<p class="p6"><span class="Apple-tab-span">	</span>}.play</p>
<p class="p6"><span class="Apple-tab-span">	</span>)</p>
<p class="p3"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span></span>// BufCombC stereo (needs no clearing, because delay is filled by ugen)</p>
<p class="p6"><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span>{</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="s4">var</span> z = <span class="s4">Decay</span>.ar(<span class="s4">Dust</span>.ar(1.dup, 0.1), 0.3, <span class="s4">WhiteNoise</span>.ar);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="s4">BufCombC</span>.ar(<span class="s4">LocalBuf</span>(<span class="s4">SampleRate</span>.ir, 2), z, <span class="s4">XLine</span>.kr(0.0001, 0.01, 20), 0.2);<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span>}.play</p>
<p class="p6"><span class="Apple-tab-span">	</span>)</p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s3"><span class="Apple-tab-span">	</span></span>// multichannel test</p>
<p class="p6"><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span>{</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="s4">var</span> in, chain, n = 4;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>in = <span class="s4">WhiteNoise</span>.ar(0.1.dup(n));</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>chain = <span class="s4">FFT</span>({<span class="s4">LocalBuf</span>(2048, 1)}.dup(n), in);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>chain = <span class="s4">PV_BrickWall</span>(chain, <span class="s4">LFNoise2</span>.kr(2.dup(n)));<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Splay</span>.ar(<span class="s4">IFFT</span>(chain)) <span class="s6">// inverse FFT</span></p>
<p class="p6"><span class="Apple-tab-span">	</span>}.play;</p>
<p class="p6"><span class="Apple-tab-span">	</span>)</p>
</body>
</html>
