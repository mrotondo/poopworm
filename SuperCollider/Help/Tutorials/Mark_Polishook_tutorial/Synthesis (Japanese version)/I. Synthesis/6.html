<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.42">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Osaka}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #a71e12}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Hiragino Kaku Gothic Pro}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Osaka; color: #a71e12}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Osaka; min-height: 13.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0019b7; min-height: 12.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #a71e12; min-height: 12.0px}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0019b7}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
span.s1 {color: #0019b7}
span.s2 {font: 9.0px Monaco}
span.s3 {color: #606060}
span.s4 {color: #326f17}
span.s5 {font: 9.0px Monaco; color: #0019b7}
span.s6 {font: 9.0px Monaco; color: #000000}
span.s7 {font: 9.0px Helvetica}
span.s8 {color: #000000}
span.s9 {color: #a71e12}
span.s10 {font: 9.0px Osaka; color: #a71e12}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>6.</b></p>
<p class="p2"><br></p>
<p class="p3">SynthDefのプロパティに関する議論を続けるために、次を評価してみて下さい。</p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p4"><span class="s1">SynthDescLib</span>.global.read;</p>
<p class="p4"><span class="s1">SynthDescLib</span>.global.browse;</p>
<p class="p4">)</p>
<p class="p2"><br></p>
<p class="p3">そして、それぞれのシンセのためのコントロールをリスと表示するボックスに注目して下さい。</p>
<p class="p2"><br></p>
<p class="p5">////////////////////////////////////////////////////////////////////////////////////////////////////</p>
<p class="p2"><br></p>
<p class="p6"><b>コントロールは（大抵は）アーギュメントである</b></p>
<p class="p2"><br></p>
<p class="p3">シンセが生成される時や、動作中に情報を与えたいと思う時には、SynthDefにコントロールをセットします。このための最も一般的な方法は、1つ、またはそれ以上のアーギュメントをSynthDefに含めるということです。</p>
<p class="p2"><br></p>
<p class="p5">////////////////////////////////////////////////////////////////////////////////////////////////////</p>
<p class="p2"><br></p>
<p class="p3">次の例では、それぞれのアーギュメントはデフォルト値を持ちます。そのような場合には、もし必要なところにアーギュメントを与えるのを忘れたとしても、SynthDefが自動的に供給します。加えて、シンセが生成される時に必要となるものを示すアーギュメントに対するデフォルト値は、コードがより読みやすくします。</p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p7"><span class="s2">// </span>デフォルト値を持つ<span class="s2">2</span>つのアーギュメント</p>
<p class="p4"><span class="s1">SynthDef</span>(<span class="s3">"withControls"</span>, { <span class="s1">arg</span> freq = 440, mul = 0.22;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s1">Out</span>.ar(</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0,</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">SinOsc</span>.ar([freq, freq+1], 0, mul)</p>
<p class="p4"><span class="Apple-tab-span">	</span>)</p>
<p class="p4">}).load(s);</p>
<p class="p4">)</p>
<p class="p2"><br></p>
<p class="p4"><span class="s1">Synth</span>(<span class="s3">"withControls"</span>, [<span class="s4">\freq</span>, 440, <span class="s4">\mul</span>, 0.1]);</p>
<p class="p2"><br></p>
<p class="p3">配列の中のアイテムはSynthDefのコントロールに渡される値です。</p>
<p class="p2"><br></p>
<p class="p5">////////////////////////////////////////////////////////////////////////////////////////////////////</p>
<p class="p2"><br></p>
<p class="p3">配列の中にそれぞれのコントロールを書く場合には、次の様にシンボル（バックスラッシュの後に名前が続く）を用いることもできますし、</p>
<p class="p8"><br></p>
<p class="p4"><span class="s1">Synth</span>(<span class="s3">"withControls"</span>, [<span class="s4">\freq</span>, 440, <span class="s4">\mul</span>, 0.1]);</p>
<p class="p8"><br></p>
<p class="p3">または、次の様に文字列（引用符の中に名前）を用いることもでき、</p>
<p class="p2"><br></p>
<p class="p4"><span class="s1">Synth</span>(<span class="s3">"withControls"</span>, [<span class="s4">"freq"</span>, 440, <span class="s4">"mul"</span>, 0.1]);</p>
<p class="p2"><br></p>
<p class="p3">その後に値が続きます。</p>
<p class="p2"><br></p>
<p class="p5">////////////////////////////////////////////////////////////////////////////////////////////////////</p>
<p class="p2"><br></p>
<p class="p3">いずれの場合でも、そのパターンは、</p>
<p class="p2"><br></p>
<p class="p4">[ controlName, value, controlName, value].</p>
<p class="p2"><br></p>
<p class="p3">です。</p>
<p class="p2"><br></p>
<p class="p5">////////////////////////////////////////////////////////////////////////////////////////////////////</p>
<p class="p2"><br></p>
<p class="p3">シンセにコントロールを渡す第３の方法もあります。前の例のシンセは次の様に書くこともできます。</p>
<p class="p2"><br></p>
<p class="p4"><span class="s1">Synth</span>(<span class="s3">"withControls"</span>, [0, 440, 1, 0.1]);</p>
<p class="p2"><br></p>
<p class="p3">このパターンは次の様になります。</p>
<p class="p2"><br></p>
<p class="p4">[ controlIndex, value, controlIndex, value].</p>
<p class="p2"><br></p>
<p class="p3">この手法のディスアドバンテージは、コントロールをインデックス番号として表現するのは説明的ではなく、それゆえに名前をシンボルまたは文字列として与えるよりも読みにくくなるでしょう。</p>
<p class="p2"><br></p>
<p class="p5">////////////////////////////////////////////////////////////////////////////////////////////////////</p>
<p class="p2"><br></p>
<p class="p6"><b>コントロールはリセットすることもできる</b></p>
<p class="p2"><br></p>
<p class="p3">次の例は、シンセが生成された後に（動作中に）どのようにしてコントロールをリセットすることができるのかということを示しています。</p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p4"><span class="s1">SynthDef</span>(<span class="s3">"resetMyControls"</span>, { <span class="s1">arg</span> freq = 440, mul = 0.22;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s1">Out</span>.ar(</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0,</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">SinOsc</span>.ar([freq, freq+1], 0, mul)</p>
<p class="p4"><span class="Apple-tab-span">	</span>)</p>
<p class="p4">}).load(s);</p>
<p class="p4">)</p>
<p class="p9"><br></p>
<p class="p4"><span class="s1">~aSynth = Synth</span>(<span class="s3">"resetMyControls"</span>, [<span class="s4">\freq</span>, 440, <span class="s4">\mul</span>, 0.06]);</p>
<p class="p4">~aSynth.set(\freq, 600, \mul, 0.25);</p>
<p class="p2"><br></p>
<p class="p3"><span class="s2">aSynth</span>の前の~はグローバル変数を定義します。このようにすることの主なアドバンテージは、次の様に明示的に宣言する必要がないということです。</p>
<p class="p2"><br></p>
<p class="p7"><span class="s5">var</span><span class="s6"> aSynth; </span><span class="s2">// '~'</span>のない変数はまず宣言しなければならない！！</p>
<p class="p2"><br></p>
<p class="p3">もっと正確に言えば、~という文字は「aSynth」という変数をcurrentEnvironmentという名前で知られるオブジェクトのインスタンスの中に配置します。詳しくは、SuperColliderのヘルプ・システムで<span class="s7"><b>Environment</b></span>というドキュメントを参照して下さい。</p>
<p class="p2"><br></p>
<p class="p5">////////////////////////////////////////////////////////////////////////////////////////////////////</p>
<p class="p2"><br></p>
<p class="p3"><span class="s2">SynthDef</span>はコントロールのそれぞれにラグ・タイムを定義することができます。<span class="s2">ugenGraphFunc</span>の後に配列として書くラグは、あるコントロール値から他のコントロール値にスムーズに変化する時間を指定します。</p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p4"><span class="s1">SynthDef</span>(<span class="s3">"controlsWithLags"</span>, { <span class="s1">arg</span> freq = 440, mul = 0.22;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s1">Out</span>.ar(</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0,</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">SinOsc</span>.ar([freq, freq+1], 0, mul)</p>
<p class="p4"><span class="Apple-tab-span">	</span>)</p>
<p class="p4">}, [1, 1]).load(s);</p>
<p class="p4">)</p>
<p class="p2"><br></p>
<p class="p4"><span class="s1">~aSynth = Synth</span>(<span class="s3">"controlsWithLags"</span>, [<span class="s4">\freq</span>, 550, <span class="s4">\mul</span>, 0.1]);</p>
<p class="p4">~aSynth.set(\freq, 600, \mul, 0.5);</p>
<p class="p2"><br></p>
<p class="p5">////////////////////////////////////////////////////////////////////////////////////////////////////</p>
<p class="p10"><br></p>
<p class="p3"><span class="s2">SynthDef</span>の中にラグタイムの配列を含めるというオプションがあるということは、前に議論した<span class="s2">SynthDef</span>のテンプレートは再定義されなければならないということを意味します。</p>
<p class="p10"><br></p>
<p class="p7"><span class="s2">// </span>前のSynthDefのためのテンプレート。ラグタイムの配列なし。</p>
<p class="p11">SynthDef<span class="s8">(</span></p>
<p class="p12"><span class="s8"><span class="Apple-tab-span">	</span></span>"i am a synthdef"<span class="s8">,<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s9">// </span><span class="s10">第１アーギュメントは名前</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>{ .... i am a ugenGraphFunc ... }<span class="Apple-tab-span">	</span><span class="s9">// </span><span class="s10">第２アーギュメントは</span><span class="s9">ugenGraphFunc</span></p>
<p class="p4">)</p>
<p class="p2"><br></p>
<p class="p7"><span class="s2">// </span>ラグタイムの配列付きで再定義したSynthDefのためのテンプレート</p>
<p class="p7"><span class="s2">// </span>ラグタイムの配列のためのクラス定義は<span class="s2">'rates'</span>と呼ぶ</p>
<p class="p11">SynthDef<span class="s8">(</span></p>
<p class="p12"><span class="s8"><span class="Apple-tab-span">	</span></span>"i am a synthdef"<span class="s8">,<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s9">// </span><span class="s10">名前</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>{ .... i am a ugenGraphFunc ... },<span class="Apple-tab-span">	</span><span class="s9">// ugenGraphFunc</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>[ ... lagTimes ... ]<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s9">// rates</span></p>
<p class="p4">)</p>
<p class="p2"><br></p>
<p class="p3">どちらのテンプレートを用いるかという選択はユーザー次第です。もし、SynthDefにラグタイムを含める必要があるのであれば、第２のテンプレート、すなわち、レートの配列を含むもの、を使います。</p>
<p class="p2"><br></p>
<p class="p5">////////////////////////////////////////////////////////////////////////////////////////////////////</p>
</body>
</html>
