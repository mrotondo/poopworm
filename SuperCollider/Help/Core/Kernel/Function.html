<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1038.25">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #0000ee}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #ad140d}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #cd1612}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Helvetica; min-height: 11.0px}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; min-height: 16.0px}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #001bb9}
p.p14 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p15 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica}
p.p16 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; min-height: 14.0px}
p.p19 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #ad140d; min-height: 12.0px}
p.p20 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #2c7014}
p.p21 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica; min-height: 17.0px}
span.s1 {color: #000000}
span.s2 {color: #001bb9}
span.s3 {color: #0000ee}
span.s4 {color: #ad140d}
span.s5 {color: #0b28c6}
span.s6 {color: #cd1612}
span.s7 {color: #606060}
span.s8 {color: #2c7014}
span.s9 {text-decoration: underline ; color: #001bb9}
span.s10 {font: 9.0px Monaco; color: #2c7014}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>Function</b></p>
<p class="p2"><br></p>
<p class="p3"><span class="s1"><b>Inherits from: </b><a href="../Object.html"><b>Object</b></a></span><span class="s2"><b> : </b><a href="AbstractFunction.html"><span class="s3"><b>AbstractFunction</b></span></a></span></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4">A Function is a reference to a <a href="FunctionDef.html"><span class="s2">FunctionDef</span></a> and its defining context <a href="Frame.html"><span class="s2">Frame</span></a>. When a FunctionDef is encountered in your code it is pushed on the stack as a Function. A Function can be evaluated by using the 'value' method. See the <a href="../../Language/Functions.html"><span class="s2">Functions</span></a> help file for a basic introduction.</p>
<p class="p2"><br></p>
<p class="p4">Because it inherits from <a href="AbstractFunction.html"><span class="s2">AbstractFunction</span></a>, Functions respond to math operations by creating a new Function.<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p5">// example</p>
<p class="p6">(</p>
<p class="p6"><span class="s2">var</span> a, b, c;</p>
<p class="p6">a = { [100, 200, 300].choose };<span class="Apple-tab-span">	</span><span class="s4">// a Function</span></p>
<p class="p6">b = { 10.rand + 1 };<span class="Apple-tab-span">	</span><span class="s4">// another Function</span></p>
<p class="p5"><span class="s1">c = a + b; <span class="Apple-tab-span">	</span></span>// c is a Function.</p>
<p class="p5"><span class="s1">c.value.postln;<span class="Apple-tab-span">	</span></span>// evaluate c and print the result</p>
<p class="p6">)</p>
<p class="p7"><br></p>
<p class="p4">See <a href="AbstractFunction.html"><span class="s2">AbstractFunction</span></a><b> </b>for function composition examples.</p>
<p class="p2"><br></p>
<p class="p4">Because Functions are such an important concept, here some examples from related programming languages with functions as first class objects:</p>
<p class="p2"><br></p>
<p class="p8">// returning the first argument itself:</p>
<p class="p6">{ <span class="s5">|x|</span> x }.value(1) <span class="s6">// SuperCollider</span></p>
<p class="p6">[:x | x ] value: 1<span class="s6"> // Smalltalk</span></p>
<p class="p6">((lambda (x) x) 1) <span class="s6">// Lisp</span></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p9"><b>Accessing</b></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>def</b></p>
<p class="p2"><br></p>
<p class="p4">Get the definition ( <a href="FunctionDef.html"><span class="s2">FunctionDef</span></a> ) of the Function.</p>
<p class="p2"><br></p>
<p class="p4"><b>isClosed</b></p>
<p class="p2"><br></p>
<p class="p4">returns true if the function is closed, i.e. has no external references and can thus be converted to a compile string safely.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p9"><b>Evaluation</b></p>
<p class="p2"><br></p>
<p class="p4"><b>value(... args)</b></p>
<p class="p2"><br></p>
<p class="p4">Evaluates the FunctionDef referred to by the Function. The Function is passed the args given.</p>
<p class="p2"><br></p>
<p class="p6">{ <span class="s2">|a, b|</span> (a * b).postln }.value(3, 10);</p>
<p class="p6">{ <span class="s2">arg</span> a, b; (a * b).postln }.value(3, 10); <span class="s4">// different way of expressing the same</span></p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>valueArray(... args)</b></p>
<p class="p2"><br></p>
<p class="p4">Evaluates the FunctionDef referred to by the Function. If the last argument is an Array or List, then it is unpacked and appended to the other arguments (if any) to the Function. If the last argument is not an Array or List then this is the same as the 'value' method.</p>
<p class="p2"><br></p>
<p class="p6">{ <span class="s2">|a, b, c|</span> ((a * b) + c).postln }.valueArray([3, 10, 7]);</p>
<p class="p10"><br></p>
<p class="p6">{ <span class="s2">|a, b, c, d|</span> [a, b, c, d].postln }.valueArray([1, 2, 3]);</p>
<p class="p10"><br></p>
<p class="p6">{ <span class="s2">|a, b, c, d|</span> [a, b, c, d].postln }.valueArray(9, [1, 2, 3]);</p>
<p class="p7"><br></p>
<p class="p6">{ <span class="s2">|a, b, c, d|</span> [a, b, c, d].postln }.valueArray(9, 10, [1, 2, 3]);</p>
<p class="p7"><br></p>
<p class="p4">A common syntactic shortcut:</p>
<p class="p7"><br></p>
<p class="p11">{ <span class="s5">|a, b, c|</span> ((a * b) + c).postln }.value(*[3, 10, 7]);</p>
<p class="p7"><br></p>
<p class="p12"><br></p>
<p class="p4"><b>valueEnvir(... args)</b></p>
<p class="p2"><br></p>
<p class="p4">As value above. Unsupplied argument names are looked up in the current <b>Environment</b>.</p>
<p class="p2"><br></p>
<p class="p6">(</p>
<p class="p13">Environment<span class="s1">.use({</span></p>
<p class="p6">~a = 3;</p>
<p class="p6">~b = 10;</p>
<p class="p6">{ <span class="s2">|a, b|</span> (a * b).postln }.valueEnvir;</p>
<p class="p6">});</p>
<p class="p6">)</p>
<p class="p12"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>valueArrayEnvir(... args)</b></p>
<p class="p2"><br></p>
<p class="p4">Evaluates the FunctionDef referred to by the Function. If the last argument is an Array or List, then it is unpacked and appended to the other arguments (if any) to the Function. If the last argument is not an Array or List then this is the same as the 'value' method. Unsupplied argument names are looked up in the current <b>Environment</b>.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>valueWithEnvir(envir)</b></p>
<p class="p2"><br></p>
<p class="p4">Evaluate the function, using arguments from the supplied environment</p>
<p class="p4">This is slightly faster than <b>valueEnvir</b> and does not require replacing the <b>currentEnvironment</b></p>
<p class="p2"><br></p>
<p class="p6">(</p>
<p class="p6"><span class="s2">e = Environment</span>.make({<span class="s2"> </span>~a = 3; ~b = 10 });</p>
<p class="p6">{ <span class="s2">|a, b|</span> (a * b) }.valueWithEnvir(e);</p>
<p class="p6">)</p>
<p class="p2"><br></p>
<p class="p4"><b>functionPerformList(selector, arglist)</b></p>
<p class="p2"><br></p>
<p class="p4">For Function, this behaves the same as valueArray(arglist). It is used<span class="Apple-converted-space">  </span>where Functions and other objects should behave differently to value, such as in the objecr prototyping implementation of <a href="../../Collections/Environment.html"><span class="s2">Environment</span></a>.</p>
<p class="p2"><br></p>
<p class="p14"><br></p>
<p class="p15"><b>performWithEnvir(selector, envir)</b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p4"><b>selector: </b>A <a href="../Symbol.html"><span class="s2">Symbol</span></a> representing a method selector.<span class="Apple-converted-space"> </span></p>
<p class="p4"><b>envir: </b>The remaining arguments derived from the environment and passed as arguments to the method named by the selector.</p>
<p class="p2"><br></p>
<p class="p6">a = { <span class="s2">|a, b, c|</span> postf(<span class="s7">"% plus % plus % is %\n"</span>, a, b, c, a + b + c); <span class="s7">""</span> };</p>
<p class="p6">a.performWithEnvir(<span class="s8">\value</span>, (a: 1, c: 3, d: 4, b: 2));</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p15"><b>performKeyValuePairs(selector, pairs)</b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p15"><b>selector: </b>A <a href="../Symbol.html"><span class="s2">Symbol</span></a> representing a method selector.<span class="Apple-converted-space"> </span></p>
<p class="p15"><b>pairs: </b>Array or List with key-value pairs.</p>
<p class="p14"><br></p>
<p class="p16">a = { <span class="s2">|a, b, c|</span> postf(<span class="s7">"% plus % plus % is %\n"</span>, a, b, c, a + b + c); <span class="s7">""</span> };</p>
<p class="p16">a.performKeyValuePairs(<span class="s8">\value</span>, [<span class="s8">\a</span>, 1, <span class="s8">\b</span>, 2, <span class="s8">\c</span>, 3, <span class="s8">\d</span>, 4]);</p>
<p class="p14"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>loop</b></p>
<p class="p2"><br></p>
<p class="p4">Repeat this function. Useful with <b>Task</b> and Clocks.</p>
<p class="p2"><br></p>
<p class="p6">t = <span class="s2">Task</span>({ { <span class="s7">"I'm loopy"</span>.postln; 1.wait;}.loop });</p>
<p class="p6">t.start;</p>
<p class="p6">t.stop;</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>defer(delta)</b></p>
<p class="p2"><br></p>
<p class="p4">Delay the evaluation of this Function by <b>delta</b> in seconds. Uses <b>AppClock</b>.</p>
<p class="p2"><br></p>
<p class="p17"><span class="s1">{ </span>"2 seconds have passed."<span class="s1">.postln; }.defer(2);</span></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>dup(n)</b></p>
<p class="p2"><br></p>
<p class="p4">Return an Array consisting of the results of n evaluations of this Function.</p>
<p class="p2"><br></p>
<p class="p6">x = { 4.rand; }.dup(4);</p>
<p class="p6">x.postln;</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p4"><b>! n</b></p>
<p class="p2"><br></p>
<p class="p4">equivalent to dup(n)</p>
<p class="p7"><br></p>
<p class="p6">x = { 4.rand } ! 4;</p>
<p class="p6">x.postln;</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>sum(n)</b></p>
<p class="p2"><br></p>
<p class="p4">return the sum of n values produced.</p>
<p class="p2"><br></p>
<p class="p6">{ 4.rand }.sum(8);</p>
<p class="p7"><br></p>
<p class="p4"><b>choose</b><span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p4">evaluates the function. This makes it polymorphic to <a href="../../Collections/SequenceableCollection.html"><span class="s9">SequenceableCollection</span></a>, <a href="../../Collections/Bag.html"><span class="s2">Bag</span></a> and <a href="../../Collections/Set.html"><span class="s9">Set</span></a>.</p>
<p class="p7"><br></p>
<p class="p6">[{ 100.rand }, [20, 30, 40]].collect(_.choose);</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>bench(print)</b></p>
<p class="p2"><br></p>
<p class="p4">Returns the amount of time this function takes to evaluate. <b>print</b> is a boolean indicating whether the result is posted. The default is true.</p>
<p class="p2"><br></p>
<p class="p6">{ 1000000.do({ 1.0.rand }); }.bench;</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p4"><b>fork(clock, quant, stackSize)</b></p>
<p class="p2"><br></p>
<p class="p4">Returns a Routine using the receiver as it's function, and plays it in a <a href="../../Scheduling/TempoClock.html"><span class="s2">TempoClock</span></a>.</p>
<p class="p2"><br></p>
<p class="p6">{ 4.do({ <span class="s7">"Threadin..."</span>.postln; 1.wait;}) }.fork;</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p4"><b>forkIfNeeded(clock, quant, stackSize)</b></p>
<p class="p2"><br></p>
<p class="p4">If needed, creates a new Routine to evaluate the function in, if the message is called within a routine already, it simply evaluates it.</p>
<p class="p2"><br></p>
<p class="p6">f = { 4.do({ <span class="s7">"Threadin..."</span>.postln; 1.wait;}) };</p>
<p class="p6">f.forkIfNeeded;</p>
<p class="p6">{ <span class="s7">"we are now in a routine"</span>.postln; 1.wait; f.forkIfNeeded }.fork;</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>block</b></p>
<p class="p2"><br></p>
<p class="p4">Break from a loop. Calls the receiver with an argument which is a function that returns from the method block. To exit the loop, call .value on the function passed in. You can pass a value to this function and that value will be returned from the block method.</p>
<p class="p2"><br></p>
<p class="p6">block {<span class="s2">|break|</span></p>
<p class="p6"><span class="Apple-tab-span">	</span>100.do {<span class="s2">|i|</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>i.postln;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if (i == 7) { break.value(999) }</p>
<p class="p6"><span class="Apple-tab-span">	</span>};</p>
<p class="p6">}</p>
<p class="p7"><br></p>
<p class="p4"><b>thunk</b></p>
<p class="p7"><br></p>
<p class="p4">Return a <a href="Thunk.html"><span class="s2">Thunk</span></a>, which is an unevaluated value that can be used in calculations<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p6">x = thunk { 4.rand };</p>
<p class="p6">x.value;</p>
<p class="p6">x.value;</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p4"><b>flop</b></p>
<p class="p2"><br></p>
<p class="p4">Return a function that, when evaluated with nested arguments, does multichannel expansion by evaluting the receiver function for each channel. A flopped function responds like the "map" function in languages like Lisp.</p>
<p class="p7"><br></p>
<p class="p6">f = { <span class="s2">|a, b|</span> if(a &gt; 0) { a + b } { -<span class="s2">inf</span> } }.flop;</p>
<p class="p6">f.value([-1, 2, 1, -3.0], [10, 1000]);</p>
<p class="p6">f.value(2, 3);</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p4"><b>envirFlop</b></p>
<p class="p2"><br></p>
<p class="p4">like flop, but implements an environment argument passing (valueEnvir).<span class="Apple-converted-space"> </span></p>
<p class="p4">Less efficient in generation than flop, but not a big difference in evaluation.</p>
<p class="p7"><br></p>
<p class="p6">f = { <span class="s2">|a|</span> if(a &gt; 0) { a + 1 } { -<span class="s2">inf</span> } }.envirFlop;</p>
<p class="p6">e = (a: [20, 40]);</p>
<p class="p6">e.use { f.value }</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>inEnvir(envir)</b></p>
<p class="p2"><br></p>
<p class="p4">returns an "environment-safe" function. See <a href="../../Collections/Environment.html"><span class="s2">Environment</span></a> for more details.</p>
<p class="p2"><br></p>
<p class="p5">// prints nil because ~a is read from topEnvironment, not e</p>
<p class="p6">e = (a: <span class="s7">"got it"</span>, f: { { ~a.postln }.defer(0.5) });</p>
<p class="p6">e.use { e.f };</p>
<p class="p7"><br></p>
<p class="p5">// prints "got it" because { ~a.postln } is now bound to the e environment</p>
<p class="p6">e = (a: <span class="s7">"got it"</span>, f: { { ~a.postln }.inEnvir.defer(0.5) });</p>
<p class="p6">e.use { e.f };</p>
<p class="p7"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>case(cases)</b></p>
<p class="p2"><br></p>
<p class="p4">Function implements a <b>case </b>method which allows for conditional evaluation with multiple cases. Since the receiver represents the first case this can be simply written as pairs of test functions and corresponding functions to be evaluated if true. Unlike Object-switch, this is inlined and is therefore just as efficient as nested if statements.</p>
<p class="p18"><br></p>
<p class="p6">(</p>
<p class="p6"><span class="s2">var</span> i, x, z;</p>
<p class="p6">z = [0, 1, 1.1, 1.3, 1.5, 2];</p>
<p class="p6">i = z.choose;</p>
<p class="p6">x = case</p>
<p class="p6"><span class="Apple-tab-span">	</span>{ i == 1 } <span class="Apple-converted-space">  </span>{ <span class="s8">\no</span> }</p>
<p class="p6"><span class="Apple-tab-span">	</span>{ i == 1.1 } { <span class="s8">\wrong</span> }</p>
<p class="p6"><span class="Apple-tab-span">	</span>{ i == 1.3 } { <span class="s8">\wrong</span> }</p>
<p class="p6"><span class="Apple-tab-span">	</span>{ i == 1.5 } { <span class="s8">\wrong</span> }</p>
<p class="p6"><span class="Apple-tab-span">	</span>{ i == 2 } <span class="Apple-converted-space">  </span>{ <span class="s8">\wrong</span> }</p>
<p class="p6"><span class="Apple-tab-span">	</span>{ i == 0 } <span class="Apple-converted-space">  </span>{ <span class="s8">\true</span> };</p>
<p class="p6">x.postln;</p>
<p class="p6">)</p>
<p class="p7"><br></p>
<p class="p4"><b>matchItem(item)</b></p>
<p class="p2"><br></p>
<p class="p4">Interface shared with other classes that implements pattern matching. See also: matchItem.</p>
<p class="p4">Function.matchItem evaluates the function with the item as argument, expecting a <a href="../Boolean.html"><span class="s2">Boolean</span></a> as reply.</p>
<p class="p2"><br></p>
<p class="p6">{ <span class="s2">|x|</span> x &gt; 5 }.matchItem(6); <span class="s4">// true</span></p>
<p class="p19"><br></p>
<p class="p19"><br></p>
<p class="p4"><b>performDegreeToKey(scaleDegree, stepsPerOctave = 12, accidental = 0)</b></p>
<p class="p2"><br></p>
<p class="p4">use a function as a conversion from scale degree to note number. See also <a href="../../Collections/SequenceableCollection.html"><span class="s9">SequenceableCollection</span></a> and <a href="../../Collections/Scale.html"><span class="s2">Scale</span></a></p>
<p class="p2"><br></p>
<p class="p5">// a strange mapping</p>
<p class="p6">(</p>
<p class="p13">var<span class="s1"> f = {</span>|degree, stepsPerOctave, acc|</p>
<p class="p6"><span class="Apple-tab-span">	</span>(1.8 ** (degree % stepsPerOctave) + acc).postln</p>
<p class="p6">};</p>
<p class="p13">Pbind<span class="s1">(</span></p>
<p class="p20"><span class="s1"><span class="Apple-tab-span">	</span></span>\scale<span class="s1">, f,</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="s8">\degree</span>, <span class="s2">Pseq</span>([0, 1, 2b, 3s, 4s, 6, 14, [0, 2, 4], [1, 3, 6]], <span class="s2">inf</span>)</p>
<p class="p6">).play</p>
<p class="p6">)</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p9"><b>Exception Handling</b></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4">For the following two methods a return ^ inside of the receiver itself cannot be caught. Returns in methods called by the receiver are OK.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>try(handler)</b></p>
<p class="p2"><br></p>
<p class="p4">Executes the receiver. If an exception is thrown the catch function <b>handler</b> is executed with the error as an argument. <b>handler</b> itself can rethrow the error if desired.</p>
<p class="p2"><br></p>
<p class="p4"><b>protect(handler)</b></p>
<p class="p2"><br></p>
<p class="p4">Executes the receiver. The cleanup function <b>handler </b>is executed with an error as an argument, or nil if there was no error. The error continues to be in effect.<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p4">Examples:</p>
<p class="p7"><br></p>
<p class="p5">// no exception handler</p>
<p class="p6">value { 8.zorg; <span class="s8">\didnt_continue</span>.postln; }</p>
<p class="p7"><br></p>
<p class="p6">try { 8.zorg } {<span class="s2">|error|</span> error.postln; <span class="s8">\cleanup</span>.postln; }; <span class="s8">\continued</span>.postln;</p>
<p class="p7"><br></p>
<p class="p6">protect { 8.zorg } {<span class="s2">|error|</span> error.postln; }; <span class="s8">\didnt_continue</span>.postln;</p>
<p class="p7"><br></p>
<p class="p6">try { 123.postln; 456.throw; 789.postln } {<span class="s2">|error|</span> [<span class="s8">\catch</span>, error].postln };</p>
<p class="p7"><br></p>
<p class="p6">try { 123.postln; 789.postln } {<span class="s2">|error|</span> [<span class="s8">\catch</span>, error].postln };</p>
<p class="p7"><br></p>
<p class="p6">try { 123.postln; <span class="s2">nil</span>.throw; 789.postln } {<span class="s2">|error|</span> [<span class="s8">\catch</span>, error].postln };</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p6">protect { 123.postln; 456.throw; 789.postln } {<span class="s2">|error|</span> [<span class="s8">\onExit</span>, error].postln };</p>
<p class="p7"><br></p>
<p class="p6">protect { 123.postln; 789.postln } {<span class="s2">|error|</span> [<span class="s8">\onExit</span>, error].postln };</p>
<p class="p7"><br></p>
<p class="p6">(</p>
<p class="p6">try {</p>
<p class="p6"><span class="Apple-tab-span">	</span>protect { 123.postln; 456.throw; 789.postln } {<span class="s2">|error|</span> [<span class="s8">\onExit</span>, error].postln };</p>
<p class="p6">} {<span class="s2">|error|</span> [<span class="s8">\catch</span>, error].postln };</p>
<p class="p6">)</p>
<p class="p7"><br></p>
<p class="p6">value { 123.postln; 456.throw; 789.postln }</p>
<p class="p7"><br></p>
<p class="p6">value { 123.postln; <span class="s2">Error</span>(<span class="s7">"what happened?"</span>).throw; 789.postln }</p>
<p class="p7"><br></p>
<p class="p6">(</p>
<p class="p20"><span class="s1">a = [</span>\aaa<span class="s1">, </span>\bbb<span class="s1">, </span>\ccc<span class="s1">, </span>\ddd<span class="s1">];</span></p>
<p class="p6">a[1].postln;</p>
<p class="p6">a[<span class="s8">\x</span>].postln;</p>
<p class="p6">a[2].postln;</p>
<p class="p6">)</p>
<p class="p7"><br></p>
<p class="p6">(</p>
<p class="p6">try {</p>
<p class="p20"><span class="s1"><span class="Apple-tab-span">	</span>a = [</span>\aaa<span class="s1">, </span>\bbb<span class="s1">, </span>\ccc<span class="s1">, </span>\ddd<span class="s1">];</span></p>
<p class="p6"><span class="Apple-tab-span">	</span>a[1].postln;</p>
<p class="p6"><span class="Apple-tab-span">	</span>a[<span class="s8">\x</span>].postln;</p>
<p class="p6"><span class="Apple-tab-span">	</span>a[2].postln;</p>
<p class="p6">} {<span class="s2">|error|</span> <span class="s8">\caught</span>.postln; error.dump }</p>
<p class="p6">)</p>
<p class="p7"><br></p>
<p class="p6">(</p>
<p class="p6">try {</p>
<p class="p20"><span class="s1"><span class="Apple-tab-span">	</span>a = [</span>\aaa<span class="s1">, </span>\bbb<span class="s1">, </span>\ccc<span class="s1">, </span>\ddd<span class="s1">];</span></p>
<p class="p6"><span class="Apple-tab-span">	</span>a[1].postln;</p>
<p class="p6"><span class="Apple-tab-span">	</span>a[<span class="s8">\x</span>].postln;</p>
<p class="p6"><span class="Apple-tab-span">	</span>a[2].postln;</p>
<p class="p6">} {<span class="s2">|error|</span> <span class="s8">\caught</span>.postln; error.dump; error.throw }</p>
<p class="p6">)</p>
<p class="p7"><br></p>
<p class="p6">(</p>
<p class="p6">protect {</p>
<p class="p20"><span class="s1"><span class="Apple-tab-span">	</span>a = [</span>\aaa<span class="s1">, </span>\bbb<span class="s1">, </span>\ccc<span class="s1">, </span>\ddd<span class="s1">];</span></p>
<p class="p6"><span class="Apple-tab-span">	</span>a[1].postln;</p>
<p class="p6"><span class="Apple-tab-span">	</span>a[<span class="s8">\x</span>].postln;</p>
<p class="p6"><span class="Apple-tab-span">	</span>a[2].postln;</p>
<p class="p6">} {<span class="s2">|error|</span> <span class="s8">\caught</span>.postln; error.dump }</p>
<p class="p6">)</p>
<p class="p21"><br></p>
<p class="p21"><br></p>
<p class="p9"><b>Audio</b></p>
<p class="p12"><br></p>
<p class="p4"><b>play(target, outbus, fadetime, addAction, args)</b></p>
<p class="p2"><br></p>
<p class="p4"><span class="Apple-tab-span">	</span>This is probably the simplest way to get audio in SC3. It wraps the Function in a <b>SynthDef</b> (adding an <b>Out</b> ugen if needed), creates and starts a new <b>Synth</b> with it, and returns the Synth object. A <b>Linen</b> is also added to avoid clicks, which is configured to allow the resulting Synth to have its <span class="s10">\gate </span>argument set, or to respond to a release message. Args in the function become args in the resulting def.</p>
<p class="p2"><br></p>
<p class="p4"><b><span class="Apple-tab-span">	</span>target </b>- a Node, Server, or Nil. A Server will be converted to the default group of that server. Nil will be converted to the default group of the default Server.</p>
<p class="p4"><b><span class="Apple-tab-span">	</span>outbus </b>- the output bus to play the audio out on. This is equivalent to Out.ar(outbus, theoutput). The default is 0.</p>
<p class="p4"><b><span class="Apple-tab-span">	</span>fadeTime</b> - a fadein time. The default is 0.02 seconds, which is just enough to avoid a click. This will also be the fadeout time for a release if you do not specify.</p>
<p class="p4"><b><span class="Apple-tab-span">	</span>addAction</b> - see <b>Synth</b> for a list of valid addActions. The default is <span class="s10">\addToHead</span><b>.</b></p>
<p class="p12"><br></p>
<p class="p6"><span class="Apple-tab-span">	</span>x = { <span class="s2">|freq = 440|</span> <span class="s2">SinOsc</span>.ar(freq, 0, 0.3) }.play; <span class="s4">// this returns a Synth object;</span></p>
<p class="p5"><span class="s1"><span class="Apple-tab-span">	</span>x.set(</span><span class="s8">\freq</span><span class="s1">, 880); </span>// note you can set the freq argument</p>
<p class="p5"><span class="s1"><span class="Apple-tab-span">	</span>x.defName; </span>// the name of the resulting SynthDef (generated automatically in a cycle of 512)</p>
<p class="p5"><span class="s1"><span class="Apple-tab-span">	</span>x.release(4); </span>// fadeout over 4 seconds</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><span class="Apple-tab-span">	</span>Many of the examples make use of the Function.play syntax.<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span>Note that reusing such code in a <a href="../../ServerArchitecture/SynthDef.html"><span class="s2">SynthDef</span></a> requires the addition of an <a href="../../UGens/InOut/Out.html"><span class="s2">Out</span></a> ugen.</p>
<p class="p12"><br></p>
<p class="p5"><span class="Apple-tab-span">	</span>// the following two lines produce equivalent results</p>
<p class="p6"><span class="Apple-tab-span">	</span>{ <span class="s2">SinOsc</span>.ar(440, 0, 0.3) }.play(fadeTime: 0.0);<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="s2">SynthDef</span>(<span class="s8">\help_FuncPlay</span>, { <span class="s2">Out</span>.ar(0, <span class="s2">SinOsc</span>.ar(440, 0, 0.3))}).play;</p>
<p class="p18"><br></p>
<p class="p4"><span class="Apple-tab-span">	</span>Function.play is often more convienent than SynthDef.play, particularly for short examples and quick testing. The latter does have some additional options, such as lagtimes for controls, etc. Where reuse and maximum flexibility are of greater importance, SynthDef and its various methods are usually the better choice.<span class="Apple-converted-space"> </span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p2"><br></p>
<p class="p4"><b>scope(numChannels, outbus, fadeTime, bufsize, zoom)</b></p>
<p class="p2"><br></p>
<p class="p4"><span class="Apple-tab-span">	</span>As <b>play </b>above, but plays it on the internal <b>Server</b>, and calls Server-scope to open a scope window in which to view the output. Currently only works on OSX.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><b>numChannels</b> - The number of channels to display in the scope window, starting from <b>outbus</b>. The default is 2.</p>
<p class="p4"><b><span class="Apple-tab-span">	</span>outbus </b>- The output bus to play the audio out on. This is equivalent to Out.ar(outbus, theoutput). The default is 0.</p>
<p class="p4"><span class="Apple-tab-span">	</span><b>fadeTime</b> - A fadein time. The default is 0.02 seconds, which is just enough to avoid a click.</p>
<p class="p4"><span class="Apple-tab-span">	</span><b>bufsize </b>- The size of the buffer for the ScopeView. The default is 4096.</p>
<p class="p4"><span class="Apple-tab-span">	</span><b>zoom</b> - A zoom value for the scope's X axis. Larger values show more. The default is 1.</p>
<p class="p2"><br></p>
<p class="p6"><span class="Apple-tab-span">	</span>{ <span class="s2">FSinOsc</span>.ar(440, 0, 0.3) }.scope(1)</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>plot(duration, server, bounds, minval, maxval, parent)</b></p>
<p class="p2"><br></p>
<p class="p4"><span class="Apple-tab-span">	</span>Calculates <b>duration</b> in seconds worth of the output of this function, and plots it in a GUI window. Unlike <b>play</b> and <b>scope</b> it will not work with explicit Out Ugens, so your function should return a UGen or an <b>Array</b> of them. The plot will be calculated in realtime.</p>
<p class="p2"><br></p>
<p class="p4"><b><span class="Apple-tab-span">	</span>duration</b> - The duration of the function to plot in seconds. The default is 0.01.</p>
<p class="p4"><b><span class="Apple-tab-span">	</span>server </b>- The <b>Server</b> on which to calculate the plot. This must be running on your local machine, but does not need to be the internal server. If nil the default server will be used.</p>
<p class="p4"><span class="Apple-tab-span">	</span><b>bounds</b> - An instance of <b>Rect</b> or <b>Point</b> indicating the bounds of the plot window.</p>
<p class="p4"><span class="Apple-tab-span">	</span><b>minval</b> - the minimum value in the plot. Defaults to -1.0.</p>
<p class="p4"><span class="Apple-tab-span">	</span><b>maxval</b> - the maximum value in the plot. Defaults to 1.0.</p>
<p class="p4"><span class="Apple-tab-span">	</span><b>parent</b> - a window to place the plot in. If nil, one will be created for you.</p>
<p class="p2"><br></p>
<p class="p6"><span class="Apple-tab-span">	</span>{ <span class="s2">SinOsc</span>.ar(440) }.plot(0.01, bounds: <span class="s2">Window</span>.screenBounds);</p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="Apple-tab-span">	</span>{ {<span class="s2">|i|</span> <span class="s2">SinOsc</span>.ar(1 + i)}.dup(7) }.plot(1);</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p9"><b>Conversion</b></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>asSynthDef(rates, prependArgs, outClass, fadetime)</b></p>
<p class="p2"><br></p>
<p class="p4"><span class="Apple-tab-span">	</span>Returns a SynthDef based on this Function, adding a <b>Linen </b>and an <b>Out</b> ugen if needed.</p>
<p class="p2"><br></p>
<p class="p4"><b><span class="Apple-tab-span">	</span>rates </b>- An Array of rates and lagtimes for the function's arguments (see <b>SynthDef</b> for more details).</p>
<p class="p4"><span class="Apple-tab-span">	</span><b>outClass</b> - The class of the output ugen as a symbol. The default is <span class="s8">\Out</span>.</p>
<p class="p4"><span class="Apple-tab-span">	</span><b>fadeTime</b> - a fadein time. The default is 0.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><b>asDefName</b></p>
<p class="p2"><br></p>
<p class="p4">Performs asSynthDef (see above), sends the resulting def to the local server and returns the SynthDefs name. This is asynchronous.</p>
<p class="p18"><br></p>
<p class="p6">x = { <span class="s2">SinOsc</span>.ar(440, 0, 0.3) }.asDefName; <span class="s4">// this must complete first</span></p>
<p class="p6">y = <span class="s2">Synth</span>(x);</p>
<p class="p18"><br></p>
<p class="p18"><br></p>
<p class="p4"><b>asRoutine</b></p>
<p class="p2"><br></p>
<p class="p4">Returns a <a href="Routine.html"><span class="s2">Routine</span></a> using <b>this</b> as its func argument.</p>
<p class="p2"><br></p>
<p class="p4"><b>r</b></p>
<p class="p2"><br></p>
<p class="p4">Returns a <a href="Routine.html"><span class="s2">Routine</span></a> using <b>this</b> as its func argument.</p>
<p class="p7"><br></p>
<p class="p6">a = r { 5.do { <span class="s2">|i|</span> i.rand.yield } };</p>
<p class="p6">a.nextN(8);</p>
<p class="p7"><br></p>
<p class="p4"><b>p</b></p>
<p class="p2"><br></p>
<p class="p4">Returns a <a href="../../Streams-Patterns-Events/Patterns/Prout.html"><span class="s2">Prout</span></a> using <b>this</b> as its func argument.</p>
<p class="p7"><br></p>
<p class="p6">a = p { 5.do { <span class="s2">|i|</span> i.rand.yield } };</p>
<p class="p6">x = a.asStream;</p>
<p class="p6">x.nextN(8);</p>
<p class="p7"><br></p>
<p class="p4">This is useful for using <a href="../../Language/ListComprehensions.html"><span class="s9">ListComprehensions</span></a> in Patterns:</p>
<p class="p7"><br></p>
<p class="p6"><span class="s2">Pbind</span>(<span class="s8">\degree</span>, p {:[x, y].postln, x&lt;-(0..10), y&lt;-(0..10), (x + y).isPrime }, <span class="s8">\dur</span>, 0.3).play;<span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
</body>
</html>
