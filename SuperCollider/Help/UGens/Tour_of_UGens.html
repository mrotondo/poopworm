<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="949.54">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 19.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 16.0px Helvetica; min-height: 19.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 16.0px Helvetica}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 16.0px Helvetica; color: #0021e7}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; color: #77301f}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; min-height: 16.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; min-height: 14.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 4.0px Monaco; min-height: 5.0px}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 3.0px Monaco; min-height: 4.0px}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; color: #606060}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 3.0px Monaco; color: #183fac; min-height: 4.0px}
p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; color: #ad140d}
p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; color: #183fac}
span.s1 {font: 14.0px Monaco; color: #0022b7}
span.s2 {font: 14.0px Monaco}
span.s3 {color: #183fac}
span.s4 {text-decoration: underline}
span.s5 {color: #000000}
span.s6 {color: #77301f}
span.s7 {text-decoration: underline ; color: #0021e7}
span.s8 {color: #556528}
span.s9 {color: #0f4ae6}
span.s10 {text-decoration: underline ; color: #003de5}
span.s11 {font: 12.0px Helvetica}
span.s12 {color: #001bb9}
span.s13 {font: 12.0px Monaco}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>Signal Processing</b> in SuperCollider</p>
<p class="p2"><br></p>
<p class="p3"><b>1. A Tour of available Unit Generators.</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>SuperCollider has over 250 unit generators.<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span>If you count the unary and binary operators, there are over 300.<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span>This tour covers many, but not all of them.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>categories of unit generators:<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>sources: periodic, aperiodic<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>filters</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>distortion<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>panning</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>reverbs</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>delays and buffer ugens</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>granular synthesis</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>control: envelopes, triggers, counters, gates, lags, decays</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>spectral<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p3"><b>2. Techniques<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></p>
<p class="p3"><span class="Apple-tab-span">	</span>broadening a sound:<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>decorrelation, beat frequencies, delays.</p>
<p class="p3"><span class="Apple-tab-span">	</span>series and parallel structures.</p>
<p class="p2"><br></p>
<p class="p3"><i>Note:</i> The "Help browser" (<span class="s1">Help</span><span class="s2">.gui</span>) contains a category for UGens, which provides another useful way to get an overview of the available UGens, including those which were created since this tour was written.</p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p4">s = <span class="s3">Server</span>.internal;</p>
<p class="p4"><span class="s3">Server</span>.default = s;</p>
<p class="p4">s.boot;</p>
<p class="p4">)</p>
<p class="p2"><br></p>
<p class="p3"><b>Periodic Sources: Oscillators.</b></p>
<p class="p2"><br></p>
<p class="p3"><b>LF - "Low Frequency" Unit Generators.</b></p>
<p class="p2"><br></p>
<p class="p3">LFPar, LFCub, LFTri, Impulse, LFSaw, LFPulse, VarSaw, SyncSaw</p>
<p class="p2"><br></p>
<p class="p3">geometric waveforms, not band limited.</p>
<p class="p3">will cause aliasing at higher frequencies.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Oscillators/LFPar.html">LFPar</a></span><span class="s5">, <a href="Oscillators/LFCub.html"><span class="s4">LFCub</span></a>, <a href="Oscillators/LFTri.html"><span class="s4">LFTri</span></a>, <a href="Oscillators/LFSaw.html"><span class="s4">LFSaw</span></a>, <a href="Oscillators/Impulse.html"><span class="s4">Impulse</span></a></span></p>
<p class="p3">arguments:<span class="Apple-converted-space">  </span>frequency, phase, mul, add</p>
<p class="p2"><br></p>
<p class="p6">// parabolic approximation of sine</p>
<p class="p4">{ <span class="s3">LFPar</span>.ar(<span class="s3">LFPar</span>.kr(<span class="s3">LFPar</span>.kr(0.2,0,8,10),0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">LFPar</span>.ar(<span class="s3">LFPar</span>.kr(0.2, 0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">LFPar</span>.ar(800,0,0.1) }.scope(1, zoom: 4);</p>
<p class="p6">// since it is not band limited, there are aliasing artifacts</p>
<p class="p4">{ <span class="s3">LFPar</span>.ar(<span class="s3">XLine</span>.kr(100,15000,6),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p7"><br></p>
<p class="p6">// cubic approximation of sine</p>
<p class="p4">{ <span class="s3">LFCub</span>.ar(<span class="s3">LFCub</span>.kr(<span class="s3">LFCub</span>.kr(0.2,0,8,10),0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">LFCub</span>.ar(<span class="s3">LFCub</span>.kr(0.2, 0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">LFCub</span>.ar(800,0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">LFCub</span>.ar(<span class="s3">XLine</span>.kr(100,15000,6),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">LFTri</span>.ar(<span class="s3">LFTri</span>.kr(<span class="s3">LFTri</span>.kr(0.2,0,8,10),0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">LFTri</span>.ar(<span class="s3">LFTri</span>.kr(0.2, 0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">LFTri</span>.ar(800,0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">LFTri</span>.ar(<span class="s3">XLine</span>.kr(100,15000,6),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">LFSaw</span>.ar(<span class="s3">LFSaw</span>.kr(<span class="s3">LFSaw</span>.kr(0.2,0,8,10),0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">LFSaw</span>.ar(<span class="s3">LFSaw</span>.kr(0.2, 0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">LFSaw</span>.ar(100,0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">LFSaw</span>.ar(<span class="s3">XLine</span>.kr(100,15000,6),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Impulse</span>.ar(<span class="s3">LFTri</span>.kr(<span class="s3">LFTri</span>.kr(0.2,0,8,10),0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">Impulse</span>.ar(<span class="s3">LFTri</span>.kr(0.2, 0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">Impulse</span>.ar(100,0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">Impulse</span>.ar(<span class="s3">XLine</span>.kr(100,15000,6),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p8"><br></p>
<p class="p5"><span class="s4"><a href="Oscillators/LFPulse.html">LFPulse</a></span><span class="s5">, <a href="Oscillators/VarSaw.html"><span class="s4">VarSaw</span></a></span></p>
<p class="p3">arguments:<span class="Apple-converted-space">  </span>frequency, phase, width, mul, add</p>
<p class="p8"><br></p>
<p class="p4">{ <span class="s3">LFPulse</span>.ar(<span class="s3">LFPulse</span>.kr(<span class="s3">LFPulse</span>.kr(0.2,0,0.5,8,10),0,0.5, 400,800),0,0.5,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">LFPulse</span>.ar(<span class="s3">LFPulse</span>.kr(3, 0, 0.3, 200, 200), 0, 0.2, 0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">LFPulse</span>.ar(<span class="s3">XLine</span>.kr(100,15000,6),0,0.5,0.1) }.scope(1, zoom: 4);</p>
<p class="p7"><br></p>
<p class="p6">// pulse width modulation</p>
<p class="p4">{ <span class="s3">LFPulse</span>.ar(100,0,<span class="s3">MouseY</span>.kr(0,1),0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">LFPulse</span>.ar(100,0,<span class="s3">LFTri</span>.kr(0.2,0,0.5,0.5),0.1) }.scope(1, zoom: 4);</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">VarSaw</span>.ar(<span class="s3">VarSaw</span>.kr(<span class="s3">VarSaw</span>.kr(0.2,0,0.2,8,10),0,0.2, 400,800),0,0.2,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">VarSaw</span>.ar(<span class="s3">VarSaw</span>.kr(0.2, 0, 0.2, 400,800),0,0.2,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">VarSaw</span>.ar(<span class="s3">XLine</span>.kr(100,15000,6),0,0.2,0.1) }.scope(1, zoom: 4);</p>
<p class="p7"><br></p>
<p class="p6">// pulse width modulation</p>
<p class="p4">{ <span class="s3">VarSaw</span>.ar(100,0,<span class="s3">MouseY</span>.kr(0,1),0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">VarSaw</span>.ar(100,0,<span class="s3">LFTri</span>.kr(0.2,0,0.5,0.5),0.1) }.scope(1, zoom: 4);</p>
<p class="p8"><br></p>
<p class="p5"><span class="s4"><a href="Oscillators/SyncSaw.html">SyncSaw</a></span></p>
<p class="p3">arguments:<span class="Apple-converted-space">  </span>syncFreq, sawFreq, mul, add</p>
<p class="p8"><br></p>
<p class="p4">{ <span class="s3">SyncSaw</span>.ar(100, <span class="s3">MouseX</span>.kr(100, 1000), 0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">SyncSaw</span>.ar(100, <span class="s3">Line</span>.kr(100, 800, 12), 0.1) }.scope(1, zoom: 4);</p>
<p class="p8"><br></p>
<p class="p8"><br></p>
<p class="p3"><b>Band Limited Oscillators</b></p>
<p class="p2"><br></p>
<p class="p3">SinOsc, FSinOsc, Blip, Saw, Pulse</p>
<p class="p3">will not alias.<span class="Apple-converted-space"> </span></p>
<p class="p8"><br></p>
<p class="p5"><span class="s4"><a href="Oscillators/SinOsc.html">SinOsc</a></span><span class="s5">, <a href="Oscillators/FSinOsc.html"><span class="s4">FSinOsc</span></a></span></p>
<p class="p3">arguments:<span class="Apple-converted-space">  </span>frequency, phase, mul, add</p>
<p class="p8"><br></p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(<span class="s3">SinOsc</span>.kr(<span class="s3">SinOsc</span>.kr(0.2,0,8,10),0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(<span class="s3">SinOsc</span>.kr(0.2, 0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(800,0,0.1) }.scope(1, zoom: 4);</p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(<span class="s3">XLine</span>.kr(100,15000,6),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">FSinOsc</span>.ar(800,0,0.1) }.scope(1, zoom: 4);</p>
<p class="p6">// FSinOsc should not be frequency modulated.<span class="Apple-converted-space"> </span></p>
<p class="p6">// Since it is based on a filter at the edge of stability, it will blow up:</p>
<p class="p4">{ <span class="s3">FSinOsc</span>.ar(<span class="s3">FSinOsc</span>.kr(<span class="s3">FSinOsc</span>.kr(0.2,0,8,10),0, 400,800),0,0.1) }.scope(1, zoom: 4);</p>
<p class="p8"><br></p>
<p class="p5"><span class="s4"><a href="Oscillators/Blip.html">Blip</a></span></p>
<p class="p3">arguments:<span class="Apple-converted-space">  </span>frequency, numHarmonics, mul, add</p>
<p class="p2"><br></p>
<p class="p4">{ <span class="s3">Blip</span>.ar(<span class="s3">XLine</span>.kr(20000,200,6),100,0.2) }.scope(1);</p>
<p class="p4">{ <span class="s3">Blip</span>.ar(<span class="s3">XLine</span>.kr(100,15000,6),100,0.2) }.scope(1); <span class="s6">// no aliasing</span></p>
<p class="p6">// modulate number of harmonics</p>
<p class="p4">{ <span class="s3">Blip</span>.ar(200,<span class="s3">Line</span>.kr(1,100,20),0.2) }.scope(1);</p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Oscillators/Saw.html">Saw</a></span></p>
<p class="p3">arguments:<span class="Apple-converted-space">  </span>frequency, mul, add</p>
<p class="p2"><br></p>
<p class="p4">{ <span class="s3">Saw</span>.ar(<span class="s3">XLine</span>.kr(20000,200,6),0.2) }.scope(1);</p>
<p class="p4">{ <span class="s3">Saw</span>.ar(<span class="s3">XLine</span>.kr(100,15000,6),0.2) }.scope(1); <span class="s6">// no aliasing</span></p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Oscillators/Pulse.html">Pulse</a></span></p>
<p class="p3">arguments:<span class="Apple-converted-space">  </span>frequency, width, mul, add</p>
<p class="p2"><br></p>
<p class="p4">{ <span class="s3">Pulse</span>.ar(<span class="s3">XLine</span>.kr(20000,200,6),0.3,0.2) }.scope(1);</p>
<p class="p4">{ <span class="s3">Pulse</span>.ar(<span class="s3">XLine</span>.kr(100,15000,6),0.3,0.2) }.scope(1); <span class="s6">// no aliasing</span></p>
<p class="p7"><br></p>
<p class="p6">// modulate pulse width</p>
<p class="p4">{ <span class="s3">Pulse</span>.ar(200, <span class="s3">Line</span>.kr(0.01,0.99,8), 0.2) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p6">// two band limited square waves thru a resonant low pass filter</p>
<p class="p4">{ <span class="s3">RLPF</span>.ar(<span class="s3">Pulse</span>.ar([100,250],0.5,0.1), <span class="s3">XLine</span>.kr(8000,400,5), 0.05) }.scope(1);</p>
<p class="p8"><br></p>
<p class="p3"><span class="s7"><a href="Oscillators/Klang.html">Klang</a></span> - sine oscillator bank</p>
<p class="p3">arguments:<span class="Apple-converted-space">  </span>`[ frequencies, amplitudes, phases ], mul, add</p>
<p class="p8"><br></p>
<p class="p4">{ <span class="s3">Klang</span>.ar(`[ [800, 1000, 1200],[0.3, 0.3, 0.3],[pi,pi,pi]], 1, 0) * 0.4}.scope(1);</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Klang</span>.ar(`[ {exprand(400, 2000)}.dup(16), <span class="s3">nil</span>, <span class="s3">nil</span> ], 1, 0) * 0.04 }.scope(1);</p>
<p class="p8"><br></p>
<p class="p8"><br></p>
<p class="p3"><b>Table Oscillators</b></p>
<p class="p2"><br></p>
<p class="p3">Osc, COsc, VOsc, VOsc3</p>
<p class="p3">Use a buffer allocated on the server.</p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Oscillators/Osc.html">Osc</a></span></p>
<p class="p3">arguments: buffer number, frequency, phase, mul, add.</p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p4">b = <span class="s3">Buffer</span>.alloc(s, 2048, 1, bufnum: 80);</p>
<p class="p4">b.sine1(1.0/(1..6), <span class="s3">true</span>, <span class="s3">true</span>, <span class="s3">true</span>);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Osc</span>.ar(80, 100, 0, 0.1) }.scope(1, zoom:4);</p>
<p class="p7"><br></p>
<p class="p4">b.sine1(1.0/(1..12));</p>
<p class="p4">b.sine1(1.0/(1..24));</p>
<p class="p4">b.sine1(1.0/(1..32));</p>
<p class="p4">b.sine1([1.0/(1,3..12), 0].flop.flat.postln);</p>
<p class="p4">b.sine1([1.0/(1,3..32).squared, 0].flop.flat.postln);</p>
<p class="p4">b.sine1((1.dup(4) ++ 0.dup(8)).scramble.postln);</p>
<p class="p4">b.sine1((1.dup(4) ++ 0.dup(8)).scramble.postln);</p>
<p class="p4">b.sine1((1.dup(4) ++ 0.dup(8)).scramble.postln);</p>
<p class="p4">b.sine1((1.dup(4) ++ 0.dup(8)).scramble.postln);</p>
<p class="p4">b.sine1({1.0.rand2.cubed}.dup(8).round(1e-3).postln);</p>
<p class="p4">b.sine1({1.0.rand2.cubed}.dup(12).round(1e-3).postln);</p>
<p class="p4">b.sine1({1.0.rand2.cubed}.dup(16).round(1e-3).postln);</p>
<p class="p4">b.sine1({1.0.rand2.cubed}.dup(24).round(1e-3).postln);</p>
<p class="p8"><br></p>
<p class="p3"><span class="s7"><a href="Oscillators/COsc.html">COsc</a></span> - two oscillators, detuned</p>
<p class="p3">arguments: buffer number, frequency, beat frequency, mul, add.</p>
<p class="p8"><br></p>
<p class="p4">b.sine1(1.0/(1..6), <span class="s3">true</span>, <span class="s3">true</span>, <span class="s3">true</span>);</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">COsc</span>.ar(80, 100, 1, 0.1) }.scope(1, zoom:4);</p>
<p class="p6">// change buffer as above.</p>
<p class="p8"><br></p>
<p class="p8"><br></p>
<p class="p3"><span class="s7"><a href="Oscillators/VOsc.html">VOsc</a></span> - multiple wave table crossfade oscillators</p>
<p class="p3">arguments: buffer number, frequency, phase, mul, add.</p>
<p class="p8"><br></p>
<p class="p4">(</p>
<p class="p6">// allocate tables 80 to 87</p>
<p class="p4">8.do {<span class="s3">|i|</span> s.sendMsg(<span class="s8">\b_alloc</span>, 80+i, 1024); };</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p6">// fill tables 80 to 87</p>
<p class="p4">8.do({<span class="s3">|i|</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> n, a;</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// generate array of harmonic amplitudes</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span>n = (i+1)**2; </span>// num harmonics for each table: [1,4,9,16,25,36,49,64]</p>
<p class="p4"><span class="Apple-tab-span">	</span>a = {<span class="s3">|j|</span> ((n-j)/n).squared }.dup(n);</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// fill table</p>
<p class="p4"><span class="Apple-tab-span">	</span>s.listSendMsg([<span class="s8">\b_gen</span>, 80+i, <span class="s8">\sine1</span>, 7] ++ a);</p>
<p class="p4">});</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">VOsc</span>.ar(<span class="s3">MouseX</span>.kr(80,87), 120, 0, 0.3) }.scope(1, zoom:4);</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p6">// allocate and fill tables 80 to 87</p>
<p class="p4">8.do({<span class="s3">|i|</span></p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// generate array of harmonic amplitudes</p>
<p class="p4"><span class="Apple-tab-span">	</span>a = {1.0.rand2.cubed }.dup((i+1)*4);</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// fill table</p>
<p class="p4"><span class="Apple-tab-span">	</span>s.listSendMsg([<span class="s8">\b_gen</span>, 80+i, <span class="s8">\sine1</span>, 7] ++ a);</p>
<p class="p4">});</p>
<p class="p4">)</p>
<p class="p8"><br></p>
<p class="p3"><span class="s7"><a href="Oscillators/VOsc3.html">VOsc3</a></span> - three VOscs summed.</p>
<p class="p3">arguments: buffer number, freq1, freq2, freq3, beat frequency, mul, add.</p>
<p class="p8"><br></p>
<p class="p6">// chorusing</p>
<p class="p4">{ <span class="s3">VOsc3</span>.ar(<span class="s3">MouseX</span>.kr(80,87), 120, 121.04, 119.37, 0.2) }.scope(1, zoom:4);</p>
<p class="p7"><br></p>
<p class="p6">// chords</p>
<p class="p4">{ <span class="s3">VOsc3</span>.ar(<span class="s3">MouseX</span>.kr(80,87), 120, 151.13, 179.42, 0.2) }.scope(1, zoom:4);</p>
<p class="p8"><br></p>
<p class="p3"><b>Aperiodic Sources: Noise.</b></p>
<p class="p8"><br></p>
<p class="p8"><br></p>
<p class="p3">LF "Low Frequency" Noise Generators.</p>
<p class="p8"><br></p>
<p class="p5"><span class="s4"><a href="Noise/LFNoise0.html">LFNoise0</a></span><span class="s5">, <a href="Noise/LFNoise1.html"><span class="s4">LFNoise1</span></a>, <a href="Noise/LFNoise2.html"><span class="s4">LFNoise2</span></a>, <a href="Noise/LFClipNoise.html"><span class="s4">LFClipNoise</span></a></span></p>
<p class="p3">arguments: frequency, mul, add</p>
<p class="p2"><br></p>
<p class="p4">{ <span class="s3">LFClipNoise</span>.ar(<span class="s3">MouseX</span>.kr(200, 10000, 1), 0.125) }.scope(1);</p>
<p class="p4">{ <span class="s3">LFNoise0</span>.ar(<span class="s3">MouseX</span>.kr(200, 10000, 1), 0.25) }.scope(1);</p>
<p class="p4">{ <span class="s3">LFNoise1</span>.ar(<span class="s3">MouseX</span>.kr(200, 10000, 1), 0.25) }.scope(1);</p>
<p class="p4">{ <span class="s3">LFNoise2</span>.ar(<span class="s3">MouseX</span>.kr(200, 10000, 1), 0.25) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p6">// used as controls</p>
<p class="p4">{ <span class="s3">LFPar</span>.ar(<span class="s3">LFClipNoise</span>.kr(<span class="s3">MouseX</span>.kr(0.5, 64, 1), 200, 400), 0, 0.2) }.scope(1, zoom:8);</p>
<p class="p4">{ <span class="s3">LFPar</span>.ar(<span class="s3">LFNoise0</span>.kr(<span class="s3">MouseX</span>.kr(0.5, 64, 1), 200, 400), 0, 0.2) }.scope(1, zoom:8);</p>
<p class="p4">{ <span class="s3">LFPar</span>.ar(<span class="s3">LFNoise1</span>.kr(<span class="s3">MouseX</span>.kr(0.5, 64, 1), 200, 400), 0, 0.2) }.scope(1, zoom:8);</p>
<p class="p4">{ <span class="s3">LFPar</span>.ar(<span class="s3">LFNoise2</span>.kr(<span class="s3">MouseX</span>.kr(0.5, 64, 1), 200, 400), 0, 0.2) }.scope(1, zoom:8);</p>
<p class="p8"><br></p>
<p class="p8"><br></p>
<p class="p3">Broad Spectrum Noise Generators</p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Noise/ClipNoise.html">ClipNoise</a></span><span class="s5">, <a href="Noise/WhiteNoise.html"><span class="s4">WhiteNoise</span></a>, <a href="Noise/PinkNoise.html"><span class="s4">PinkNoise</span></a>, <a href="Noise/BrownNoise.html"><span class="s4">BrownNoise</span></a>, <a href="Noise/GrayNoise.html"><span class="s4">GrayNoise</span></a></span></p>
<p class="p3">arguments: mul, add</p>
<p class="p2"><br></p>
<p class="p4">{ <span class="s3">ClipNoise</span>.ar(0.2) }.scope(1);</p>
<p class="p4">{ <span class="s3">WhiteNoise</span>.ar(0.2) }.scope(1);</p>
<p class="p4">{ <span class="s3">PinkNoise</span>.ar(0.4) }.scope(1);</p>
<p class="p4">{ <span class="s3">BrownNoise</span>.ar(0.2) }.scope(1);</p>
<p class="p4">{ <span class="s3">GrayNoise</span>.ar(0.2) }.scope(1);</p>
<p class="p2"><br></p>
<p class="p3">Impulse Noise Generators</p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Noise/Dust.html">Dust</a></span><span class="s5">, <a href="Noise/Dust2.html"><span class="s4">Dust2</span></a></span></p>
<p class="p3">arguments: density, mul, add</p>
<p class="p2"><br></p>
<p class="p4">{ <span class="s3">Dust</span>.ar(<span class="s3">MouseX</span>.kr(1,10000,1), 0.4) }.scope(1, zoom:4);</p>
<p class="p4">{ <span class="s3">Dust2</span>.ar(<span class="s3">MouseX</span>.kr(1,10000,1), 0.4) }.scope(1, zoom:4);</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p3">Chaotic Noise Generators</p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Noise/Crackle.html">Crackle</a></span></p>
<p class="p3">arguments: chaosParam, mul, add</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Crackle</span>.ar(<span class="s3">MouseX</span>.kr(1,2), 0.5) }.scope(1);</p>
<p class="p2"><br></p>
<p class="p3"><b>Filters</b></p>
<p class="p7"><br></p>
<p class="p3">Low Pass, High Pass</p>
<p class="p2"><br></p>
<p class="p3"><span class="s7"><a href="Filters/LPF.html">LPF</a></span>, <a href="Filters/HPF.html"><span class="s9">HPF</span></a> - 12 dB / octave</p>
<p class="p3">arguments: in, freq, mul, add</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">LPF</span>.ar(<span class="s3">WhiteNoise</span>.ar, <span class="s3">MouseX</span>.kr(1e2,2e4,1), 0.2) }.scope(1);</p>
<p class="p4">{ <span class="s3">HPF</span>.ar(<span class="s3">WhiteNoise</span>.ar, <span class="s3">MouseX</span>.kr(1e2,2e4,1), 0.2) }.scope(1);</p>
<p class="p4">{ <span class="s3">LPF</span>.ar(<span class="s3">Saw</span>.ar(100), <span class="s3">MouseX</span>.kr(1e2,2e4,1), 0.2) }.scope(1);</p>
<p class="p4">{ <span class="s3">HPF</span>.ar(<span class="s3">Saw</span>.ar(100), <span class="s3">MouseX</span>.kr(1e2,2e4,1), 0.2) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p3">Band Pass, Band Cut</p>
<p class="p2"><br></p>
<p class="p3"><span class="s7"><a href="Filters/BPF.html">BPF</a></span>, <a href="Filters/BRF.html"><span class="s9">BRF</span></a> - 12 dB / octave</p>
<p class="p3">arguments: in, freq, rq, mul, add</p>
<p class="p3">rq is the reciprocal of the Q of the filter,</p>
<p class="p3">or in other words: the bandwidth in Hertz = rq * freq.</p>
<p class="p2"><br></p>
<p class="p4">{ <span class="s3">BPF</span>.ar(<span class="s3">WhiteNoise</span>.ar, <span class="s3">MouseX</span>.kr(1e2,2e4,1), 0.4, 0.4) }.scope(1);</p>
<p class="p4">{ <span class="s3">BRF</span>.ar(<span class="s3">WhiteNoise</span>.ar, <span class="s3">MouseX</span>.kr(1e2,2e4,1), 0.4, 0.2) }.scope(1);</p>
<p class="p4">{ <span class="s3">BPF</span>.ar(<span class="s3">Saw</span>.ar(100), <span class="s3">MouseX</span>.kr(1e2,2e4,1), 0.4, 0.4) }.scope(1);</p>
<p class="p4">{ <span class="s3">BRF</span>.ar(<span class="s3">Saw</span>.ar(100), <span class="s3">MouseX</span>.kr(1e2,2e4,1), 0.4, 0.2) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p6">// modulating the bandwidth</p>
<p class="p4">{ <span class="s3">BPF</span>.ar(<span class="s3">WhiteNoise</span>.ar, <span class="s3">3000</span>, MouseX.kr(0.01,0.7,1), 0.4) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p3">Resonant Low Pass, High Pass, Band Pass</p>
<p class="p7"><br></p>
<p class="p3"><span class="s7"><a href="Filters/RLPF.html">RLPF</a></span>, <a href="Filters/RHPF.html"><span class="s9">RHPF</span></a> - 12 dB / octave</p>
<p class="p3">arguments: in, freq, rq, mul, add</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">RLPF</span>.ar(<span class="s3">WhiteNoise</span>.ar, <span class="s3">MouseX</span>.kr(1e2,2e4,1), 0.2, 0.2) }.scope(1);</p>
<p class="p4">{ <span class="s3">RHPF</span>.ar(<span class="s3">WhiteNoise</span>.ar, <span class="s3">MouseX</span>.kr(1e2,2e4,1), 0.2, 0.2) }.scope(1);</p>
<p class="p4">{ <span class="s3">RLPF</span>.ar(<span class="s3">Saw</span>.ar(100), <span class="s3">MouseX</span>.kr(1e2,2e4,1), 0.2, 0.2) }.scope(1);</p>
<p class="p4">{ <span class="s3">RHPF</span>.ar(<span class="s3">Saw</span>.ar(100), <span class="s3">MouseX</span>.kr(1e2,2e4,1), 0.2, 0.2) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p3"><span class="s7"><a href="Filters/Resonz.html">Resonz</a></span> - resonant band pass filter with uniform amplitude</p>
<p class="p3">arguments: in, freq, rq, mul, add</p>
<p class="p7"><br></p>
<p class="p6">// modulate frequency</p>
<p class="p4">{ <span class="s3">Resonz</span>.ar(<span class="s3">WhiteNoise</span>.ar(0.5), <span class="s3">XLine</span>.kr(1000,8000,10), 0.05) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p6">// modulate bandwidth</p>
<p class="p4">{ <span class="s3">Resonz</span>.ar(<span class="s3">WhiteNoise</span>.ar(0.5), 2000, <span class="s3">XLine</span>.kr(1, 0.001, 8)) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p6">// modulate bandwidth opposite direction</p>
<p class="p4">{ <span class="s3">Resonz</span>.ar(<span class="s3">WhiteNoise</span>.ar(0.5), 2000, <span class="s3">XLine</span>.kr(0.001, 1, 8)) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p3"><span class="s7"><a href="Filters/Ringz.html">Ringz</a></span> - ringing filter.</p>
<p class="p3">Internally it is the same as Resonz but the bandwidth is expressed as a ring time.</p>
<p class="p3">arguments: in, frequency, ring time, mul, add</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Ringz</span>.ar(<span class="s3">Dust</span>.ar(3, 0.3), 2000, 2) }.scope(1, zoom:4);</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Ringz</span>.ar(<span class="s3">WhiteNoise</span>.ar(0.005), 2000, 0.5) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p6">// modulate frequency</p>
<p class="p4">{ <span class="s3">Ringz</span>.ar(<span class="s3">WhiteNoise</span>.ar(0.005), <span class="s3">XLine</span>.kr(100,3000,10), 0.5) }.scope(1, zoom:4);</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Ringz</span>.ar(<span class="s3">Impulse</span>.ar(6, 0, 0.3),<span class="Apple-converted-space">  </span><span class="s3">XLine</span>.kr(100,3000,10), 0.5) }.scope(1, zoom:4);</p>
<p class="p7"><br></p>
<p class="p6">// modulate ring time</p>
<p class="p4">{ <span class="s3">Ringz</span>.ar(<span class="s3">Impulse</span>.ar(6, 0, 0.3), 2000, <span class="s3">XLine</span>.kr(0.04, 4, 8)) }.scope(1, zoom:4);</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p3">Simpler Filters</p>
<p class="p3">6 dB / octave</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">OnePole</span>.ar(<span class="s3">WhiteNoise</span>.ar(0.5), <span class="s3">MouseX</span>.kr(-0.99, 0.99)) }.scope(1);</p>
<p class="p4">{ <span class="s3">OneZero</span>.ar(<span class="s3">WhiteNoise</span>.ar(0.5), <span class="s3">MouseX</span>.kr(-0.49, 0.49)) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p3">NonLinear Filters</p>
<p class="p5"><span class="s4"><a href="Filters/Median.html">Median</a></span><span class="s5">, <a href="Synth control/Slew.html"><span class="s10">Slew</span></a></span></p>
<p class="p2"><br></p>
<p class="p6">// a signal with impulse noise.</p>
<p class="p4">{ <span class="s3">Saw</span>.ar(500, 0.1) + <span class="s3">Dust2</span>.ar(100, 0.9) }.scope(1);</p>
<p class="p6">// after applying median filter</p>
<p class="p4">{ <span class="s3">Median</span>.ar(3, <span class="s3">Saw</span>.ar(500, 0.1) + <span class="s3">Dust2</span>.ar(100, 0.9)) }.scope(1);</p>
<p class="p2"><br></p>
<p class="p6">// a signal with impulse noise.</p>
<p class="p4">{ <span class="s3">Saw</span>.ar(500, 0.1) + <span class="s3">Dust2</span>.ar(100, 0.9) }.scope(1);</p>
<p class="p6">// after applying slew rate limiter</p>
<p class="p4">{ <span class="s3">Slew</span>.ar(<span class="s3">Saw</span>.ar(500, 0.1) + <span class="s3">Dust2</span>.ar(100, 0.9),1000,1000) }.scope(1);</p>
<p class="p2"><br></p>
<p class="p7"><br></p>
<p class="p3">Formant Filter<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="s7"><a href="Filters/Formlet.html">Formlet</a></span> - A filter whose impulse response is similar to a FOF grain.</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Formlet</span>.ar(<span class="s3">Impulse</span>.ar(<span class="s3">MouseX</span>.kr(2,300,1), 0, 0.4), 800, 0.01, 0.1) }.scope(1, zoom:4);</p>
<p class="p7"><br></p>
<p class="p3">Klank - resonant filter bank</p>
<p class="p3">arguments:<span class="Apple-converted-space">  </span>`[ frequencies, amplitudes, ring times ], mul, add</p>
<p class="p8"><br></p>
<p class="p4">{ <span class="s3">Klank</span>.ar(`[[200, 671, 1153, 1723], <span class="s3">nil</span>, [1, 1, 1, 1]], <span class="s3">Impulse</span>.ar(2, 0, 0.1)) }.play;</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Klank</span>.ar(`[[200, 671, 1153, 1723], <span class="s3">nil</span>, [1, 1, 1, 1]], <span class="s3">Dust</span>.ar(8, 0.1)) }.play;</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Klank</span>.ar(`[[200, 671, 1153, 1723], <span class="s3">nil</span>, [1, 1, 1, 1]], <span class="s3">PinkNoise</span>.ar(0.007)) }.play;</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Klank</span>.ar(`[ {exprand(200, 4000)}.dup(12), <span class="s3">nil</span>, <span class="s3">nil</span> ], <span class="s3">PinkNoise</span>.ar(0.007)) }.scope(1);</p>
<p class="p8"><br></p>
<p class="p4">{ <span class="s3">Klank</span>.ar(`[ (1..13)*200, <span class="s3">1/</span>(1..13), <span class="s3">nil</span> ], <span class="s3">PinkNoise</span>.ar(0.01)) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Klank</span>.ar(`[ (1,3..13)*200, <span class="s3">1/</span>(1,3..13), <span class="s3">nil</span> ], <span class="s3">PinkNoise</span>.ar(0.01)) }.scope(1);</p>
<p class="p8"><br></p>
<p class="p8"><br></p>
<p class="p3"><b>Distortion</b></p>
<p class="p2"><br></p>
<p class="p3">abs, max, squared, cubed</p>
<p class="p8"><br></p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(300, 0, <span class="s3">0.2</span>) }.scope(1);</p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(300, 0, <span class="s3">0.2</span>).abs }.scope(1);</p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(300, 0, <span class="s3">0.2</span>).max(0) }.scope(1);</p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(300, 0).squared * 0.2 }.scope(1);</p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(300, 0).cubed * 0.2 }.scope(1);</p>
<p class="p7"><br></p>
<p class="p3">distort, softclip, clip2, fold2, wrap2,<span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(300, 0, <span class="s3">MouseX</span>.kr(0.1,80,1)).distort * 0.2 }.scope(1);</p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(300, 0, <span class="s3">MouseX</span>.kr(0.1,80,1)).softclip * 0.2 }.scope(1);</p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(300, 0, <span class="s3">MouseX</span>.kr(0.1,80,1)).clip2(1) * 0.2 }.scope(1);</p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(300, 0, <span class="s3">MouseX</span>.kr(0.1,80,1)).fold2(1) * 0.2 }.scope(1);</p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(300, 0, <span class="s3">MouseX</span>.kr(0.1,80,1)).wrap2(1) * 0.2 }.scope(1);</p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(300, 0, <span class="s3">MouseX</span>.kr(0.1,80,1)).wrap2(1) * 0.2 }.scope(1);</p>
<p class="p8"><br></p>
<p class="p3">scaleneg</p>
<p class="p8"><br></p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(200, 0, <span class="s3">0.2</span>).scaleneg(<span class="s3">MouseX</span>.kr(-1,1)) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p3">waveshaping by phase modulating a 0 Hz sine oscillator</p>
<p class="p3">(currently there is a limit of 8pi)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> in;</p>
<p class="p4"><span class="Apple-tab-span">	</span>in = <span class="s3">SinOsc</span>.ar(300, 0, <span class="s3">MouseX</span>.kr(0.1,8pi,1));</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span><span class="s3">SinOsc</span><span class="s5">.ar(0, in, 0.2); </span>// 0 Hz sine oscillator</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p5"><span class="s4"><a href="Oscillators/Shaper.html">Shaper</a></span><span class="s5"><span class="Apple-converted-space"> </span></span></p>
<p class="p3">input is used to look up a value in a table.</p>
<p class="p3">Chebyshev polynomials are typically used to fill the table.</p>
<p class="p2"><br></p>
<p class="p9"><span class="s11"><img src="attachments/Tour_of_UGens/chebyshevpolynomials.png" alt="attachments/Tour_of_UGens/chebyshevpolynomials.png"></span></p>
<p class="p7"><br></p>
<p class="p4">s.sendMsg(<span class="s8">\b_alloc</span>, 80, 1024); <span class="s6">// allocate table</span></p>
<p class="p6">// fill with chebyshevs</p>
<p class="p4">s.listSendMsg([<span class="s8">\b_gen</span>, 80, <span class="s8">\cheby</span>, 7] ++ {1.0.rand2.squared}.dup(6));</p>
<p class="p10"><br></p>
<p class="p4">{ <span class="s3">Shaper</span>.ar(80, <span class="s3">SinOsc</span>.ar(600, 0, <span class="s3">MouseX</span>.kr(0,1))) * 0.3; }.scope(1);</p>
<p class="p10"><br></p>
<p class="p4">s.listSendMsg([<span class="s8">\b_gen</span>, 80, <span class="s8">\cheby</span>, 7] ++ {1.0.rand2.squared}.dup(6));</p>
<p class="p4">s.listSendMsg([<span class="s8">\b_gen</span>, 80, <span class="s8">\cheby</span>, 7] ++ {1.0.rand2.squared}.dup(6));</p>
<p class="p7"><br></p>
<p class="p3"><b>Panning</b></p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p4">s = <span class="s3">Server</span>.internal;</p>
<p class="p4"><span class="s3">Server</span>.default = s;</p>
<p class="p4">s.quit;</p>
<p class="p4">s.options.numOutputBusChannels = 8;</p>
<p class="p4">s.options.numInputBusChannels = 8;</p>
<p class="p4">s.boot;</p>
<p class="p4">)</p>
<p class="p2"><br></p>
<p class="p3"><span class="s7"><a href="Multichannel/Panners/Pan2.html">Pan2</a></span> - equal power stereo pan a mono source</p>
<p class="p3">arguments: in, pan position, level</p>
<p class="p3">pan controls typically range from -1 to +1</p>
<p class="p2"><br></p>
<p class="p4">{ <span class="s3">Pan2</span>.ar(<span class="s3">BrownNoise</span>.ar, <span class="s3">MouseX</span>.kr(-1,1), 0.3) }.scope(2);</p>
<p class="p4">{ <span class="s3">Pan2</span>.ar(<span class="s3">BrownNoise</span>.ar, <span class="s3">SinOsc</span>.kr(0.2), 0.3) }.scope(2);</p>
<p class="p7"><br></p>
<p class="p3"><span class="s7"><a href="Multichannel/Panners/LinPan2.html">LinPan2</a></span> - linear pan a mono source (not equal power)</p>
<p class="p3">arguments: in, pan position, level</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">LinPan2</span>.ar(<span class="s3">BrownNoise</span>.ar, <span class="s3">MouseX</span>.kr(-1,1), 0.3) }.scope(2);</p>
<p class="p4">{ <span class="s3">LinPan2</span>.ar(<span class="s3">BrownNoise</span>.ar, <span class="s3">SinOsc</span>.kr(0.2), 0.3) }.scope(2);</p>
<p class="p7"><br></p>
<p class="p3">Balance2 - balance a stereo source</p>
<p class="p3">arguments: left in, right in, pan position, level</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Balance2</span>.ar(<span class="s3">BrownNoise</span>.ar, <span class="s3">BrownNoise</span>.ar, <span class="s3">MouseX</span>.kr(-1,1), 0.3) }.scope(2);</p>
<p class="p7"><br></p>
<p class="p3"><span class="s7"><a href="Multichannel/Panners/Pan4.html">Pan4</a></span> - equal power quad panner</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Pan4</span>.ar(<span class="s3">BrownNoise</span>.ar, <span class="s3">MouseX</span>.kr(-1,1), <span class="s3">MouseY</span>.kr(1,-1), 0.3) }.scope(4);</p>
<p class="p7"><br></p>
<p class="p3"><span class="s7"><a href="Multichannel/Panners/PanAz.html">PanAz</a></span> - azimuth panner to any number of channels</p>
<p class="p3">arguments: num channels, in, pan position, level, width</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">PanAz</span>.ar(5, <span class="s3">BrownNoise</span>.ar, <span class="s3">MouseX</span>.kr(-1,1), 0.3, 2) }.scope(5);</p>
<p class="p7"><br></p>
<p class="p6">// change width to 3</p>
<p class="p4">{ <span class="s3">PanAz</span>.ar(5, <span class="s3">BrownNoise</span>.ar, <span class="s3">MouseX</span>.kr(-1,1), 0.3, 3) }.scope(5);</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p3"><span class="s7"><a href="Multichannel/Panners/XFade2.html">XFade2</a></span> - equal power cross fade between two inputs</p>
<p class="p3">arguments: in1, in2, crossfade, level</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">XFade2</span>.ar(<span class="s3">BrownNoise</span>.ar, SinOsc.ar(500), <span class="s3">MouseX</span>.kr(-1,1), 0.3) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p10"><br></p>
<p class="p3"><span class="s7"><a href="Multichannel/Panners/PanB2.html">PanB2</a></span> and <a href="Multichannel/Panners/DecodeB2.html"><span class="s9">DecodeB2</span></a> - 2D ambisonics panner and decoder</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> w, x, y, p, lf, rf, rr, lr;</p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>p = <span class="s3">BrownNoise</span>.ar; <span class="s6">// source</span></p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// B-format encode</p>
<p class="p4"><span class="Apple-tab-span">	</span>#w, x, y = <span class="s3">PanB2</span>.ar(p, <span class="s3">MouseX</span>.kr(-1,1), 0.3);<span class="Apple-converted-space"> </span></p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// B-format decode to quad. outputs in clockwise order</p>
<p class="p4"><span class="Apple-tab-span">	</span>#lf, rf, rr, lr = <span class="s3">DecodeB2</span>.ar(4, w, x, y);</p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span>[lf, rf, lr, rr] </span>// reorder to my speaker arrangement: Lf Rf Lr Rr</p>
<p class="p4">}.scope(4);</p>
<p class="p11">)</p>
<p class="p8"><br></p>
<p class="p3"><span class="s7"><a href="Multichannel/Panners/Rotate2.html">Rotate2</a></span> - rotate a sound field of ambisonic or even stereo sound.</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// rotation of stereo sound via mouse<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> x, y;</p>
<p class="p4"><span class="Apple-tab-span">	</span>x = <span class="s3">Mix</span>.fill(4, { <span class="s3">LFSaw</span>.ar(200 + 2.0.rand2, 0, 0.1) }); <span class="s6">// left in</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>y = <span class="s3">WhiteNoise</span>.ar * <span class="s3">LFPulse</span>.kr(3,0,0.7,0.2); <span class="s6">// right in</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>#x, y = <span class="s3">Rotate2</span>.ar(x, y, <span class="s3">MouseX</span>.kr(0,2));</p>
<p class="p4"><span class="Apple-tab-span">	</span>[x,y]</p>
<p class="p4">}.scope(2);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p3"><b>Reverbs</b></p>
<p class="p5"><span class="s4"><a href="Reverbs/FreeVerb.html">FreeVerb</a></span><span class="s5"><span class="Apple-converted-space"> </span></span></p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// play with the room size</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> x;</p>
<p class="p4"><span class="Apple-tab-span">	</span>x = <span class="s3">Klank</span>.ar(`[[200, 671, 1153, 1723], <span class="s3">nil</span>, [1, 1, 1, 1]], <span class="s3">Dust</span>.ar(2, 0.1));</p>
<p class="p4"><span class="Apple-tab-span">	</span>x = Pan2.ar(x, -0.2);</p>
<p class="p4"><span class="Apple-tab-span">	</span>x = [x[0], DelayC.ar(x[1], 0.01, 0.01)]; // de-correlate</p>
<p class="p4"><span class="Apple-tab-span">	</span>FreeVerb.ar(x, 0.75, 0.9, 0.4);</p>
<p class="p4">}.scope;</p>
<p class="p3">)</p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Reverbs/GVerb.html">GVerb</a></span></p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// play with the room size</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> x;</p>
<p class="p4"><span class="Apple-tab-span">	</span>x = <span class="s3">Klank</span>.ar(`[[200, 671, 1153, 1723], <span class="s3">nil</span>, [1, 1, 1, 1]], <span class="s3">Dust</span>.ar(2, 0.1));</p>
<p class="p4"><span class="Apple-tab-span">	</span>GVerb.ar(x, 105, 5, 0.7, 0.8, 60, 0.1, 0.5, 0.4) + x;</p>
<p class="p4">}.scope;</p>
<p class="p3">)</p>
<p class="p2"><br></p>
<p class="p3"><b>Delays and Buffer UGens</b></p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Delays/DelayN.html">DelayN</a></span><span class="s5">, <a href="Delays/DelayL.html"><span class="s4">DelayL</span></a>, <a href="Delays/DelayC.html"><span class="s4">DelayC</span></a></span></p>
<p class="p3">simple delays</p>
<p class="p3">N - no interpolation</p>
<p class="p3">L - linear interpolation</p>
<p class="p3">C - cubic interpolation</p>
<p class="p3">arguments: in, maximum delay time, current delay time, mul, add</p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p6">// Dust randomly triggers Decay to create an exponential<span class="Apple-converted-space"> </span></p>
<p class="p6">// decay envelope for the WhiteNoise input source</p>
<p class="p4">{</p>
<p class="p4">z = <span class="s3">Decay</span>.ar(<span class="s3">Dust</span>.ar(1,0.5), 0.3, <span class="s3">WhiteNoise</span>.ar);</p>
<p class="p6"><span class="s3">DelayN</span>.ar(z, 0.1, 0.1, 1, z); // input is mixed with delay via the add input</p>
<p class="p4">}.scope(1, zoom: 4)</p>
<p class="p4">)</p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4">z = <span class="s3">Decay</span>.ar(<span class="s3">Impulse</span>.ar(2,0,0.4), 0.3, <span class="s3">WhiteNoise</span>.ar);</p>
<p class="p6"><span class="s3">DelayL</span>.ar(z, 0.3, MouseX.kr(0,0.3), 1, z); // input is mixed with delay via the add input</p>
<p class="p4">}.scope(1, zoom: 4)</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p5"><span class="s4"><a href="Delays/CombN.html">CombN</a></span><span class="s5">, <a href="Delays/CombL.html"><span class="s4">CombL</span></a>, <a href="Delays/CombC.html"><span class="s4">CombC</span></a></span></p>
<p class="p3">feedback delays</p>
<p class="p3">arguments: in, maximum delay time, current delay time, echo decay time, mul, add</p>
<p class="p2"><br></p>
<p class="p12"><br></p>
<p class="p6">// used as an echo.<span class="Apple-converted-space"> </span></p>
<p class="p4">{ <span class="s3">CombN</span>.ar(<span class="s3">Decay</span>.ar(<span class="s3">Dust</span>.ar(1,0.5), 0.2, <span class="s3">WhiteNoise</span>.ar), 0.2, 0.2, 3) }.scope(1, zoom:4);</p>
<p class="p7"><br></p>
<p class="p6">// Comb used as a resonator. The resonant fundamental is equal to<span class="Apple-converted-space"> </span></p>
<p class="p6">// reciprocal of the delay time.</p>
<p class="p4">{ <span class="s3">CombN</span>.ar(<span class="s3">WhiteNoise</span>.ar(0.02), 0.01, <span class="s3">XLine</span>.kr(0.0001, 0.01, 20), 0.2) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">CombL</span>.ar(<span class="s3">WhiteNoise</span>.ar(0.02), 0.01, <span class="s3">XLine</span>.kr(0.0001, 0.01, 20), 0.2) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">CombC</span>.ar(<span class="s3">WhiteNoise</span>.ar(0.02), 0.01, <span class="s3">XLine</span>.kr(0.0001, 0.01, 20), 0.2) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p6">// with negative feedback:</p>
<p class="p4">{ <span class="s3">CombN</span>.ar(<span class="s3">WhiteNoise</span>.ar(0.02), 0.01, <span class="s3">XLine</span>.kr(0.0001, 0.01, 20), -0.2) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">CombL</span>.ar(<span class="s3">WhiteNoise</span>.ar(0.02), 0.01, <span class="s3">XLine</span>.kr(0.0001, 0.01, 20), -0.2) }.scope(1);</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">CombC</span>.ar(<span class="s3">WhiteNoise</span>.ar(0.02), 0.01, <span class="s3">XLine</span>.kr(0.0001, 0.01, 20), -0.2) }.scope(1);</p>
<p class="p2"><br></p>
<p class="p4">{ <span class="s3">CombC</span>.ar(<span class="s3">Decay</span>.ar(<span class="s3">Dust</span>.ar(1,0.1), 0.2, <span class="s3">WhiteNoise</span>.ar), 1/100, 1/100, 3) }.play;</p>
<p class="p4">{ <span class="s3">CombC</span>.ar(<span class="s3">Decay</span>.ar(<span class="s3">Dust</span>.ar(1,0.1), 0.2, <span class="s3">WhiteNoise</span>.ar), 1/200, 1/200, 3) }.play;</p>
<p class="p4">{ <span class="s3">CombC</span>.ar(<span class="s3">Decay</span>.ar(<span class="s3">Dust</span>.ar(1,0.1), 0.2, <span class="s3">WhiteNoise</span>.ar), 1/300, 1/300, 3) }.play;</p>
<p class="p4">{ <span class="s3">CombC</span>.ar(<span class="s3">Decay</span>.ar(<span class="s3">Dust</span>.ar(1,0.1), 0.2, <span class="s3">WhiteNoise</span>.ar), 1/400, 1/400, 3) }.scope(1, zoom:4);</p>
<p class="p2"><br></p>
<p class="p7"><br></p>
<p class="p5"><span class="s4"><a href="Delays/AllpassN.html">AllpassN</a></span><span class="s5">, <a href="Delays/AllpassL.html"><span class="s4">AllpassL</span></a>, <a href="Delays/AllpassC.html"><span class="s4">AllpassC</span></a></span></p>
<p class="p3">allpass delay</p>
<p class="p3">arguments: in, maximum delay time, current delay time, echo decay time, mul, add</p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> z;</p>
<p class="p4"><span class="Apple-tab-span">	</span>z = <span class="s3">Decay</span>.ar(<span class="s3">Dust</span>.ar(1,0.5), 0.1, <span class="s3">WhiteNoise</span>.ar);</p>
<p class="p4"><span class="Apple-tab-span">	</span>8.do { z = <span class="s3">AllpassL</span>.ar(z, 0.04, 0.04.rand, 2) };</p>
<p class="p4"><span class="Apple-tab-span">	</span>z</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p5"><a href="Playback and Recording/PlayBuf.html"><b>PlayBuf</b></a></p>
<p class="p3">buffer playback</p>
<p class="p3">arguments: numChannels, buffer number, rate, trigger, start pos, loop</p>
<p class="p2"><br></p>
<p class="p6">// read sound</p>
<p class="p13"><span class="s5">b = </span><span class="s3">Buffer</span><span class="s5">.read(s, </span>"sounds/a11wlk01.wav"<span class="s5">);</span></p>
<p class="p2"><br></p>
<p class="p4">{ SinOsc.ar(800 + (700 * <span class="s3">PlayBuf</span>.ar(1,b, <span class="s3">BufRateScale</span>.kr(b),<span class="Apple-converted-space">  </span>loop:1)),0,0.3) }.scope(1);</p>
<p class="p2"><br></p>
<p class="p6">// loop is true</p>
<p class="p4">{ <span class="s3">PlayBuf</span>.ar(1,b, <span class="s3">BufRateScale</span>.kr(b), loop:1) }.scope(1);</p>
<p class="p14"><br></p>
<p class="p7"><br></p>
<p class="p6">// trigger one shot on each pulse</p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> trig;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trig = <span class="s3">Impulse</span>.kr(2.0);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">PlayBuf</span>.ar(1,b,<span class="s3">BufRateScale</span>.kr(b),trig,0,0);</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p6">// trigger one shot on each pulse</p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> trig;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trig = <span class="s3">Impulse</span>.kr(<span class="s3">XLine</span>.kr(0.1,100,30));</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">PlayBuf</span>.ar(1,b,<span class="s3">BufRateScale</span>.kr(b),trig,5000,0);</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p6">// mouse control of trigger rate and startpos</p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> trig;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trig = <span class="s3">Impulse</span>.kr(<span class="s3">MouseY</span>.kr(0.5,200,1));</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">PlayBuf</span>.ar(1,b,<span class="s3">BufRateScale</span>.kr(b),trig,<span class="s3">MouseX</span>.kr(0,<span class="s3">BufFrames</span>.kr(b)),1)</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p6">// accelerating pitch</p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> rate;</p>
<p class="p4"><span class="Apple-tab-span">	</span>rate = <span class="s3">XLine</span>.kr(0.1,100,60);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">PlayBuf</span>.ar(1, b, rate, 1.0,0.0, 1.0)</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p6">// sine wave control of playback rate. negative rate plays backwards</p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> rate;</p>
<p class="p4"><span class="Apple-tab-span">	</span>rate = <span class="s3">FSinOsc</span>.kr(<span class="s3">XLine</span>.kr(0.2,8,30), 0, 3, 0.6);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">PlayBuf</span>.ar(1,b,<span class="s3">BufRateScale</span>.kr(b)*rate,1,0,1)</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p6">// zig zag around sound<span class="Apple-converted-space"> </span></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> rate;</p>
<p class="p4"><span class="Apple-tab-span">	</span>rate = <span class="s3">LFNoise2</span>.kr(<span class="s3">XLine</span>.kr(1,20,60), 2);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">PlayBuf</span>.ar(1,b,<span class="s3">BufRateScale</span>.kr(b) * rate,1,0,1)</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p12"><br></p>
<p class="p2"><br></p>
<p class="p6">// free sound</p>
<p class="p4">b.free;</p>
<p class="p7"><br></p>
<p class="p3"><b>Granular Synthesis.</b></p>
<p class="p7"><br></p>
<p class="p5"><a href="Playback and Recording/TGrains.html"><b>TGrains</b></a></p>
<p class="p3">granulation of a buffer</p>
<p class="p3">arguments: numChannels, trigger, buffer number, rate, center pos, dur, pan, amp, interpolation</p>
<p class="p2"><br></p>
<p class="p6">// read sound</p>
<p class="p13"><span class="s5">b = </span><span class="s3">Buffer</span><span class="s5">.read(s, </span>"sounds/a11wlk01.wav"<span class="s5">);</span></p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> trate, dur;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trate = <span class="s3">MouseY</span>.kr(2,200,1);</p>
<p class="p4"><span class="Apple-tab-span">	</span>dur = 4 / trate;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">TGrains</span>.ar(2, <span class="s3">Impulse</span>.ar(trate), b, 1, <span class="s3">MouseX</span>.kr(0,<span class="s3">BufDur</span>.kr(b)), dur, 0, 0.1, 2);</p>
<p class="p4">}.scope(2, zoom: 4);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> trate, dur, clk, pos, pan;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trate = <span class="s3">MouseY</span>.kr(8,120,1);</p>
<p class="p4"><span class="Apple-tab-span">	</span>dur = 12 / trate;</p>
<p class="p4"><span class="Apple-tab-span">	</span>clk = <span class="s3">Impulse</span>.kr(trate);</p>
<p class="p4"><span class="Apple-tab-span">	</span>pos = <span class="s3">MouseX</span>.kr(0,<span class="s3">BufDur</span>.kr(b)) + <span class="s3">TRand</span>.kr(0, 0.01, clk);</p>
<p class="p4"><span class="Apple-tab-span">	</span>pan = <span class="s3">WhiteNoise</span>.kr(0.6);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">TGrains</span>.ar(2, clk, b, 1, pos, dur, pan, 0.1);</p>
<p class="p4">}.scope(2, zoom: 4);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p6">// 4 channels</p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> trate, dur, clk, pos, pan;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trate = <span class="s3">MouseY</span>.kr(8,120,1);</p>
<p class="p4"><span class="Apple-tab-span">	</span>dur = 12 / trate;</p>
<p class="p4"><span class="Apple-tab-span">	</span>clk = <span class="s3">Impulse</span>.kr(trate);</p>
<p class="p4"><span class="Apple-tab-span">	</span>pos = <span class="s3">MouseX</span>.kr(0,<span class="s3">BufDur</span>.kr(b)) + <span class="s3">TRand</span>.kr(0, 0.01, clk);</p>
<p class="p4"><span class="Apple-tab-span">	</span>pan = <span class="s3">WhiteNoise</span>.kr(0.6);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">TGrains</span>.ar(4, clk, b, 1, pos, dur, pan, 0.1);</p>
<p class="p4">}.scope(4, zoom: 4);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> trate, dur, clk, pos, pan;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trate = <span class="s3">MouseY</span>.kr(8,120,1);</p>
<p class="p4"><span class="Apple-tab-span">	</span>dur = 4 / trate;</p>
<p class="p4"><span class="Apple-tab-span">	</span>clk = <span class="s3">Dust</span>.kr(trate);</p>
<p class="p4"><span class="Apple-tab-span">	</span>pos = <span class="s3">MouseX</span>.kr(0,<span class="s3">BufDur</span>.kr(b)) + <span class="s3">TRand</span>.kr(0, 0.01, clk);</p>
<p class="p4"><span class="Apple-tab-span">	</span>pan = <span class="s3">WhiteNoise</span>.kr(0.6);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">TGrains</span>.ar(2, clk, b, 1, pos, dur, pan, 0.1);</p>
<p class="p4">}.scope(2, zoom: 4);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> trate, dur, clk, pos, pan;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trate = <span class="s3">LinExp</span>.kr(<span class="s3">LFTri</span>.kr(<span class="s3">MouseY</span>.kr(0.1,2,1)),-1,1,8,120);</p>
<p class="p4"><span class="Apple-tab-span">	</span>dur = 12 / trate;</p>
<p class="p4"><span class="Apple-tab-span">	</span>clk = <span class="s3">Impulse</span>.ar(trate);</p>
<p class="p4"><span class="Apple-tab-span">	</span>pos = <span class="s3">MouseX</span>.kr(0,<span class="s3">BufDur</span>.kr(b));</p>
<p class="p4"><span class="Apple-tab-span">	</span>pan = <span class="s3">WhiteNoise</span>.kr(0.6);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">TGrains</span>.ar(2, clk, b, 1, pos, dur, pan, 0.1);</p>
<p class="p4">}.scope(2, zoom: 4);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> trate, dur, clk, pos, pan;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trate = 12;</p>
<p class="p4"><span class="Apple-tab-span">	</span>dur = <span class="s3">MouseY</span>.kr(0.2,24,1) / trate;</p>
<p class="p4"><span class="Apple-tab-span">	</span>clk = <span class="s3">Impulse</span>.kr(trate);</p>
<p class="p4"><span class="Apple-tab-span">	</span>pos = <span class="s3">MouseX</span>.kr(0,<span class="s3">BufDur</span>.kr(b)) + <span class="s3">TRand</span>.kr(0, 0.01, clk);</p>
<p class="p4"><span class="Apple-tab-span">	</span>pan = <span class="s3">WhiteNoise</span>.kr(0.6);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">TGrains</span>.ar(2, clk, b, 1, pos, dur, pan, 0.1);</p>
<p class="p4">}.scope(2, zoom: 4);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> trate, dur, clk, pos, pan;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trate = 100;</p>
<p class="p4"><span class="Apple-tab-span">	</span>dur = 8 / trate;</p>
<p class="p4"><span class="Apple-tab-span">	</span>clk = <span class="s3">Impulse</span>.kr(trate);</p>
<p class="p4"><span class="Apple-tab-span">	</span>pos = <span class="s3">Integrator</span>.kr(<span class="s3">BrownNoise</span>.kr(0.001));</p>
<p class="p4"><span class="Apple-tab-span">	</span>pan = <span class="s3">WhiteNoise</span>.kr(0.6);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">TGrains</span>.ar(2, clk, b, 1, pos, dur, pan, 0.1);</p>
<p class="p4">}.scope(2, zoom: 4);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> trate, dur, clk, pos, pan;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trate = <span class="s3">MouseY</span>.kr(1,400,1);</p>
<p class="p4"><span class="Apple-tab-span">	</span>dur = 8 / trate;</p>
<p class="p4"><span class="Apple-tab-span">	</span>clk = <span class="s3">Impulse</span>.kr(trate);</p>
<p class="p4"><span class="Apple-tab-span">	</span>pos = <span class="s3">MouseX</span>.kr(0,<span class="s3">BufDur</span>.kr(b));</p>
<p class="p4"><span class="Apple-tab-span">	</span>pan = <span class="s3">WhiteNoise</span>.kr(0.8);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">TGrains</span>.ar(2, clk, b, 2 ** <span class="s3">WhiteNoise</span>.kr(2), pos, dur, pan, 0.1);</p>
<p class="p4">}.scope(2, zoom: 4);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> trate, dur;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trate = <span class="s3">MouseY</span>.kr(2,120,1);</p>
<p class="p4"><span class="Apple-tab-span">	</span>dur = 1.2 / trate;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">TGrains</span>.ar(2, <span class="s3">Impulse</span>.ar(trate), b, (1.2 ** <span class="s3">WhiteNoise</span>.kr(3).round(1)), <span class="s3">MouseX</span>.kr(0,<span class="s3">BufDur</span>.kr(b)), dur, <span class="s3">WhiteNoise</span>.kr(0.6), 0.1);</p>
<p class="p4">}.scope(2, zoom: 4);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p6">// free sound</p>
<p class="p4">b.free;</p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Generators/Granular/GrainSin.html">GrainSin</a></span></p>
<p class="p3">arguments: numChannels, trigger, dur, freq, pan, envbufnum</p>
<p class="p7"><br></p>
<p class="p15"><span class="s5">( </span>// using default window</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s12">var</span> trigrate, winsize, trig;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trigrate = <span class="s12">MouseX</span>.kr(2, 120);</p>
<p class="p4"><span class="Apple-tab-span">	</span>winsize = trigrate.reciprocal;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trig = <span class="s12">Impulse</span>.ar(trigrate);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s12">GrainSin</span>.ar(2, trig, winsize, <span class="s12">TRand</span>.ar(440.0, 880.0, trig), <span class="s12">LFNoise1</span>.kr(0.2),</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>-1, 0.2)</p>
<p class="p4">}.scope(2, zoom: 4);</p>
<p class="p4">)</p>
<p class="p2"><br></p>
<p class="p16"><span class="s13">b =</span> <span class="s12">Buffer</span>.sendCollection(s, <span class="s12">Env</span>([0, 1, 0], [0.5, 0.5], [8, -8]).discretize, 1);</p>
<p class="p2"><br></p>
<p class="p15"><span class="s5">( </span>// using user supplied window</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s12">var</span> trigrate, winsize, trig;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trigrate = <span class="s12">MouseX</span>.kr(2, 120);</p>
<p class="p4"><span class="Apple-tab-span">	</span>winsize = trigrate.reciprocal;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trig = <span class="s12">Impulse</span>.ar(trigrate);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s12">GrainSin</span>.ar(2, trig, winsize, <span class="s12">TRand</span>.ar(440.0, 880.0, trig), <span class="s12">LFNoise1</span>.kr(0.2),</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b, 0.2)</p>
<p class="p4">}.scope(2, zoom: 4);</p>
<p class="p4">)</p>
<p class="p2"><br></p>
<p class="p5"><span class="s5">see also <a href="Generators/Granular/GrainFM.html"><span class="s4">GrainFM</span></a>, <a href="Generators/Granular/GrainBuf.html"><span class="s4">GrainBuf</span></a> and <a href="Generators/Granular/GrainIn.html"><span class="s4">GrainIn</span></a></span></p>
<p class="p2"><br></p>
<p class="p3"><b>Control</b></p>
<p class="p2"><br></p>
<p class="p3">Filters for Controls</p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Synth control/Envelopes/Decay.html">Decay</a></span></p>
<p class="p3">triggered exponential decay</p>
<p class="p3">arguments: in, decay time, mul, add</p>
<p class="p2"><br></p>
<p class="p4">{ <span class="s3">WhiteNoise</span>.ar * <span class="s3">Decay</span>.ar(<span class="s3">Impulse</span>.ar(1), 0.9, 0.2) }.scope(1, zoom:4);</p>
<p class="p4">{ <span class="s3">WhiteNoise</span>.ar * <span class="s3">Decay</span>.ar(<span class="s3">Dust</span>.ar(3), 0.9, 0.2) }.scope(1, zoom:4);</p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(<span class="s3">Decay</span>.ar(<span class="s3">Dust</span>.ar(4), 0.5, 1000, 400), 0, 0.2) }.scope(1, zoom:4);</p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Synth control/Envelopes/Decay2.html">Decay2</a></span></p>
<p class="p3">triggered exponential attack and exponential decay<span class="Apple-converted-space"> </span></p>
<p class="p3">arguments: trigger, attack time, decay time, mul, add</p>
<p class="p2"><br></p>
<p class="p4">{ <span class="s3">WhiteNoise</span>.ar * <span class="s3">Decay2</span>.ar(<span class="s3">Impulse</span>.ar(1), 0.2, 0.9, 0.2) }.scope(1, zoom:4);</p>
<p class="p4">{ <span class="s3">WhiteNoise</span>.ar * <span class="s3">Decay2</span>.ar(<span class="s3">Dust</span>.ar(3), 0.2, 0.9, 0.2) }.scope(1, zoom:4);</p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Filters/Lag.html">Lag</a></span></p>
<p class="p3">arguments: trigger, duration</p>
<p class="p2"><br></p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(<span class="s3">Lag</span>.ar(<span class="s3">LFPulse</span>.ar(2,0,0.5,800,400), <span class="s3">MouseX</span>.kr(0,0.5)), 0, 0.2) }.scope(1, zoom:4);</p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Synth control/Integrator.html">Integrator</a></span></p>
<p class="p3">leaky integrator</p>
<p class="p2"><br></p>
<p class="p4">{ <span class="s3">SinOsc</span>.ar(<span class="s3">Integrator</span>.ar(<span class="s3">Dust2</span>.ar(8), 0.99999, 200, 800), 0, 0.2) }.scope(1)</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3">Triggers</p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Triggers/Trig.html">Trig</a></span><span class="s5">, <a href="Triggers/Trig1.html"><span class="s4">Trig1</span></a></span></p>
<p class="p3">timed duration gate</p>
<p class="p3">arguments: trigger, duration</p>
<p class="p2"><br></p>
<p class="p6">// amplitude determined by amplitude of trigger</p>
<p class="p4">{ <span class="s3">Trig</span>.ar(<span class="s3">Dust</span>.ar(2), 0.2) * <span class="s3">FSinOsc</span>.ar(800, 0, 0.4) }.scope(1, zoom:4);</p>
<p class="p6">// amplitude always the same.</p>
<p class="p4">{ <span class="s3">Trig1</span>.ar(<span class="s3">Dust</span>.ar(2), 0.2) * <span class="s3">FSinOsc</span>.ar(800, 0, 0.4) }.scope(1, zoom:4)</p>
<p class="p2"><br></p>
<p class="p5"><span class="s4"><a href="Triggers/TDelay.html">TDelay</a></span></p>
<p class="p3">delays a trigger. only delays one pending trigger at a time.</p>
<p class="p3">arguments: trigger, delay time</p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p4">{<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> trig;</p>
<p class="p4"><span class="Apple-tab-span">	</span>trig = <span class="s3">Dust</span>.ar(2);</p>
<p class="p4"><span class="Apple-tab-span">	</span>[(<span class="s3">Trig1</span>.ar(trig, 0.05) * <span class="s3">FSinOsc</span>.ar(600, 0, 0.2)),</p>
<p class="p4"><span class="Apple-tab-span">	</span>(<span class="s3">Trig1</span>.ar(<span class="s3">TDelay</span>.ar(trig, 0.1), 0.05) * <span class="s3">FSinOsc</span>.ar(800, 0, 0.2))]</p>
<p class="p4">}.scope(2, zoom:4);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p5"><span class="s4"><a href="Synth control/Latch.html">Latch</a></span></p>
<p class="p3">sample and hold</p>
<p class="p3">arguments: in, trigger</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Blip</span>.ar(<span class="s3">Latch</span>.ar(<span class="s3">WhiteNoise</span>.ar, <span class="s3">Impulse</span>.ar(9)) * 400 + 500, 4, 0.2) }.play;</p>
<p class="p4">{ <span class="s3">Blip</span>.ar(<span class="s3">Latch</span>.ar(<span class="s3">SinOsc</span>.ar(0.3), <span class="s3">Impulse</span>.ar(9)) * 400 + 500, 4, 0.2) }.play;</p>
<p class="p7"><br></p>
<p class="p5"><span class="s4"><a href="Triggers/Gate.html">Gate</a></span></p>
<p class="p3">pass or hold</p>
<p class="p3">arguments: in, trigger</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">Blip</span>.ar(<span class="s3">Gate</span>.ar(<span class="s3">LFNoise2</span>.ar(40), <span class="s3">LFPulse</span>.ar(1)) * 400 + 500, 4, 0.2) }.scope(1, zoom:4);</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p5"><span class="s4"><a href="Triggers/PulseCount.html">PulseCount</a></span></p>
<p class="p3">count triggers</p>
<p class="p3">arguments: trigger, reset</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p17">SinOsc<span class="s5">.ar(</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">PulseCount</span>.ar(<span class="s3">Impulse</span>.ar(10), <span class="s3">Impulse</span>.ar(0.4)) * 200,<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0, 0.05</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p4">}.scope(2, zoom:4);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p5"><span class="s4"><a href="Triggers/PulseDivider.html">PulseDivider</a></span></p>
<p class="p3">arguments: trigger, div, start</p>
<p class="p7"><br></p>
<p class="p17">(</p>
<p class="p4">{<span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> p, a, b;</p>
<p class="p4"><span class="Apple-tab-span">	</span>p = <span class="s3">Impulse</span>.ar(8);</p>
<p class="p4"><span class="Apple-tab-span">	</span>a = <span class="s3">SinOsc</span>.ar(1200, 0, <span class="s3">Decay2</span>.ar(p, 0.005, 0.1));</p>
<p class="p4"><span class="Apple-tab-span">	</span>b = <span class="s3">SinOsc</span>.ar(600,<span class="Apple-converted-space">  </span>0, <span class="s3">Decay2</span>.ar(<span class="s3">PulseDivider</span>.ar(p, <span class="s3">MouseX</span>.kr(1,8).round(1)), 0.005, 0.5));</p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>[a, b] * 0.4</p>
<p class="p4">}.scope(2, zoom:4);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p5"><span class="s4"><a href="Synth control/Envelopes/EnvGen.html">EnvGen</a></span></p>
<p class="p3">envelope generator</p>
<p class="p3">envelope is specified using an instance of the Env class.</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">EnvGen</span>.kr(<span class="s3">Env</span>.perc, doneAction:2) * <span class="s3">SinOsc</span>.ar(880,0,0.2) }.play;</p>
<p class="p4">{ <span class="s3">EnvGen</span>.kr(<span class="s3">Env</span>.perc(1,0.005,1,4), doneAction:2) * <span class="s3">SinOsc</span>.ar(880,0,0.2) }.play;</p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">EnvGen</span>.kr(<span class="s3">Env</span>.perc, Impulse.kr(2)) * <span class="s3">SinOsc</span>.ar(880,0,0.2) }.play;</p>
<p class="p4">{ <span class="s3">EnvGen</span>.kr(<span class="s3">Env</span>.perc, Dust.kr(3)) * <span class="s3">SinOsc</span>.ar(880,0,0.2) }.play;</p>
<p class="p7"><br></p>
<p class="p6">// for sustain envelopes a gate is required</p>
<p class="p4">z = { <span class="s3">arg</span> gate=1; <span class="s3">EnvGen</span>.kr(<span class="s3">Env</span>.adsr, gate, doneAction:2) * <span class="s3">SinOsc</span>.ar(880,0,0.2) }.play;</p>
<p class="p4">z.release;</p>
<p class="p2"><br></p>
<p class="p4">(</p>
<p class="p6">// randomly generated envelope</p>
<p class="p4">z = { <span class="s3">arg</span> gate=1;<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> env, n=32;</p>
<p class="p4"><span class="Apple-tab-span">	</span>env = <span class="s3">Env</span>(</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[0]++{1.0.rand.squared}.dup(n-1) ++ [0],<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{rrand(0.005,0.2)}.dup(n),</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">\lin</span>, n-8, 8 );</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">EnvGen</span>.kr(env, gate, doneAction: 2) * <span class="s3">LFTri</span>.ar(220,0,0.4)<span class="Apple-converted-space"> </span></p>
<p class="p4">}.scope(1, zoom:4);</p>
<p class="p4">)</p>
<p class="p4">z.release;</p>
<p class="p2"><br></p>
<p class="p3"><b>Spectral</b></p>
<p class="p2"><br></p>
<p class="p3"><span class="s7"><a href="FFT/FFT.html">FFT</a></span>, <a href="FFT/IFFT.html"><span class="s9">IFFT</span></a> and the phase vocoder ugens.</p>
<p class="p2"><br></p>
<p class="p3">FFT calculates the spectrum of a sound, puts it into a buffer, and outputs a trigger each time the</p>
<p class="p3">buffer is ready to process. The PV UGens process the spectrum when they receive the trigger.</p>
<p class="p3">IFFT converts the spectrum back into sound.</p>
<p class="p2"><br></p>
<p class="p7"><br></p>
<p class="p6">// alloc a buffer for the FFT</p>
<p class="p4">b = <span class="s3">Buffer</span>.alloc(s,2048,1);</p>
<p class="p6">// read a sound</p>
<p class="p13"><span class="s5">c = </span><span class="s3">Buffer</span><span class="s5">.read(s, </span>"sounds/a11wlk01.wav"<span class="s5">);</span></p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p6">// do nothing</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> in, chain;</p>
<p class="p4"><span class="Apple-tab-span">	</span>in = <span class="s3">PlayBuf</span>.ar(1,c, <span class="s3">BufRateScale</span>.kr(c), loop:1);</p>
<p class="p4"><span class="Apple-tab-span">	</span>chain = <span class="s3">FFT</span>(b, in);</p>
<p class="p4"><span class="Apple-tab-span">	</span>0.5 * <span class="s3">IFFT</span>(chain);</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p6">// pass only magnitudes above a threshold</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> in, chain;</p>
<p class="p4"><span class="Apple-tab-span">	</span>in = <span class="s3">PlayBuf</span>.ar(1,c, <span class="s3">BufRateScale</span>.kr(c), loop:1);</p>
<p class="p4"><span class="Apple-tab-span">	</span>chain = <span class="s3">FFT</span>(b, in);</p>
<p class="p4"><span class="Apple-tab-span">	</span>chain = <span class="s3">PV_MagAbove</span>(chain, <span class="s3">MouseX</span>.kr(0.1,512,1));<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span>0.5 * <span class="s3">IFFT</span>(chain);</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p6">// pass only magnitudes below a threshold</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> in, chain;</p>
<p class="p4"><span class="Apple-tab-span">	</span>in = <span class="s3">PlayBuf</span>.ar(1,c, <span class="s3">BufRateScale</span>.kr(c), loop:1);</p>
<p class="p4"><span class="Apple-tab-span">	</span>chain = <span class="s3">FFT</span>(b, in);</p>
<p class="p4"><span class="Apple-tab-span">	</span>chain = <span class="s3">PV_MagBelow</span>(chain, <span class="s3">MouseX</span>.kr(0.1,512,1));<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span>0.5 * <span class="s3">IFFT</span>(chain);</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p6">// brick wall filter.</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> in, chain;</p>
<p class="p4"><span class="Apple-tab-span">	</span>in = <span class="s3">PlayBuf</span>.ar(1,c, <span class="s3">BufRateScale</span>.kr(c), loop:1);</p>
<p class="p4"><span class="Apple-tab-span">	</span>chain = <span class="s3">FFT</span>(b, in);</p>
<p class="p4"><span class="Apple-tab-span">	</span>chain = <span class="s3">PV_BrickWall</span>(chain, <span class="s3">MouseX</span>.kr(-1,1));<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span>0.5 * <span class="s3">IFFT</span>(chain);</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p6">// pass random frequencies. Mouse controls how many to pass.</p>
<p class="p6">// trigger changes the frequencies periodically</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> in, chain;</p>
<p class="p4"><span class="Apple-tab-span">	</span>in = <span class="s3">PlayBuf</span>.ar(1,c, <span class="s3">BufRateScale</span>.kr(c), loop:1);</p>
<p class="p4"><span class="Apple-tab-span">	</span>chain = <span class="s3">FFT</span>(b, in);</p>
<p class="p4"><span class="Apple-tab-span">	</span>chain = <span class="s3">PV_RandComb</span>(chain, <span class="s3">MouseX</span>.kr(0,1), <span class="s3">Impulse</span>.kr(0.4));</p>
<p class="p4"><span class="Apple-tab-span">	</span>0.5 * <span class="s3">IFFT</span>(chain);</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p6">// rectangular comb filter</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> in, chain;</p>
<p class="p4"><span class="Apple-tab-span">	</span>in = <span class="s3">PlayBuf</span>.ar(1,c, <span class="s3">BufRateScale</span>.kr(c), loop:1);</p>
<p class="p4"><span class="Apple-tab-span">	</span>chain = <span class="s3">FFT</span>(b, in);</p>
<p class="p4"><span class="Apple-tab-span">	</span>chain = <span class="s3">PV_RectComb</span>(chain, 8, <span class="s3">MouseY</span>.kr(0,1), <span class="s3">MouseX</span>.kr(0,1));</p>
<p class="p4"><span class="Apple-tab-span">	</span>0.5 * <span class="s3">IFFT</span>(chain);</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p6">// freeze magnitudes</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> in, chain;</p>
<p class="p4"><span class="Apple-tab-span">	</span>in = <span class="s3">PlayBuf</span>.ar(1,c, <span class="s3">BufRateScale</span>.kr(c), loop:1);</p>
<p class="p4"><span class="Apple-tab-span">	</span>chain = <span class="s3">FFT</span>(b, in);</p>
<p class="p4"><span class="Apple-tab-span">	</span>chain = <span class="s3">PV_MagFreeze</span>(chain, <span class="s3">LFPulse</span>.kr(1, 0.75));</p>
<p class="p4"><span class="Apple-tab-span">	</span>0.5 * <span class="s3">IFFT</span>(chain);</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p8"><br></p>
<p class="p3"><b>2. Techniques</b></p>
<p class="p2"><br></p>
<p class="p3"><b>Artificial Space</b></p>
<p class="p3">Building a sense of space into a sound by setting up phase differences between the speakers.</p>
<p class="p8"><br></p>
<p class="p7"><br></p>
<p class="p4">{ <span class="s3">var</span> x; x = <span class="s3">BrownNoise</span>.ar(0.2); [x,x] }.scope(2); <span class="s6">// correlated</span></p>
<p class="p4">{ {<span class="s3">BrownNoise</span>.ar(0.2)}.dup }.scope(2); <span class="s6">// not correlated</span></p>
<p class="p7"><br></p>
<p class="p6">// correlated</p>
<p class="p4">{ <span class="s3">var</span> x; x = <span class="s3">LPF</span>.ar(<span class="s3">BrownNoise</span>.ar(0.2), <span class="s3">MouseX</span>.kr(100,10000)); [x,x] }.scope(2);</p>
<p class="p6">// not correlated</p>
<p class="p4">{ <span class="s3">LPF</span>.ar({<span class="s3">BrownNoise</span>.ar(0.2)}.dup, <span class="s3">MouseX</span>.kr(100,10000)) }.scope(2);</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p6">// correlated</p>
<p class="p4">(</p>
<p class="p4">{ <span class="s3">var</span> x;<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span>x = <span class="s3">Klank</span>.ar(`[[200, 671, 1153, 1723], <span class="s3">nil</span>, [1, 1, 1, 1]], <span class="s3">PinkNoise</span>.ar(7e-3));<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span>[x,x]<span class="Apple-converted-space"> </span></p>
<p class="p4">}.scope(2))</p>
<p class="p6">// not correlated</p>
<p class="p4">{ <span class="s3">Klank</span>.ar(`[[200, 671, 1153, 1723], <span class="s3">nil</span>, [1, 1, 1, 1]], <span class="s3">PinkNoise</span>.ar([7e-3,7e-3])) }.scope(2);</p>
<p class="p7"><br></p>
<p class="p6">// two waves mixed together coming out both speakers</p>
<p class="p4">{ <span class="s3">var</span> x; x = <span class="s3">Mix</span>.ar(<span class="s3">VarSaw</span>.ar([100,101], 0, 0.1, 0.2)); [x,x] }.scope(2);</p>
<p class="p6">// two waves coming out each speaker independantly</p>
<p class="p4">{ <span class="s3">VarSaw</span>.ar([100,101], 0, 0.1, 0.2 * 1.414) }.scope(2); <span class="s6">// * 1.414 to compensate for power</span></p>
<p class="p7"><br></p>
<p class="p6">// delays as cues to direction</p>
<p class="p6">// mono</p>
<p class="p4">{ <span class="s3">var</span> x; x = <span class="s3">LFTri</span>.ar(1000,0,<span class="s3">Decay2</span>.ar(<span class="s3">Impulse</span>.ar(4,0,0.2),0.004,0.2)); [x,x]}.scope(2);</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p6">// inter-speaker delays</p>
<p class="p4">{ <span class="s3">var</span> x; x = <span class="s3">LFTri</span>.ar(1000,0,<span class="s3">Decay2</span>.ar(<span class="s3">Impulse</span>.ar(4,0,0.2),0.004,0.2));<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span>[<span class="s3">DelayC</span>.ar(x,0.01,0.01),<span class="s3">DelayC</span>.ar(x,0.02,<span class="s3">MouseX</span>.kr(0.02, 0))]</p>
<p class="p4">}.scope(2);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p6">// mixing two delays together</p>
<p class="p6">// you hear a phasing sound but the sound is still flat.</p>
<p class="p4">{ <span class="s3">var</span> x; x = <span class="s3">BrownNoise</span>.ar(0.2);<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span>x = <span class="s3">Mix</span>.ar([<span class="s3">DelayC</span>.ar(x,0.01,0.01),<span class="s3">DelayC</span>.ar(x,0.02,<span class="s3">MouseX</span>.kr(0,0.02))]);</p>
<p class="p4"><span class="Apple-tab-span">	</span>[x,x]</p>
<p class="p4">}.scope(2);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p6">// more spatial sounding. phasing causes you to perceive directionality</p>
<p class="p4">{ <span class="s3">var</span> x; x = <span class="s3">BrownNoise</span>.ar(0.2);<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span>[<span class="s3">DelayC</span>.ar(x,0.01,0.01),<span class="s3">DelayC</span>.ar(x,0.02,<span class="s3">MouseX</span>.kr(0.02, 0))]</p>
<p class="p4">}.scope(2);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p3"><b>Parallel Structures</b></p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// mixing sine oscillators in parallel</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span><span class="s3">var</span><span class="s5"> n = 16; </span>// number of structures to make</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// mix together<span class="Apple-converted-space">  </span>parallel structures</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">Mix</span>.fill(n,<span class="Apple-converted-space"> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// this function creates an oscillator at a random frequency</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{ <span class="s3">FSinOsc</span>.ar(200 + 1000.0.rand) }</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span>) / (2*n)<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// scale amplitude</p>
<p class="p4">}.scope(1);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// mixing sine oscillators in parallel</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span><span class="s3">var</span><span class="s5"> n = 16; </span>// number of structures to make</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// mix together<span class="Apple-converted-space">  </span>parallel structures</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">Mix</span>.fill(n,<span class="Apple-converted-space"> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// this function creates an oscillator at a random frequency</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{ <span class="s3">FSinOsc</span>.ar(200 + 1000.0.rand + [0, 0.5]) }</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span>) / (2*n)<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// scale amplitude</p>
<p class="p4">}.scope(2);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// mixing sine oscillators in parallel</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span><span class="s3">var</span><span class="s5"> n = 16; </span>// number of structures to make</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span>// mix together<span class="Apple-converted-space">  </span>parallel structures</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">Mix</span>.fill(n,<span class="Apple-converted-space"> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>var amp;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>amp = <span class="s3">FSinOsc</span>.kr(exprand(0.1,1),2pi.rand).max(0);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pan2</span>.ar(</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">FSinOsc</span>.ar(exprand(100,1000.0), 0, amp),</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>1.0.rand2)</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span>) / (2*n)<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// scale amplitude</p>
<p class="p4">}.scope(2);</p>
<p class="p4">)</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p4">(</p>
<p class="p4">{</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s3">var</span> n;</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span>n = 8; </span>// number of 'voices'</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span></span><span class="s3">Mix</span><span class="s5">.ar( </span>// mix all stereo pairs down.</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s3">Pan2</span><span class="s5">.ar( </span>// pan the voice to a stereo position</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s3">CombL</span><span class="s5">.ar( </span>// a comb filter used as a string resonator</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s3">Dust</span><span class="s5">.ar( </span>// random impulses as an excitation function</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// an array to cause expansion of Dust to n channels</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// 1 means one impulse per second on average</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>1.dup(n),<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.3 </span>// amplitude</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>),<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.01, </span>// max delay time in seconds</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// array of different random lengths for each 'string'</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{0.004.rand+0.0003}.dup(n),<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>4 </span>// decay time in seconds</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>),</p>
<p class="p6"><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{1.0.rand2}.dup(n) </span>// give each voice a different pan position</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p4"><span class="Apple-tab-span">	</span>)</p>
<p class="p4">}.scope(2, zoom:4);</p>
<p class="p4">)</p>
</body>
</html>
