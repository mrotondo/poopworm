<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="949.43">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #314bd1}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p6 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p7 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica}
p.p8 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica}
p.p10 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica}
p.p11 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p12 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000; min-height: 12.0px}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000}
p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0000bf}
span.s1 {font: 18.0px Helvetica}
span.s2 {color: #314bd1}
span.s3 {color: #000000}
span.s4 {color: #304098}
span.s5 {color: #6f7178}
span.s6 {font: 14.0px Helvetica}
span.s7 {color: #0000bf}
span.s8 {color: #606060}
span.s9 {color: #007300}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>SCEnvelopeEdit<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>an envelope editor view</b><span class="s1"><b><span class="Apple-tab-span">	</span></b></span></p>
<p class="p2"><br></p>
<p class="p1"><b>Inherits from: Object : SCView : </b><a href="SCEnvelopeView.html"><span class="s2"><b>SCEnvelopeView</b></span></a></p>
<p class="p3"><br></p>
<p class="p1">An editable Envelope view.</p>
<p class="p2"><br></p>
<p class="p4"><span class="s3"><b>See also:</b></span><span class="s4"> <a href="SCEnvelopeView.html"><span class="s2">SCEnvelopeView</span></a></span></p>
<p class="p2"><br></p>
<p class="p5"><b>Some Important Issues Regarding SCEnvelopeEdit</b></p>
<p class="p2"><br></p>
<p class="p1">The breakpoints are color coded as follows:</p>
<p class="p1"><span class="Apple-tab-span">	</span>blue -<span class="Apple-tab-span">	</span>normal</p>
<p class="p1"><span class="Apple-tab-span">	</span>red -<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>sustain node</p>
<p class="p1"><span class="Apple-tab-span">	</span>green -<span class="Apple-tab-span">	</span>loop node</p>
<p class="p2"><br></p>
<p class="p5"><b>Creation / Class Methods</b></p>
<p class="p6"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>*new (parent, bounds, env, pointsPerSegment)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>parent </b>- The parent view.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bounds </b>- An instance of <a href="../../Geometry/Rect.html"><span class="s5">Rect</span></a>, or a <a href="../../Geometry/Point.html"><span class="s5">Point</span></a> indicating width@height.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>env </b>- The envelope. An instance of <a href="../../Control/Env.html"><span class="s2">Env</span></a>.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>pointsPerSegment </b>- The resolution in points per segment. Default value is 10.</p>
<p class="p6"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>*paletteExample (parent, bounds)</b></p>
<p class="p6"><br></p>
<p class="p10"><b>Accessing Instance and Class Variables</b></p>
<p class="p11"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>refresh</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>If the Env object is modified directly, this needs to be called to update the GUI.</p>
<p class="p8"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>maxLevel</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>maxLevel_ (level)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Changes maximum level shown in editor.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>level </b>- and Instance of <a href="../../Math/Float.html"><span class="s2">Float</span></a>.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>minLevel</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>minLevel_ (level)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Changes minimum level shown in editor.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>level </b>- and Instance of <a href="../../Math/Float.html"><span class="s2">Float</span></a>.</p>
<p class="p8"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>minTime</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>minTime_ (sec)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Changes minimum time (sec) shown in editor. Negative times are okay because Env uses inter-node durations.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>sec </b>- An instance of <a href="../../Math/Float.html"><span class="s2">Float</span></a>. Seconds.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>maxTime</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>maxTime_ (sec)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Changes maximum time (sec) shown in editor.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>sec </b>- An instance of <a href="../../Math/Float.html"><span class="s2">Float</span></a>. Seconds.</p>
<p class="p6"><br></p>
<p class="p10"><b>Subclassing and Internal Methods</b></p>
<p class="p7"><span class="s6"><span class="Apple-tab-span">	</span></span>The following methods are usually not used directly or are called by a primitive. Programmers can still call or override these as needed.</p>
<p class="p8"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>defaultMauseDownAction (x, y, modifiers, buttonNumber, clickCount)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>*viewClass</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>env_ (e)</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>addBreakPoint (level)</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>insertAtTime (time, level)</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>pointsPerSegment</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>env</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>initSCEnvelopeEdit (argEnv, argPPS, setMinMax)</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>redraw</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>updateAll</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>updateSegment (segNum)</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>clear</b></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><b>Examples</b></p>
<p class="p13"><br></p>
<p class="p14">(</p>
<p class="p15">// make a basic editor</p>
<p class="p14">e = <span class="s7">Env</span>([1,2],[10]);</p>
<p class="p14">w = <span class="s7">SCWindow</span>(<span class="s8">"Env Editor"</span>, <span class="s7">Rect</span>(200,200,300,200));</p>
<p class="p14">v = <span class="s7">SCEnvelopeEdit</span>(w, w.view.bounds.moveBy(20,20).resizeBy(-40,-40), e, 20).resize_(5);</p>
<p class="p14">w.front;</p>
<p class="p14">)</p>
<p class="p14">v.addBreakPoint;</p>
<p class="p13"><br></p>
<p class="p14">v.clear;</p>
<p class="p14">v.redraw;</p>
<p class="p14">v;</p>
<p class="p14">)</p>
<p class="p13"><br></p>
<p class="p15"><span class="s3">v.maxLevel_(2);<span class="Apple-tab-span">	</span></span>// to give more headroom</p>
<p class="p15"><span class="s3">v.maxTime_(2);<span class="Apple-tab-span">	</span></span>// to increase release point</p>
<p class="p15"><span class="s3">v.minTime_(-1);<span class="Apple-tab-span">	</span></span>// to increase attack time</p>
<p class="p13"><br></p>
<p class="p15"><span class="s3">e.curves_ = </span><span class="s9">'sin'</span><span class="s3">;<span class="Apple-tab-span">	</span></span>// env object is changed</p>
<p class="p15"><span class="s3">v.refresh;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// must refresh editor</p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p15">// Controlling a Synth</p>
<p class="p13"><br></p>
<p class="p14">s=<span class="s7">Server</span>.internal;</p>
<p class="p14">s.boot;</p>
<p class="p14">(</p>
<p class="p14">e = <span class="s7">Env</span>([0, 1, 0.7, 0.9, 0], [0.03, 0.03, 0.03, 0.03], <span class="s9">'sin'</span>);</p>
<p class="p14">f = <span class="s7">Env</span>([0, 1, 0.7, 0.9, 0], [0.03, 0.03, 0.03, 0.03], <span class="s9">'sin'</span>);</p>
<p class="p14">w = <span class="s7">SCWindow</span>(<span class="s8">"Shards"</span>, <span class="s7">Rect</span>(100, 100, 500, 400));</p>
<p class="p14">v = <span class="s7">SCEnvelopeEdit</span>(w, w.view.bounds.resizeBy(-20, -200), e, 10).resize_(2);</p>
<p class="p14"><span class="s7">SCStaticText</span>(w, v.bounds).string_(<span class="s8">" amplitude"</span>).resize_(2);</p>
<p class="p14">x = <span class="s7">SCEnvelopeEdit</span>(w, v.bounds.moveBy(0, 200), f, 10).resize_(2);</p>
<p class="p14"><span class="s7">SCStaticText</span>(w, x.bounds).string_(<span class="s8">" frequency"</span>).resize_(2);</p>
<p class="p14">w.front;</p>
<p class="p14">)</p>
<p class="p13"><br></p>
<p class="p14">(</p>
<p class="p16"><span class="s7">SynthDef</span><span class="s3">(</span>"sineBlip"<span class="s3">, {</span></p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="s7">arg</span> freq=440, vol=0.1, la0, la1, la2, la3, la4, ta0, ta1, ta2, ta3, crva,</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>lf0, lf1, lf2, lf3, lf4, tf0, tf1, tf2, tf3, crvf;</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="s7">var</span> signal, fenv, aenv;</p>
<p class="p14"><span class="Apple-tab-span">	</span>fenv = <span class="s7">EnvGen</span>.ar(<span class="s7">Env</span>([lf0,lf1,lf2,lf3,lf4],[tf0,tf1,tf2,tf3], crvf));</p>
<p class="p14"><span class="Apple-tab-span">	</span>aenv = <span class="s7">EnvGen</span>.ar(<span class="s7">Env</span>([la0,la1,la2,la3,la4],[ta0,ta1,ta2,ta3], crva), doneAction: 2);</p>
<p class="p14"><span class="Apple-tab-span">	</span>signal = <span class="s7">SinOsc</span>.ar([freq, freq*2] * fenv) * aenv * vol;</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="s7">Out</span>.ar(0, signal.dup);</p>
<p class="p14">}).send(s);</p>
<p class="p14">)</p>
<p class="p13"><br></p>
<p class="p14">(</p>
<p class="p17">Routine<span class="s3">({</span></p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="s7">var</span> par, indices;</p>
<p class="p14"><span class="Apple-tab-span">	</span>indices = (2..21);</p>
<p class="p14"><span class="Apple-tab-span">	</span>loop({</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>par = (indices +++ (v.env.levels ++ v.env.times ++ v.env.curves ++ x.env.levels ++ x.env.times ++ x.env.curves)).flatten;</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.sendBundle(s.latency, [<span class="s9">\s_new</span>, <span class="s8">"sineBlip"</span>, -1, 1, 1, <span class="s9">\freq</span>, exprand(4e3,11e3)] ++ par);</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.04.wait;</p>
<p class="p14"><span class="Apple-tab-span">	</span>});</p>
<p class="p14">}).play;</p>
<p class="p14">)</p>
</body>
</html>
